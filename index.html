
<!DOCTYPE html>
<html>
<head>
<title>Facebook Bookmarklets</title>
<meta charset="utf-8">
<style>
body {
    font-family: Myriad Web, Segoe UI, Lucida Sans, Arial, sans-serif;
    font-size: 12pt;
    width: 710px;
}
.bookmarklet-wrapper {
  margin-left: 8px;
}

.bookmarklet,.bookmarklet:active,.bookmarklet:focus,.bookmarklet:hover {
  display: inline-block;
  position: relative;
  cursor: move;
  color: #32373c;
  background: #e5e5e5;
  border-radius: 5px;
  border: 1px solid #b4b9be;
  text-decoration: none;
}

.bookmarklet:after {
  content: "";
  width: 70%;
  height: 55%;
  z-index: -1;
  position: absolute;
  right: 10px;
  bottom: 9px;
  background: 0 0;
  transform: skew(20deg) rotate(6deg);
  box-shadow: 0 10px 8px rgba(0,0,0,.6);
}

.bookmarklet:hover:after {
  transform: skew(20deg) rotate(9deg);
  box-shadow: 0 10px 8px rgba(0,0,0,.7);
}

.bookmarklet span {
  display: inline-block;
  padding: 6px 12px 8px 9px;
}
</style>
<script>
function onload() {
    function asTwoDigits(x) { return x < 10 ? "0" + x : x; }

    var date = new Date(document.lastModified);
    var html = date.getFullYear() + "-" +
        asTwoDigits(date.getMonth() + 1) + "-" +
        asTwoDigits(date.getDate());
    document.getElementById("ID_LAST_MODIFIED").innerHTML = html;
}
</script>
</head>
<body onload="onload();">

<p>This page last updated <span id="ID_LAST_MODIFIED">x</span>.</p>

<span class="bookmarklet-wrapper">
<a class="bookmarklet" onclick="return false;" href="javascript:(function()%7Blet%20todo%20%3D%206%3B%0Aconst%20EXPAND_POST%20%3D%201%3B%0Aconst%20EXPAND_COMMENTS%20%3D%202%3B%0Aconst%20EXPAND_REPLIES%20%3D%204%3B%0Aconst%20EXPAND_XLAT%20%3D%208%3B%0Aconst%20EXPAND_FILTER%20%3D%2016%3B%0Aconst%20WAIT_TIME%20%3D%20100%3B%0Aconst%20MAX_WAIT%20%3D%2020%3B%0Aconst%20END_DELAY%20%3D%202.5%3B%0Aconst%20POST_ARTICLE%20%3D%20%22%5Baria-posinset%5D%5Brole%3D%5C%22article%5C%22%5D%22%3B%0Aconst%20VIDEO_ARTICLE%20%3D%20%22._6x84%2C%5Bdata-pagelet%3D%5C%22TahoeRightRail%5C%22%5D%22%3B%0Aconst%20FS_ARTICLE%20%3D%20%22.o36gj0jk%3Anot(%5Brole%3D%5C%22navigation%5C%22%5D)%22%3B%0Aconst%20NEW_ARTICLE%20%3D%20POST_ARTICLE%20%2B%20%22%2C%22%20%2B%20FS_ARTICLE%20%2B%20%22%2C%22%20%2B%20VIDEO_ARTICLE%3B%0Aconst%20POST_ACTION%20%3D%20%22.sjgh65i0%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20span%2C.jifvfom9%5Brole%3D%5C%22button%5C%22%5D%2C.p24jkzn5%22%3B%0Aconst%20POST_ROOT%20%3D%20%22.userContentWrapper%2C.uiScrollableAreaContent%2C%22%20%2B%20NEW_ARTICLE%3B%0Aconst%20RESPONSE_COUNTER%20%3D%20%22%5Baria-label%5D%5Brole%3D%5C%22article%5C%22%5D%22%3B%0Aconst%20GET_MORE_ANYTHING%20%3D%20%22._4sxc%2Cspan.o8rfisnq%22%3B%0Aconst%20GET_REPLIES_ONLY%20%3D%20%22._4sso%22%3B%0Aconst%20SHOW_COMMENTS%20%3D%20%22%5Bdata-ft%3D%5Cu0027%7B%5C%22tn%5C%22%3A%5C%22O%5C%22%7D%5Cu0027%5D%22%3B%0Aconst%20SINGLE_COMMENT_AREA%20%3D%20%22._3w53%2C._6iiv%2C._7a9a%22%3B%0Aconst%20FILTER_ROOT%20%3D%20POST_ROOT%20%2B%20%22%2C.uiScrollableAreaContent%2C.uiStreamStory%22%3B%0Aconst%20FILTER_DONE%20%3D%20%22h6%20~%20ul%20%3E%20li%22%3B%0Aconst%20FILTER_ATTR%20%3D%20%22data-ordering%22%3B%0Aconst%20FILTER_VALUE%20%3D%20%22RANKED_UNFILTERED%22%3B%0Aconst%20FILTER_NEW%20%3D%20%22.bp9cbjyn%20%3E%20.p8dawk7l%5Brole%3D%5C%22button%5C%22%5D%3Anot(%5Baria-label%5D)%3Anot(%5Baria-haspopup%5D)%3Anot(.jifvfom9)%3Anot(._4sxc)%22%3B%0Aconst%20CSS_LOGIN_STUFF%20%3D%20%22._5hn6%2C%20._67m7%2C%20.generic_dialog_modal%22%3B%0Aconst%20BASE_SEE_MORE%20%3D%20%22.text_exposed_link%20.see_more_link_inner%22%3B%0Aconst%20EXPOSE_CONTENT%20%3D%20%22.text_exposed_link%22%3B%0Aconst%20CSS_SEE_MORE%20%3D%20%22.fss%3Anot(._5shl)%22%3B%0Aconst%20SMN%20%3D%20%22.lrazzd5p%5Brole%3D%5C%22button%5C%22%5D%22%3B%0Aconst%20SEE_MORE_NEW%20%3D%20POST_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%20%2B%20%22%2C%22%20%2B%20FS_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%20%2B%20%22%2C%22%20%2B%20VIDEO_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%3B%0Aconst%20_NONE%20%3D%20%22no-value%22%3B%0Aconst%20_COMMENTS%20%3D%20%22-comments%22%3B%0Aconst%20_REPLIES%20%3D%20%22-replies%22%3B%0Aconst%20SETTINGS_KEY%20%3D%20%22expand-all-todo%22%3B%0A%0Afunction%20bind(obj%2C%20fn)%20%7B%0A%20%20%20%20return%20function()%20%7B%0A%20%20%20%20%20%20%20%20fn.apply(obj%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%7D%0Alet%20Global%20%3D%20null%3B%0Aif%20(!document.querySelectorAll(%22xx%22).forEach)%20%7B%0A%20%20%20%20Object.prototype.forEach%20%3D%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20let%20T%3B%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20T%20%3D%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20O%20%3D%20Object(this)%3B%0A%20%20%20%20%20%20%20%20let%20len%20%3D%20O.length%20%3E%3E%3E%200%3B%0A%20%20%20%20%20%20%20%20let%20k%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20(k%20%3C%20len)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(k%20in%20O)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback.call(T%2C%20O%5Bk%5D%2C%20k%2C%20O)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20k%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%7D%0A%0Afunction%20EscHandler()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20false%3B%0A%20%20%20%20this.handler%20%3D%20bind(this%2C%20this.docKeyDown)%3B%0A%7D%0AEscHandler.prototype.shouldAbort%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.abortNow%3B%0A%7D%3B%0AEscHandler.prototype.abort%20%3D%20function(value)%20%7B%0A%20%20%20%20if%20(value%20%26%26%20!this.shouldAbort()%20%26%26%20!Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Aborting...%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.abortNow%20%3D%20value%3B%0A%7D%3B%0AEscHandler.prototype.on%20%3D%20function()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20false%3B%0A%20%20%20%20document.addEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0AEscHandler.prototype.off%20%3D%20function()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20true%3B%0A%20%20%20%20document.removeEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0AEscHandler.prototype.docKeyDown%20%3D%20function(e)%20%7B%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%2027)%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20this.abort(true)%3B%0A%20%20%20%20%20%20%20%20if%20(Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Session.trulyEnd()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0Afunction%20CfgHandler()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20false%3B%0A%20%20%20%20this.handler%20%3D%20bind(this%2C%20this.docKeyDown)%3B%0A%7D%0ACfgHandler.prototype.shouldConfig%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.doConfig%3B%0A%7D%3B%0ACfgHandler.prototype.on%20%3D%20function()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20false%3B%0A%20%20%20%20document.addEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0ACfgHandler.prototype.off%20%3D%20function()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20true%3B%0A%20%20%20%20document.removeEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0ACfgHandler.prototype.docKeyDown%20%3D%20function(e)%20%7B%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%3D%20%22S%22.charCodeAt(0))%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20if%20(e.ctrlKey)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Settings.removeKey(SETTINGS_KEY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(%22Will%20use%20default%20settings%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.doConfig%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20if%20(Global.ending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20CfgWindow.showIt()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0Afunction%20Settings()%20%7B%7D%0Anew%20Settings()%3B%0ASettings.hasValue%20%3D%20function(value)%20%7B%0A%20%20%20%20return%20window.localStorage.getItem(value)%20!%3D%3D%20null%3B%0A%7D%3B%0ASettings.getValue%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(!Settings.hasValue(value))%20%7B%0A%20%20%20%20%20%20%20%20return%20deflt%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20window.localStorage.getItem(value)%3B%0A%7D%3B%0ASettings.getInt%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20Number.parseInt(Settings.getValue(value%2C%20deflt)%2C%2010)%3B%0A%7D%3B%0ASettings.getBoolean%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20%22false%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20Settings.getValue(value%2C%20%22%22%20%2B%20deflt)%20%3D%3D%20%22true%22%3B%0A%7D%3B%0ASettings.setValue%20%3D%20function(key%2C%20value)%20%7B%0A%20%20%20%20return%20window.localStorage.setItem(key%2C%20%22%22%20%2B%20value)%3B%0A%7D%3B%0ASettings.removeKey%20%3D%20function(key)%20%7B%0A%20%20%20%20return%20window.localStorage.removeItem(key)%3B%0A%7D%3B%0A%0Afunction%20BaseWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22base-window%22%3B%0A%7D%0ABaseWindow.prototype.show%20%3D%20function()%20%7B%0A%20%20%20%20const%20WANT_W%20%3D%20300%3B%0A%20%20%20%20const%20WANT_H%20%3D%20200%3B%0A%20%20%20%20const%20sizer%20%3D%20document.querySelector(%22html%22)%3B%0A%20%20%20%20const%20w%20%3D%20sizer.clientWidth%3B%0A%20%20%20%20const%20h%20%3D%20sizer.clientHeight%3B%0A%20%20%20%20let%20x%20%3D%200%3B%0A%20%20%20%20if%20(w%20%3E%20WANT_W)%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20(w%20-%20WANT_W)%20%2F%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20y%20%3D%200%3B%0A%20%20%20%20if%20(h%20%3E%20WANT_H)%20%7B%0A%20%20%20%20%20%20%20%20y%20%3D%20(h%20-%20WANT_H)%20%2F%203%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20div%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20div.id%20%3D%20this.id%3B%0A%20%20%20%20div.style.direction%20%3D%20%22ltr%22%3B%0A%20%20%20%20div.style.position%20%3D%20%22fixed%22%3B%0A%20%20%20%20div.style.zIndex%20%3D%20%22999999%22%3B%0A%20%20%20%20div.style.left%20%3D%20x%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.width%20%3D%20WANT_W%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.top%20%3D%20y%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.height%20%3D%20WANT_H%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20div.style.backgroundColor%20%3D%20%22%23425f9c%22%3B%0A%20%20%20%20document.body.insertAdjacentElement(%22afterbegin%22%2C%20div)%3B%0A%20%20%20%20this.create(div)%3B%0A%20%20%20%20this.init(div)%3B%0A%7D%3B%0ABaseWindow.prototype.create%20%3D%20function(div)%20%7B%7D%3B%0ABaseWindow.prototype.init%20%3D%20function(div)%20%7B%7D%3B%0ABaseWindow.prototype.hide%20%3D%20function()%20%7B%0A%20%20%20%20document.querySelectorAll(%22%23%22%20%2B%20this.id).forEach(item%20%3D%3E%20document.body.removeChild(item))%3B%0A%7D%3B%0A%0Afunction%20CfgWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22cfg-window%22%3B%0A%7D%0ACfgWindow.prototype%20%3D%20Object.create(BaseWindow.prototype)%3B%0ACfgWindow.prototype.create%20%3D%20function(div)%20%7B%0A%20%20%20%20let%20node%20%3D%20document.createElement(%22p%22)%3B%0A%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20node.innerHTML%20%3D%20%22%3Ci%3EExpand%20All%3C%2Fi%3E%20Settings%22%3B%0A%20%20%20%20node.style.marginLeft%20%3D%20%224px%22%3B%0A%20%20%20%20node.style.fontWeight%20%3D%20%22bold%22%3B%0A%20%20%20%20const%20boxes%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%5B%22In%20Classic%20Facebook%2C%20click%20%3Ci%3EContinue%20Reading%3C%2Fi%3E%20links.%22%2C%20EXPAND_POST%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Expand%20comments.%22%2C%20EXPAND_COMMENTS%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Expand%20replies.%22%2C%20EXPAND_REPLIES%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Don't%20force%20%3Ci%3EAll%20Comments%3C%2Fi%3E%20filter.%22%2C%20EXPAND_FILTER%5D%0A%20%20%20%20%5D%3B%0A%20%20%20%20boxes.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%20document.createElement(%22p%22)%3B%0A%20%20%20%20%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20%20%20%20%20node.style.marginTop%20%3D%20%222px%22%3B%0A%20%20%20%20%20%20%20%20node.style.marginBottom%20%3D%20%222px%22%3B%0A%20%20%20%20%20%20%20%20let%20node2%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20%20%20%20%20node2.type%20%3D%20%22checkbox%22%3B%0A%20%20%20%20%20%20%20%20node2.value%20%3D%20item%5B1%5D%3B%0A%20%20%20%20%20%20%20%20node2.style.marginLeft%20%3D%20%2215px%22%3B%0A%20%20%20%20%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20node2%20%3D%20document.createElement(%22label%22)%3B%0A%20%20%20%20%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20%20%20%20%20node2.innerHTML%20%3D%20item%5B0%5D%3B%0A%20%20%20%20%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20node2.style.paddingBottom%20%3D%20%225px%22%3B%0A%20%20%20%20%20%20%20%20node2.style.fontWeight%20%3D%20%22normal%22%3B%0A%20%20%20%20%20%20%20%20node2.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20node%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20node.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20let%20node2%20%3D%20document.createElement(%22button%22)%3B%0A%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20node2.innerHTML%20%3D%20%22Done%22%3B%0A%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20node2.addEventListener(%22click%22%2C%20Session.trulyEnd)%3B%0A%20%20%20%20div.addEventListener(%22CheckboxStateChange%22%2C%20CfgWindow.check)%3B%0A%20%20%20%20div.addEventListener(%22click%22%2C%20CfgWindow.check)%3B%0A%7D%3B%0ACfgWindow.check%20%3D%20function(e)%20%7B%0A%20%20%20%20let%20node%20%3D%20Dom.upThenDown(e.target%2C%20%22p%22%2C%20%22input%22)%3B%0A%20%20%20%20if%20(node%20!%3D%20e.target)%20%7B%0A%20%20%20%20%20%20%20%20node.checked%20%3D%20!node.checked%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(node.checked)%20%7B%0A%20%20%20%20%20%20%20%20todo%20%7C%3D%20Number.parseInt(node.value)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20todo%20%26%3D%20~Number.parseInt(node.value)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Settings.setValue(SETTINGS_KEY%2C%20todo)%3B%0A%7D%3B%0ACfgWindow.prototype.init%20%3D%20function(div)%20%7B%0A%20%20%20%20let%20boxes%20%3D%20div.querySelectorAll(%22input%22)%3B%0A%20%20%20%20if%20(boxes.length%20%3D%3D%3D%204)%20%7B%0A%20%20%20%20%20%20%20%20boxes%5B0%5D.checked%20%3D%20(todo%20%26%20EXPAND_POST)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B1%5D.checked%20%3D%20(todo%20%26%20EXPAND_COMMENTS)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B2%5D.checked%20%3D%20(todo%20%26%20EXPAND_REPLIES)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B3%5D.checked%20%3D%20(todo%20%26%20EXPAND_FILTER)%20!%3D%200%3B%0A%20%20%20%20%7D%0A%7D%3B%0ACfgWindow.showIt%20%3D%20function()%20%7B%0A%20%20%20%20Global.logger.hide()%3B%0A%20%20%20%20Global.cfg%20%3D%20new%20CfgWindow()%3B%0A%20%20%20%20Global.cfg.show()%3B%0A%7D%3B%0A%0Afunction%20LogWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22log-window%22%3B%0A%20%20%20%20this.timeouts%20%3D%200%3B%0A%20%20%20%20this.phantoms%20%3D%200%3B%0A%20%20%20%20this.edit%20%3D%20null%3B%0A%7D%0ALogWindow.prototype%20%3D%20Object.create(BaseWindow.prototype)%3B%0ALogWindow.prototype.create%20%3D%20function(div)%20%7B%0A%20%20%20%20this.edit%20%3D%20document.createElement(%22textarea%22)%3B%0A%20%20%20%20this.edit.style.width%20%3D%20%22100%25%22%3B%0A%20%20%20%20this.edit.style.height%20%3D%20%22100%25%22%3B%0A%20%20%20%20this.edit.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20this.edit.style.backgroundColor%20%3D%20%22%23425f9c%22%3B%0A%20%20%20%20div.appendChild(this.edit)%3B%0A%7D%3B%0ALogWindow.prototype.hide%20%3D%20function()%20%7B%0A%20%20%20%20BaseWindow.prototype.hide.call(this)%3B%0A%20%20%20%20this.edit%20%3D%20null%3B%0A%7D%3B%0ALogWindow.prototype.log%20%3D%20function(s)%20%7B%0A%20%20%20%20console.log(s)%3B%0A%20%20%20%20if%20(this.edit)%20%7B%0A%20%20%20%20%20%20%20%20this.edit.value%20%3D%20s%20%2B%20%22%5Cn%22%20%2B%20this.edit.value%3B%0A%20%20%20%20%7D%0A%7D%3B%0ALogWindow.prototype.timeout%20%3D%20function()%20%7B%0A%20%20%20%20this.timeouts%2B%2B%3B%0A%7D%3B%0ALogWindow.prototype.phantom%20%3D%20function()%20%7B%0A%20%20%20%20this.phantoms%2B%2B%3B%0A%7D%3B%0ALogWindow.prototype.counts%20%3D%20function()%20%7B%0A%20%20%20%20if%20(this.timeouts%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.log(this.timeouts%20%2B%20%22%20timeout(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(this.phantoms%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.log(this.phantoms%20%2B%20%22%20phantom(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.log(%22Responses%20%3D%20%22%20%2B%20Global.root.queryAll(RESPONSE_COUNTER).length)%3B%0A%7D%3B%0A%0Afunction%20Root()%20%7B%0A%20%20%20%20this.rootNode%20%3D%20document.body%3B%0A%20%20%20%20this.usingBody%20%3D%20true%3B%0A%7D%0ARoot.removeOverlay%20%3D%20function()%20%7B%0A%20%20%20%20document.querySelectorAll(CSS_LOGIN_STUFF).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Removing%20overlay%20stuff%22)%3B%0A%20%20%20%20%20%20%20%20item.parentNode.removeChild(item)%3B%0A%20%20%20%20%7D)%3B%0A%7D%3B%0ARoot.prototype.query%20%3D%20function(s)%20%7B%0A%20%20%20%20return%20this.rootNode.querySelector(s)%3B%0A%7D%3B%0ARoot.prototype.queryAll%20%3D%20function(s)%20%7B%0A%20%20%20%20return%20this.rootNode.querySelectorAll(s)%3B%0A%7D%3B%0ARoot.prototype.determine%20%3D%20function()%20%7B%0A%20%20%20%20const%20EXPANDING%20%3D%20%22Expanding%3A%20%22%3B%0A%20%20%20%20const%20div%20%3D%20Dom.findFirstVisible(document.querySelectorAll(POST_ARTICLE))%3B%0A%20%20%20%20if%20(!!div)%20%7B%0A%20%20%20%20%20%20%20%20let%20canPost%20%3D%20!!document.querySelector(POST_ACTION)%3B%0A%20%20%20%20%20%20%20%20let%20topOnly%20%3D%20!canPost%3B%0A%20%20%20%20%20%20%20%20if%20(topOnly)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20topOnly%20%3D%20Dom.filterHidden(document.querySelectorAll(%22%5Brole%3D%5C%22navigation%5C%22%5D%22)).length%20%3D%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20topOnly%20%3D%20Dom.filterHidden(document.querySelectorAll(%22%5Brole%3D%5C%22feed%5C%22%5D%22)).length%20%3E%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(topOnly)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(EXPANDING%20%2B%20%22Topmost%20post%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rootNode%20%3D%20div.parentNode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.usingBody%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(!this.usingBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20USE_PARENT%20%3D%20true%3B%0A%20%20%20%20let%20check%20%3D%20%5B%5D%3B%0A%20%20%20%20check.push(%5B%22.uiStreamStory%22%2C%20%22Video%20comments%20on%20right%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22div.rhcScroller%20.uiScrollableAreaContent%22%2C%20%22Theater%20mode%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22.uiLayer%3Anot(.hidden_elem)%22%2C%20%22Overlaid%20post%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22.permalinkPost%22%2C%20%22Permalinked%20post%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Bdata-pagelet%3D%5C%22TahoeRightRail%5C%22%5D%22%2C%20%22Full-browser%20video%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5BFS_ARTICLE%2C%20%22Full-browser%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Brole%3D%5C%22main%5C%22%5D%22%2C%20%22Main%20content%20area%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Brole%3D%5C%22feed%5C%22%5D%22%2C%20%22Feed%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.find(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20divs%20%3D%20Dom.filterHidden(document.querySelectorAll(item%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20let%20div%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(divs.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20divs%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(divs.length%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20divs%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!!div)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(EXPANDING%20%2B%20item%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(item%5B2%5D%20%3D%3D%20USE_PARENT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20div.parentNode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rootNode%20%3D%20div%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.usingBody%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%7D%3B%0ARoot.prototype.getRoot%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.rootNode%3B%0A%7D%3B%0ARoot.prototype.getResponseCount%20%3D%20function()%20%7B%0A%20%20%20%20return%20getResponseCount(this.rootNode)%3B%0A%7D%3B%0ARoot.prototype.getContentSize%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20this.rootNode.scrollHeight%3B%0A%20%20%20%20result%20%2B%3D%20this.getResponseCount()%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.isClassicVideo%20%3D%20function()%20%7B%0A%20%20%20%20const%20result%20%3D%20!!document.querySelector(%22.uiStreamStory%22)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prepIfClassicVideo%20%3D%20function(onDone)%20%7B%0A%20%20%20%20let%20wait%20%3D%200%3B%0A%20%20%20%20if%20(Root.isClassicVideo())%20%7B%0A%20%20%20%20%20%20%20%20const%20links%20%3D%20document.querySelectorAll(SHOW_COMMENTS)%3B%0A%20%20%20%20%20%20%20%20if%20(links.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(%22Making%20sure%20video%20comments%20are%20showing%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20links%5Blinks.length%20-%201%5D.click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wait%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(onDone)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(onDone%2C%20wait)%3B%0A%20%20%20%20%7D%0A%7D%3B%0ARoot.prototype.isFullBrowserNew%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20!!Global.root.query(FS_ARTICLE)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prototype.isSearchResults%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20!!Global.root.query(%22%23pagelet_group_search%2C.p8dawk7l%5Brole%3D%5C%22presentation%5C%22%5D%22)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prototype.countPosts%20%3D%20function()%20%7B%0A%20%20%20%20if%20(Root.isClassicVideo())%20%7B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(POST_ROOT))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(POST_ROOT))%3B%0A%20%20%20%20return%20filter.length%3B%0A%7D%3B%0A%0Afunction%20Dom()%20%7B%7D%0Anew%20Dom()%3B%0ADom.getStyle%20%3D%20function(node)%20%7B%0A%20%20%20%20return%20node.ownerDocument.defaultView.getComputedStyle(node%2C%20null)%3B%0A%7D%3B%0ADom.isHidden%20%3D%20function(node)%20%7B%0A%20%20%20%20while%20(node%20%26%26%20node.ownerDocument)%20%7B%0A%20%20%20%20%20%20%20%20if%20(Dom.getStyle(node)%5B%22display%22%5D%20%3D%3D%20%22none%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20node%20%3D%20node.parentNode%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%3B%0A%7D%3B%0ADom.filterHidden%20%3D%20function(nodes)%20%7B%0A%20%20%20%20let%20result%20%3D%20%5B%5D%3B%0A%20%20%20%20nodes.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!Dom.isHidden(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.push(item)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ADom.findFirstVisible%20%3D%20function(nodes)%20%7B%0A%20%20%20%20let%20filtered%20%3D%20Dom.filterHidden(nodes)%3B%0A%20%20%20%20return%20filtered.length%20%3E%3D%201%20%3F%20filtered%5B0%5D%20%3A%20null%3B%0A%7D%3B%0ADom.dumpAncestors%20%3D%20function(node)%20%7B%0A%20%20%20%20while%20(node)%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20node.nodeName%3B%0A%20%20%20%20%20%20%20%20if%20(node.id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20id%3D%5C%22%22%20%2B%20node.id%20%2B%20%22%5C%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(node.className)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20class%3D%5C%22%22%20%2B%20node.className%20%2B%20%22%5C%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(Dom.isHidden(node))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20hidden%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20Global.log(s)%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20node.parentNode%3B%0A%20%20%20%20%7D%0A%7D%3B%0ADom.upThenDown%20%3D%20function(node%2C%20ancestor%2C%20descendant)%20%7B%0A%20%20%20%20const%20item%20%3D%20node.parentNode.closest(ancestor)%3B%0A%20%20%20%20if%20(item)%20%7B%0A%20%20%20%20%20%20%20%20return%20item.querySelector(descendant)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20null%3B%0A%7D%3B%0A%0Afunction%20getResponseCount(item)%20%7B%0A%20%20%20%20return%20item.querySelectorAll(RESPONSE_COUNTER).length%3B%0A%7D%0A%0Afunction%20closeShareReport(onDone)%20%7B%0A%20%20%20%20const%20nodes%20%3D%20document.querySelectorAll(%22.sx_1ea4e0%2C.sx_ecfa40%2C.sx_1564cf%2C.sx_4564fd%2C.sx_4cbb0f%22)%3B%0A%20%20%20%20if%20(nodes.length%20%3D%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20const%20close%20%3D%20nodes%5B0%5D.closest(%22.thwo4zme%5Brole%3D%5C%22button%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20close.click()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(onDone)%20onDone()%3B%0A%7D%0A%0Afunction%20ensureCommentsShowing(onDone)%20%7B%0A%20%20%20%20if%20(Global.root.isSearchResults())%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22You%20must%20manually%20drill%20down%20into%20a%20search%20result.%22)%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20%5B%5D%3B%0A%20%20%20%20const%20n%20%3D%20Global.root.countPosts()%3B%0A%20%20%20%20if%20(n%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Examining%20%22%20%2B%20n%20%2B%20%22%20posts%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.root.queryAll(POST_ROOT).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!item.querySelector(POST_ROOT))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20link%20%3D%20item.querySelector(SHOW_COMMENTS)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(link%20%26%26%20!item.querySelector(SINGLE_COMMENT_AREA))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter.push(link)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Showing%20comment%20area%20for%20%22%20%2B%20filter.length%20%2B%20%22%20post(s)%22)%3B%0A%20%20%20%20%20%20%20%20clickAndWait(_NONE%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20ensureCommentsShowingNew(onDone)%20%7B%0A%20%20%20%20let%20filter%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20selector%20%3D%20%22.tvmbv18p%22%3B%0A%20%20%20%20if%20(Global.root.isFullBrowserNew())%20%7B%0A%20%20%20%20%20%20%20%20selector%20%3D%20%22%5Bclass%3D%5C%22cwj9ozl2%5C%22%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.root.queryAll(POST_ROOT).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!item.querySelector(selector))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20link%20%3D%20item.querySelector(%22.gtad4xkn%3Afirst-child%20.auili1gw%5Brole%3D%5C%22button%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(link%20%26%26%20link.textContent.indexOf(%22%20Share%22)%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter.push(link)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Showing%20comment%20area%20for%20%22%20%2B%20filter.length%20%2B%20%22%20post(s)%22)%3B%0A%20%20%20%20%20%20%20%20clickAndWait(_NONE%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20isNewWindow(link)%20%7B%0A%20%20%20%20return%20!!link.querySelector(%22a%5Btarget%5D%5Bhref%5D%22)%3B%0A%7D%0A%0Afunction%20newWindowNow(link)%20%7B%0A%20%20%20%20const%20anchor%20%3D%20link.querySelector(%22a%5Btarget%5D%5Bhref%5D%22)%3B%0A%20%20%20%20Global.log(%22New%20window%3A%20%22%20%2B%20anchor.textContent)%3B%0A%20%20%20%20if%20(!window.open(anchor.getAttribute(%22href%22)%2C%20anchor.getAttribute(%22target%22)))%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22New%20window%20was%20blocked!%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20clickClass(value%2C%20onDone)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(value)).filter(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20BASE_SEE_MORE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(item.parentNode.closest(%22.groupsSideMargin%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Dom.isHidden(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20SEE_MORE_NEW)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!!item.childElementCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20full%20%3D%20item.parentNode.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20link%20%3D%20item.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(full.charAt(full.length%20-%20link.length%20-%202)%20%3D%3D%20%22%5Cu2026%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20EXPOSE_CONTENT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isNewWindow(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newWindowNow(item)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20filter.length%3B%0A%7D%0A%0Afunction%20doNotWait(value)%20%7B%0A%20%20%20%20return%20%5BCSS_SEE_MORE%2C%20SEE_MORE_NEW%2C%20BASE_SEE_MORE%2C%20EXPOSE_CONTENT%5D.indexOf(value)%20%3E%3D%200%3B%0A%7D%0A%0Afunction%20commentsOrReplies(comments%2C%20onDone)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(GET_MORE_ANYTHING))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(%22%5Brole%3D%5C%22img%5C%22%5D%22))%3B%0A%20%20%20%20if%20(comments)%20%7B%0A%20%20%20%20%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(GET_REPLIES_ONLY))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!!item.querySelector(GET_REPLIES_ONLY))%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(comments%20%3F%20_COMMENTS%20%3A%20_REPLIES%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20getBestLabel(link)%20%7B%0A%20%20%20%20let%20label%20%3D%20link.getAttribute(%22aria-label%22)%3B%0A%20%20%20%20if%20(!label)%20%7B%0A%20%20%20%20%20%20%20%20label%20%3D%20link.textContent%3B%0A%20%20%20%20%7D%0A%20%20%20%20label%20%3D%20label.split(%22%5Cu00a0%5Cu0020%5Cu00b7%22)%5B0%5D%3B%0A%20%20%20%20const%20time%20%3D%20link.querySelector(%22._3eom%22)%3B%0A%20%20%20%20if%20(time%20%26%26%20label.endsWith(time.textContent))%20%7B%0A%20%20%20%20%20%20%20%20label%20%3D%20label.substring(0%2C%20label.length%20-%20time.textContent.length)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20label%3B%0A%7D%0A%0Afunction%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20n%20%3D%20Global.root.getContentSize()%3B%0A%20%20%20%20Global.log(%22click%20(%22%20%2B%20(links.length%20-%20i%20-%201)%20%2B%20%22%20left)%3A%20%22%20%2B%20getBestLabel(links%5Bi%5D))%3B%0A%20%20%20%20links%5Bi%5D.click()%3B%0A%20%20%20%20if%20(value%20%3D%3D%20_NONE)%20%7B%0A%20%20%20%20%20%20%20%20n%20%3D%20Global.root.getContentSize()%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20wait%20%3D%20MAX_WAIT%3B%0A%20%20%20%20let%20time%20%3D%20WAIT_TIME%3B%0A%20%20%20%20if%20(doNotWait(value))%20%7B%0A%20%20%20%20%20%20%20%20wait%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20time%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.setTimeout(()%20%3D%3E%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20wait)%2C%20time)%3B%0A%7D%0A%0Afunction%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20wait)%20%7B%0A%20%20%20%20if%20(wait%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(Global.root.getContentSize()%20-%20n%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%20_COMMENTS%20%7C%7C%20value%20%3D%3D%20_REPLIES)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commentsOrReplies(value%20%3D%3D%20_COMMENTS%2C%20onDone)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(window.doPhantomCheck%20%26%26%20!Global.root.getRoot().contains(links%5Bi%5D))%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.phantom()%3B%0A%20%20%20%20%20%20%20%20wait%20%3D%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(wait%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20--wait)%2C%20WAIT_TIME)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(wait%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.timeout()%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce(onDone)%20%7B%0A%20%20%20%20window.responseCount%20%3D%20Global.root.getResponseCount()%3B%0A%20%20%20%20window.doPhantomCheck%20%3D%20true%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_COMMENTS)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20commentsOrReplies(true%2C%20()%20%3D%3E%20pumpOnce2(onDone))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20pumpOnce2(onDone)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce2(onDone)%20%7B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_REPLIES)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20commentsOrReplies(false%2C%20()%20%3D%3E%20pumpOnce3(onDone))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20pumpOnce3(onDone)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce3(onDone)%20%7B%0A%20%20%20%20if%20(Global.root.getResponseCount()%20%3E%20window.responseCount)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20pumpOnce(onDone)%2C%20500)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20delete%20window.doPhantomCheck%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilter(onDone)%20%7B%0A%20%20%20%20window.filters%20%3D%20Array.from(Global.root.queryAll(%22%5B%22%20%2B%20FILTER_ATTR%20%2B%20%22%5D%22)).filter(item%20%3D%3E%20item.getAttribute(FILTER_ATTR)%20!%3D%20FILTER_VALUE)%3B%0A%20%20%20%20window.filters_i%20%3D%200%3B%0A%20%20%20%20window.filters_onDone%20%3D%20onDone%3B%0A%20%20%20%20if%20(window.filters.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Changing%20%22%20%2B%20window.filters.length%20%2B%20%22%20Classic%20filter(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOne()%3B%0A%7D%0A%0Afunction%20filterOne()%20%7B%0A%20%20%20%20if%20(window.filters_i%20%3C%20window.filters.length)%20%7B%0A%20%20%20%20%20%20%20%20const%20link%20%3D%20window.filters%5Bwindow.filters_i%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20link.click()%3B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter2(link)%2C%20100)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.filters_onDone)%20window.filters_onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilter2(link)%20%7B%0A%20%20%20%20const%20menu%20%3D%20document.querySelector(%22%5Bdata-ownerid%3D%5C%22%22%20%2B%20link.id%20%2B%20%22%5C%22%5D%22)%3B%0A%20%20%20%20if%20(menu)%20%7B%0A%20%20%20%20%20%20%20%20const%20item%20%3D%20menu.querySelector(%22%5B%22%20%2B%20FILTER_ATTR%20%2B%20%22%3D%5C%22%22%20%2B%20FILTER_VALUE%20%2B%20%22%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20if%20(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20post%20%3D%20link.closest(FILTER_ROOT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter3(post%2C%2050))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20item.closest(%22a%22).click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20link.click()%3B%0A%20%20%20%20filterOne()%3B%0A%7D%0A%0Afunction%20setFilter3(post)%20%7B%0A%20%20%20%20if%20(!post.querySelector(FILTER_DONE))%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter3(post)%2C%20200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20filterOne()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilterNew(onDone)%20%7B%0A%20%20%20%20window.filters%20%3D%20Array.from(Global.root.queryAll(FILTER_NEW))%3B%0A%20%20%20%20window.filters%20%3D%20window.filters.filter(item%20%3D%3E%20!item.closest(%22.sq6gx45u%22))%3B%0A%20%20%20%20window.filters%20%3D%20window.filters.filter(item%20%3D%3E%20!item.querySelector(%22h1%2Csvg%22))%3B%0A%20%20%20%20if%20(window.filters%20%3E%20Global.root.countPosts())%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Something%20went%20wrong%22)%3B%0A%20%20%20%20%20%20%20%20Global.log(%22Not%20checking%20%22%20%2B%20window.filters.length%20%2B%20%22%20New%20filter(s)%22)%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.filters_i%20%3D%200%3B%0A%20%20%20%20window.filters_onDone%20%3D%20onDone%3B%0A%20%20%20%20if%20(window.filters.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Checking%20%22%20%2B%20window.filters.length%20%2B%20%22%20New%20filter(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOneNew()%3B%0A%7D%0A%0Afunction%20filterOneNew()%20%7B%0A%20%20%20%20if%20(window.filters_i%20%3C%20window.filters.length)%20%7B%0A%20%20%20%20%20%20%20%20const%20link%20%3D%20window.filters%5Bwindow.filters_i%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20link.click()%3B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew2(link)%2C%20100)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.filters_onDone)%20window.filters_onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilterNew2(link)%20%7B%0A%20%20%20%20let%20filter%20%3D%20Array.from(document.querySelectorAll(%22.ama3r5zh%5Brole%3D%5C%22menu%5C%22%5D%2C.swg4t2nn%5Brole%3D%5C%22menu%5C%22%5D%22))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20item.querySelectorAll(%22%5Brole%3D%5C%22menuitem%5C%22%5D%22).length%20%3E%3D%203)%3B%0A%20%20%20%20if%20(filter.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20const%20menus%20%3D%20filter%5B0%5D.querySelectorAll(%22%5Brole%3D%5C%22menuitem%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20const%20span%20%3D%20menus%5B2%5D.querySelector(%22span%22)%3B%0A%20%20%20%20%20%20%20%20let%20text%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20if%20(!!span)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%20%3D%20span.textContent%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(text%20!%3D%20link.textContent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20menus%5B2%5D.click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20post%20%3D%20link.closest(NEW_ARTICLE)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew3(post)%2C%20100)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20menus%5B0%5D.closest(%22%5Brole%3D%5C%22menu%5C%22%5D%22).outerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOneNew()%3B%0A%7D%0A%0Afunction%20setFilterNew3(post)%20%7B%0A%20%20%20%20if%20(!!post.querySelector(FILTER_NEW))%20%7B%0A%20%20%20%20%20%20%20%20filterOneNew()%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew3(post)%2C%20100)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20Actions()%20%7B%0A%20%20%20%20this.i%20%3D%200%3B%0A%20%20%20%20this.setUpActions()%3B%0A%7D%0AActions.prototype.setUpActions%20%3D%20function()%20%7B%0A%20%20%20%20this.actions%20%3D%20%5B%5D%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20Root.prepIfClassicVideo(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20ensureCommentsShowing(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20ensureCommentsShowingNew(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20closeShareReport(onDone))%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_FILTER)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20setFilter(onDone))%3B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20setFilterNew(onDone))%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(BASE_SEE_MORE%2C%20onDone))%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_POST)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(EXPOSE_CONTENT%2C%20onDone))%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20pumpOnce(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(CSS_SEE_MORE%2C%20onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(SEE_MORE_NEW%2C%20onDone))%3B%0A%20%20%20%20this.actions.push(Session.endSession)%3B%0A%20%20%20%20this.actions.push(null)%3B%0A%7D%3B%0AActions.prototype.doAction%20%3D%20function()%20%7B%0A%20%20%20%20if%20(this.actions%5Bthis.i%5D%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.actions%5Bthis.i%5D(()%20%3D%3E%20window.setTimeout(bind(this%2C%20this.doAction)%2C%2050))%3B%0A%20%20%20%20%20%20%20%20this.i%2B%2B%3B%0A%20%20%20%20%7D%0A%7D%3B%0AActions.prototype.kickOff%20%3D%20function()%20%7B%0A%20%20%20%20this.i%20%3D%200%3B%0A%20%20%20%20this.doAction()%3B%0A%7D%3B%0A%0Afunction%20Session()%20%7B%7D%0ASession.init%20%3D%20function()%20%7B%0A%20%20%20%20if%20(window.Global)%20%7B%0A%20%20%20%20%20%20%20%20Global%20%3D%20window.Global%3B%0A%20%20%20%20%20%20%20%20Global.escHandler.abort(true)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20Session.kickOff()%3B%0A%20%20%20%20%7D%0A%7D%3B%0ASession.kickOff%20%3D%20function()%20%7B%0A%20%20%20%20Global%20%3D%20%7B%0A%20%20%20%20%20%20%20%20escHandler%3A%20new%20EscHandler()%2C%0A%20%20%20%20%20%20%20%20cfgHandler%3A%20new%20CfgHandler()%2C%0A%20%20%20%20%20%20%20%20logger%3A%20new%20LogWindow()%2C%0A%20%20%20%20%20%20%20%20root%3A%20new%20Root()%0A%20%20%20%20%7D%3B%0A%20%20%20%20Global.log%20%3D%20function(s)%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.log(s)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20window.Global%20%3D%20Global%3B%0A%20%20%20%20Session.main()%3B%0A%7D%3B%0ASession.main%20%3D%20function()%20%7B%0A%20%20%20%20todo%20%3D%20Settings.getInt(SETTINGS_KEY%2C%20todo)%3B%0A%20%20%20%20Global.logger.show()%3B%0A%20%20%20%20Global.escHandler.on()%3B%0A%20%20%20%20Global.cfgHandler.on()%3B%0A%20%20%20%20Root.removeOverlay()%3B%0A%20%20%20%20Global.root.determine()%3B%0A%20%20%20%20Global.actions%20%3D%20new%20Actions()%3B%0A%20%20%20%20Global.actions.kickOff()%3B%0A%7D%3B%0ASession.endSession%20%3D%20function()%20%7B%0A%20%20%20%20Global.logger.counts()%3B%0A%20%20%20%20if%20(Global.cfgHandler.shouldConfig())%20%7B%0A%20%20%20%20%20%20%20%20CfgWindow.showIt()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.ending%20%3D%20true%3B%0A%20%20%20%20Global.log(%22%5BPress%20%5Cu0027s%5Cu0027%20now%20for%20Settings%5D%22)%3B%0A%20%20%20%20window.scrollTo(0%2C%200)%0A%20%20%20%20window.setTimeout(Session.maybeEnd%2C%20END_DELAY%20*%201000)%3B%0A%7D%3B%0ASession.maybeEnd%20%3D%20function()%20%7B%0A%20%20%20%20delete%20Global.ending%3B%0A%20%20%20%20if%20(!Global.cfgHandler.shouldConfig())%20%7B%0A%20%20%20%20%20%20%20%20Session.trulyEnd()%3B%0A%20%20%20%20%7D%0A%7D%3B%0ASession.trulyEnd%20%3D%20function()%20%7B%0A%20%20%20%20if%20(Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20Global.cfg.hide()%3B%0A%20%20%20%20%20%20%20%20delete%20Global.cfg%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.escHandler.off()%3B%0A%20%20%20%20Global.cfgHandler.off()%3B%0A%20%20%20%20Global.logger.hide()%3B%0A%20%20%20%20delete%20window.Global%3B%0A%20%20%20%20Global%20%3D%20null%3B%0A%20%20%20%20save()%3B%0A%7D%3B%0ASession.init()%3B%0Avar%20XLib%20%3D%20function(args)%20%7B%0A%20%20%20%20args%20%3D%20args%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2F%20LOCAL%20CHANGE%20to%20prevent%20errors%20in%20Chrome%3A%0A%20%20%20%20%2F%2F%20-%20%20!t.isImmediatePropagationStopped()%0A%20%20%20%20%2F%2F%20%2B%20%20(!t.isImmediatePropagationStopped%20%7C%7C%20!t.isImmediatePropagationStopped())%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fgithub.e-sites.nl%2Fzeptobuilder%2F%0A%20%20%20%20%2F*!%20Zepto%201.2.0%20(generated%20with%20Zepto%20Builder)%20-%20zepto%20event%20-%20zeptojs.com%2Flicense%20*%2F%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%0A%20%20%20%20%2F%2F%20%20%20%20%20(c)%202010-2016%20Thomas%20Fuchs%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%20may%20be%20freely%20distributed%20under%20the%20MIT%20license.%0A%0A%20%20%20%20%2F*%20eslint-disable%20*%2F%0A%20%20%20%20var%20Zepto%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20undefined%2C%20key%2C%20%24%2C%20classList%2C%20emptyArray%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concat%20%3D%20emptyArray.concat%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%20%3D%20emptyArray.filter%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%20%3D%20emptyArray.slice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20document%20%3D%20window.document%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20elementDisplay%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20classCache%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cssNumber%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'column-count'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'columns'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'font-weight'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'line-height'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'opacity'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'z-index'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'zoom'%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fragmentRE%20%3D%20%2F%5E%5Cs*%3C(%5Cw%2B%7C!)%5B%5E%3E%5D*%3E%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20singleTagRE%20%3D%20%2F%5E%3C(%5Cw%2B)%5Cs*%5C%2F%3F%3E(%3F%3A%3C%5C%2F%5C1%3E%7C)%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tagExpanderRE%20%3D%20%2F%3C(%3F!area%7Cbr%7Ccol%7Cembed%7Chr%7Cimg%7Cinput%7Clink%7Cmeta%7Cparam)((%5B%5Cw%3A%5D%2B)%5B%5E%3E%5D*)%5C%2F%3E%2Fig%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rootNodeRE%20%3D%20%2F%5E(%3F%3Abody%7Chtml)%24%2Fi%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capitalRE%20%3D%20%2F(%5BA-Z%5D)%2Fg%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20special%20attributes%20that%20should%20be%20get%2Fset%20via%20method%20calls%0A%20%20%20%20%20%20%20%20%20%20%20%20methodAttributes%20%3D%20%5B'val'%2C%20'css'%2C%20'html'%2C%20'text'%2C%20'data'%2C%20'width'%2C%20'height'%2C%20'offset'%5D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20adjacencyOperators%20%3D%20%5B'after'%2C%20'prepend'%2C%20'before'%2C%20'append'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20table%20%3D%20document.createElement('table')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tableRow%20%3D%20document.createElement('tr')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20containers%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tr'%3A%20document.createElement('tbody')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tbody'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'thead'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tfoot'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'td'%3A%20tableRow%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'th'%3A%20tableRow%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'*'%3A%20document.createElement('div')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20readyRE%20%3D%20%2Fcomplete%7Cloaded%7Cinteractive%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20simpleSelectorRE%20%3D%20%2F%5E%5B%5Cw-%5D*%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20class2type%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toString%20%3D%20class2type.toString%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zepto%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20camelize%2C%20uniq%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tempParent%20%3D%20document.createElement('div')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20propMap%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tabindex'%3A%20'tabIndex'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'readonly'%3A%20'readOnly'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'for'%3A%20'htmlFor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'class'%3A%20'className'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'maxlength'%3A%20'maxLength'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cellspacing'%3A%20'cellSpacing'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cellpadding'%3A%20'cellPadding'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'rowspan'%3A%20'rowSpan'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'colspan'%3A%20'colSpan'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'usemap'%3A%20'useMap'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'frameborder'%3A%20'frameBorder'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'contenteditable'%3A%20'contentEditable'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isArray%20%3D%20Array.isArray%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20function(object)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20object%20instanceof%20Array%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20zepto.matches%20%3D%20function(element%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector%20%7C%7C%20!element%20%7C%7C%20element.nodeType%20!%3D%3D%201)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20matchesSelector%20%3D%20element.matches%20%7C%7C%20element.webkitMatchesSelector%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.mozMatchesSelector%20%7C%7C%20element.oMatchesSelector%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.matchesSelector%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(matchesSelector)%20return%20matchesSelector.call(element%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fall%20back%20to%20performing%20a%20selector%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20match%2C%20parent%20%3D%20element.parentNode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3D%20!parent%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(temp)(parent%20%3D%20tempParent).appendChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20%3D%20~zepto.qsa(parent%2C%20selector).indexOf(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20temp%20%26%26%20tempParent.removeChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20match%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20type(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20%3D%3D%20null%20%3F%20String(obj)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20class2type%5BtoString.call(obj)%5D%20%7C%7C%20%22object%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isFunction(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20type(value)%20%3D%3D%20%22function%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isWindow(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20!%3D%20null%20%26%26%20obj%20%3D%3D%20obj.window%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isDocument(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20!%3D%20null%20%26%26%20obj.nodeType%20%3D%3D%20obj.DOCUMENT_NODE%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isObject(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20type(obj)%20%3D%3D%20%22object%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isPlainObject(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20isObject(obj)%20%26%26%20!isWindow(obj)%20%26%26%20Object.getPrototypeOf(obj)%20%3D%3D%20Object.prototype%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20likeArray(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20length%20%3D%20!!obj%20%26%26%20'length'%20in%20obj%20%26%26%20obj.length%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20%24.type(obj)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'function'%20!%3D%20type%20%26%26%20!isWindow(obj)%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'array'%20%3D%3D%20type%20%7C%7C%20length%20%3D%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(typeof%20length%20%3D%3D%20'number'%20%26%26%20length%20%3E%200%20%26%26%20(length%20-%201)%20in%20obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20compact(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(array%2C%20function(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20item%20!%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20flatten(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20array.length%20%3E%200%20%3F%20%24.fn.concat.apply(%5B%5D%2C%20array)%20%3A%20array%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20camelize%20%3D%20function(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str.replace(%2F-%2B(.)%3F%2Fg%2C%20function(match%2C%20chr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20chr%20%3F%20chr.toUpperCase()%20%3A%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20dasherize(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str.replace(%2F%3A%3A%2Fg%2C%20'%2F')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F(%5BA-Z%5D%2B)(%5BA-Z%5D%5Ba-z%5D)%2Fg%2C%20'%241_%242')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F(%5Ba-z%5Cd%5D)(%5BA-Z%5D)%2Fg%2C%20'%241_%242')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F_%2Fg%2C%20'-')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.toLowerCase()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20uniq%20%3D%20function(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(array%2C%20function(item%2C%20idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20array.indexOf(item)%20%3D%3D%20idx%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20classRE(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20name%20in%20classCache%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classCache%5Bname%5D%20%3A%20(classCache%5Bname%5D%20%3D%20new%20RegExp('(%5E%7C%5C%5Cs)'%20%2B%20name%20%2B%20'(%5C%5Cs%7C%24)'))%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20maybeAddPx(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(typeof%20value%20%3D%3D%20%22number%22%20%26%26%20!cssNumber%5Bdasherize(name)%5D)%20%3F%20value%20%2B%20%22px%22%20%3A%20value%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20defaultDisplay(nodeName)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20element%2C%20display%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!elementDisplay%5BnodeName%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element%20%3D%20document.createElement(nodeName)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%20%3D%20getComputedStyle(element%2C%20'').getPropertyValue(%22display%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.parentNode.removeChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%20%3D%3D%20%22none%22%20%26%26%20(display%20%3D%20%22block%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elementDisplay%5BnodeName%5D%20%3D%20display%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20elementDisplay%5BnodeName%5D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20children(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'children'%20in%20element%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20slice.call(element.children)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.map(element.childNodes%2C%20function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.nodeType%20%3D%3D%201)%20return%20node%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20Z(dom%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20len%20%3D%20dom%20%3F%20dom.length%20%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%20this%5Bi%5D%20%3D%20dom%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.length%20%3D%20len%0A%20%20%20%20%20%20%20%20%20%20%20%20this.selector%20%3D%20selector%20%7C%7C%20''%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.fragment%60%20takes%20a%20html%20string%20and%20an%20optional%20tag%20name%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20generate%20DOM%20nodes%20from%20the%20given%20html%20string.%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20generated%20DOM%20nodes%20are%20returned%20as%20an%20array.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20function%20can%20be%20overridden%20in%20plugins%20for%20example%20to%20make%0A%20%20%20%20%20%20%20%20%2F%2F%20it%20compatible%20with%20browsers%20that%20don't%20support%20the%20DOM%20fully.%0A%20%20%20%20%20%20%20%20zepto.fragment%20%3D%20function(html%2C%20name%2C%20properties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%2C%20nodes%2C%20container%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20special%20case%20optimization%20for%20a%20single%20tag%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(singleTagRE.test(html))%20dom%20%3D%20%24(document.createElement(RegExp.%241))%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!dom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(html.replace)%20html%20%3D%20html.replace(tagExpanderRE%2C%20%22%3C%241%3E%3C%2F%242%3E%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20undefined)%20name%20%3D%20fragmentRE.test(html)%20%26%26%20RegExp.%241%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!(name%20in%20containers))%20name%20%3D%20'*'%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container%20%3D%20containers%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.innerHTML%20%3D%20''%20%2B%20html%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20%24.each(slice.call(container.childNodes)%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.removeChild(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isPlainObject(properties))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20%24(dom)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(properties%2C%20function(key%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(methodAttributes.indexOf(key)%20%3E%20-1)%20nodes%5Bkey%5D(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20nodes.attr(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20dom%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.Z%60%20swaps%20out%20the%20prototype%20of%20the%20given%20%60dom%60%20array%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20nodes%20with%20%60%24.fn%60%20and%20thus%20supplying%20all%20the%20Zepto%20functions%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20the%20array.%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.Z%20%3D%20function(dom%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20Z(dom%2C%20selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.isZ%60%20should%20return%20%60true%60%20if%20the%20given%20object%20is%20a%20Zepto%0A%20%20%20%20%20%20%20%20%2F%2F%20collection.%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.isZ%20%3D%20function(object)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20object%20instanceof%20zepto.Z%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.init%60%20is%20Zepto's%20counterpart%20to%20jQuery's%20%60%24.fn.init%60%20and%0A%20%20%20%20%20%20%20%20%2F%2F%20takes%20a%20CSS%20selector%20and%20an%20optional%20context%20(and%20handles%20various%0A%20%20%20%20%20%20%20%20%2F%2F%20special%20cases).%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.init%20%3D%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20nothing%20given%2C%20return%20an%20empty%20Zepto%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector)%20return%20zepto.Z()%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Optimize%20for%20string%20selectors%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20selector%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20selector%20%3D%20selector.trim()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20html%20fragment%2C%20create%20nodes%20from%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In%20both%20Chrome%2021%20and%20Firefox%2015%2C%20DOM%20error%2012%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20is%20thrown%20if%20the%20fragment%20doesn't%20begin%20with%20%3C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(selector%5B0%5D%20%3D%3D%20'%3C'%20%26%26%20fragmentRE.test(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20zepto.fragment(selector%2C%20RegExp.%241%2C%20context)%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20there's%20a%20context%2C%20create%20a%20collection%20on%20that%20context%20first%2C%20and%20select%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20nodes%20from%20there%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(context%20!%3D%3D%20undefined)%20return%20%24(context).find(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20CSS%20selector%2C%20use%20it%20to%20select%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20dom%20%3D%20zepto.qsa(document%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20function%20is%20given%2C%20call%20it%20when%20the%20DOM%20is%20ready%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(isFunction(selector))%20return%20%24(document).ready(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20Zepto%20collection%20is%20given%2C%20just%20return%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(zepto.isZ(selector))%20return%20selector%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20normalize%20array%20if%20an%20array%20of%20nodes%20is%20given%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isArray(selector))%20dom%20%3D%20compact(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wrap%20DOM%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(isObject(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20%5Bselector%5D%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20html%20fragment%2C%20create%20nodes%20from%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(fragmentRE.test(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20zepto.fragment(selector.trim()%2C%20RegExp.%241%2C%20context)%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20there's%20a%20context%2C%20create%20a%20collection%20on%20that%20context%20first%2C%20and%20select%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20nodes%20from%20there%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(context%20!%3D%3D%20undefined)%20return%20%24(context).find(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20And%20last%20but%20no%20least%2C%20if%20it's%20a%20CSS%20selector%2C%20use%20it%20to%20select%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20dom%20%3D%20zepto.qsa(document%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20create%20a%20new%20Zepto%20collection%20from%20the%20nodes%20found%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.Z(dom%2C%20selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24%60%20will%20be%20the%20base%20%60Zepto%60%20object.%20When%20calling%20this%0A%20%20%20%20%20%20%20%20%2F%2F%20function%20just%20call%20%60%24.zepto.init%2C%20which%20makes%20the%20implementation%0A%20%20%20%20%20%20%20%20%2F%2F%20details%20of%20selecting%20nodes%20and%20creating%20Zepto%20collections%0A%20%20%20%20%20%20%20%20%2F%2F%20patchable%20in%20plugins.%0A%20%20%20%20%20%20%20%20%24%20%3D%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.init(selector%2C%20context)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20extend(target%2C%20source%2C%20deep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(deep%20%26%26%20(isPlainObject(source%5Bkey%5D)%20%7C%7C%20isArray(source%5Bkey%5D)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isPlainObject(source%5Bkey%5D)%20%26%26%20!isPlainObject(target%5Bkey%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5Bkey%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isArray(source%5Bkey%5D)%20%26%26%20!isArray(target%5Bkey%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5Bkey%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20extend(target%5Bkey%5D%2C%20source%5Bkey%5D%2C%20deep)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(source%5Bkey%5D%20!%3D%3D%20undefined)%20target%5Bkey%5D%20%3D%20source%5Bkey%5D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Copy%20all%20but%20undefined%20properties%20from%20one%20or%20more%0A%20%20%20%20%20%20%20%20%2F%2F%20objects%20to%20the%20%60target%60%20object.%0A%20%20%20%20%20%20%20%20%24.extend%20%3D%20function(target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20deep%2C%20args%20%3D%20slice.call(arguments%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20target%20%3D%3D%20'boolean')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deep%20%3D%20target%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20args.shift()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20args.forEach(function(arg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20extend(target%2C%20arg%2C%20deep)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20target%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.qsa%60%20is%20Zepto's%20CSS%20selector%20implementation%20which%0A%20%20%20%20%20%20%20%20%2F%2F%20uses%20%60document.querySelectorAll%60%20and%20optimizes%20for%20some%20special%20cases%2C%20like%20%60%23id%60.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.qsa%20%3D%20function(element%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20found%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeID%20%3D%20selector%5B0%5D%20%3D%3D%20'%23'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeClass%20%3D%20!maybeID%20%26%26%20selector%5B0%5D%20%3D%3D%20'.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nameOnly%20%3D%20maybeID%20%7C%7C%20maybeClass%20%3F%20selector.slice(1)%20%3A%20selector%2C%20%2F%2F%20Ensure%20that%20a%201%20char%20tag%20name%20still%20gets%20checked%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isSimple%20%3D%20simpleSelectorRE.test(nameOnly)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(element.getElementById%20%26%26%20isSimple%20%26%26%20maybeID)%20%3F%20%2F%2F%20Safari%20DocumentFragment%20doesn't%20have%20getElementById%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20((found%20%3D%20element.getElementById(nameOnly))%20%3F%20%5Bfound%5D%20%3A%20%5B%5D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(element.nodeType%20!%3D%3D%201%20%26%26%20element.nodeType%20!%3D%3D%209%20%26%26%20element.nodeType%20!%3D%3D%2011)%20%3F%20%5B%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20slice.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isSimple%20%26%26%20!maybeID%20%26%26%20element.getElementsByClassName%20%3F%20%2F%2F%20DocumentFragment%20doesn't%20have%20getElementsByClassName%2FTagName%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeClass%20%3F%20element.getElementsByClassName(nameOnly)%20%3A%20%2F%2F%20If%20it's%20simple%2C%20it%20could%20be%20a%20class%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.getElementsByTagName(selector)%20%3A%20%2F%2F%20Or%20a%20tag%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.querySelectorAll(selector)%20%2F%2F%20Or%20it's%20not%20simple%2C%20and%20we%20need%20to%20query%20all%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20filtered(nodes%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20selector%20%3D%3D%20null%20%3F%20%24(nodes)%20%3A%20%24(nodes).filter(selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.contains%20%3D%20document.documentElement.contains%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20function(parent%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20parent%20!%3D%3D%20node%20%26%26%20parent.contains(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20function(parent%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%26%26%20(node%20%3D%20node.parentNode))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node%20%3D%3D%3D%20parent)%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20funcArg(context%2C%20arg%2C%20idx%2C%20payload)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20isFunction(arg)%20%3F%20arg.call(context%2C%20idx%2C%20payload)%20%3A%20arg%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20setAttribute(node%2C%20name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20null%20%3F%20node.removeAttribute(name)%20%3A%20node.setAttribute(name%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20access%20className%20property%20while%20respecting%20SVGAnimatedString%0A%20%20%20%20%20%20%20%20function%20className(node%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20klass%20%3D%20node.className%20%7C%7C%20''%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20klass%20%26%26%20klass.baseVal%20!%3D%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20svg%20%3F%20klass.baseVal%20%3A%20klass%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3F%20(klass.baseVal%20%3D%20value)%20%3A%20(node.className%20%3D%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%22true%22%20%20%3D%3E%20true%0A%20%20%20%20%20%20%20%20%2F%2F%20%22false%22%20%3D%3E%20false%0A%20%20%20%20%20%20%20%20%2F%2F%20%22null%22%20%20%3D%3E%20null%0A%20%20%20%20%20%20%20%20%2F%2F%20%2242%22%20%20%20%20%3D%3E%2042%0A%20%20%20%20%20%20%20%20%2F%2F%20%2242.5%22%20%20%3D%3E%2042.5%0A%20%20%20%20%20%20%20%20%2F%2F%20%2208%22%20%20%20%20%3D%3E%20%2208%22%0A%20%20%20%20%20%20%20%20%2F%2F%20JSON%20%20%20%20%3D%3E%20parse%20if%20valid%0A%20%20%20%20%20%20%20%20%2F%2F%20String%20%20%3D%3E%20self%0A%20%20%20%20%20%20%20%20function%20deserializeValue(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20%22true%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(value%20%3D%3D%20%22false%22%20%3F%20false%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20%22null%22%20%3F%20null%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Bvalue%20%2B%20%22%22%20%3D%3D%20value%20%3F%20%2Bvalue%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%5E%5B%5C%5B%5C%7B%5D%2F.test(value)%20%3F%20%24.parseJSON(value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.type%20%3D%20type%0A%20%20%20%20%20%20%20%20%24.isFunction%20%3D%20isFunction%0A%20%20%20%20%20%20%20%20%24.isWindow%20%3D%20isWindow%0A%20%20%20%20%20%20%20%20%24.isArray%20%3D%20isArray%0A%20%20%20%20%20%20%20%20%24.isPlainObject%20%3D%20isPlainObject%0A%0A%20%20%20%20%20%20%20%20%24.isEmptyObject%20%3D%20function(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(name%20in%20obj)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.isNumeric%20%3D%20function(val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20num%20%3D%20Number(val)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20typeof%20val%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20val%20!%3D%20null%20%26%26%20type%20!%3D%20'boolean'%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(type%20!%3D%20'string'%20%7C%7C%20val.length)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20!isNaN(num)%20%26%26%20isFinite(num)%20%7C%7C%20false%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.inArray%20%3D%20function(elem%2C%20array%2C%20i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.indexOf.call(array%2C%20elem%2C%20i)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.camelCase%20%3D%20camelize%0A%20%20%20%20%20%20%20%20%24.trim%20%3D%20function(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%20%3D%3D%20null%20%3F%20%22%22%20%3A%20String.prototype.trim.call(str)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20plugin%20compatibility%0A%20%20%20%20%20%20%20%20%24.uuid%20%3D%200%0A%20%20%20%20%20%20%20%20%24.support%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%24.expr%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%24.noop%20%3D%20function()%20%7B%7D%0A%0A%20%20%20%20%20%20%20%20%24.map%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20value%2C%20values%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%2C%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(likeArray(elements))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20elements.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20callback(elements%5Bi%5D%2C%20i)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20!%3D%20null)%20values.push(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20elements)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20callback(elements%5Bkey%5D%2C%20key)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20!%3D%20null)%20values.push(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flatten(values)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.each%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(likeArray(elements))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20elements.length%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback.call(elements%5Bi%5D%2C%20i%2C%20elements%5Bi%5D)%20%3D%3D%3D%20false)%20return%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20elements)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback.call(elements%5Bkey%5D%2C%20key%2C%20elements%5Bkey%5D)%20%3D%3D%3D%20false)%20return%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20elements%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.grep%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(elements%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(window.JSON)%20%24.parseJSON%20%3D%20JSON.parse%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Populate%20the%20class2type%20map%0A%20%20%20%20%20%20%20%20%24.each(%22Boolean%20Number%20String%20Function%20Array%20Date%20RegExp%20Object%20Error%22.split(%22%20%22)%2C%20function(i%2C%20name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20class2type%5B%22%5Bobject%20%22%20%2B%20name%20%2B%20%22%5D%22%5D%20%3D%20name.toLowerCase()%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20methods%20that%20will%20be%20available%20on%20all%0A%20%20%20%20%20%20%20%20%2F%2F%20Zepto%20collections%0A%20%20%20%20%20%20%20%20%24.fn%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20constructor%3A%20zepto.Z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Because%20a%20collection%20acts%20like%20an%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20copy%20over%20these%20useful%20array%20functions.%0A%20%20%20%20%20%20%20%20%20%20%20%20forEach%3A%20emptyArray.forEach%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20reduce%3A%20emptyArray.reduce%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20push%3A%20emptyArray.push%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sort%3A%20emptyArray.sort%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20splice%3A%20emptyArray.splice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20indexOf%3A%20emptyArray.indexOf%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concat%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20value%2C%20args%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20arguments%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%5Bi%5D%20%3D%20zepto.isZ(value)%20%3F%20value.toArray()%20%3A%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20concat.apply(zepto.isZ(this)%20%3F%20this.toArray()%20%3A%20this%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60map%60%20and%20%60slice%60%20in%20the%20jQuery%20API%20work%20differently%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20from%20their%20array%20counterparts%0A%20%20%20%20%20%20%20%20%20%20%20%20map%3A%20function(fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(%24.map(this%2C%20function(el%2C%20i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn.call(el%2C%20i%2C%20el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(slice.apply(this%2C%20arguments))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20ready%3A%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20check%20if%20document.body%20exists%20for%20IE%20as%20that%20browser%20reports%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20document%20ready%20when%20it%20hasn't%20yet%20created%20the%20body%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(readyRE.test(document.readyState)%20%26%26%20document.body)%20callback(%24)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20document.addEventListener('DOMContentLoaded'%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(%24)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20idx%20%3D%3D%3D%20undefined%20%3F%20slice.call(this)%20%3A%20this%5Bidx%20%3E%3D%200%20%3F%20idx%20%3A%20idx%20%2B%20this.length%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toArray%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.get()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.length%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20remove%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.parentNode%20!%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.parentNode.removeChild(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20each%3A%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emptyArray.every.call(this%2C%20function(el%2C%20idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback.call(el%2C%20idx%2C%20el)%20!%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(selector))%20return%20this.not(this.not(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(filter.call(this%2C%20function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.matches(element%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20add%3A%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(uniq(this.concat(%24(selector%2C%20context))))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20is%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.length%20%3E%200%20%26%26%20zepto.matches(this%5B0%5D%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20not%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nodes%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(selector)%20%26%26%20selector.call%20!%3D%3D%20undefined)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector.call(this%2C%20idx))%20nodes.push(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20excludes%20%3D%20typeof%20selector%20%3D%3D%20'string'%20%3F%20this.filter(selector)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(likeArray(selector)%20%26%26%20isFunction(selector.item))%20%3F%20slice.call(selector)%20%3A%20%24(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.forEach(function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(excludes.indexOf(el)%20%3C%200)%20nodes.push(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(nodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20has%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20isObject(selector)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.contains(this%2C%20selector)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).find(selector).size()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20eq%3A%20function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20idx%20%3D%3D%3D%20-1%20%3F%20this.slice(idx)%20%3A%20this.slice(idx%2C%20%2Bidx%20%2B%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20first%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%20%26%26%20!isObject(el)%20%3F%20el%20%3A%20%24(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20last%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20this%5Bthis.length%20-%201%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%20%26%26%20!isObject(el)%20%3F%20el%20%3A%20%24(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20find%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%2C%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector)%20result%20%3D%20%24()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20selector%20%3D%3D%20'object')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20%24(selector).filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20node%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.some.call(%24this%2C%20function(parent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.contains(parent%2C%20node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(this.length%20%3D%3D%201)%20result%20%3D%20%24(zepto.qsa(this%5B0%5D%2C%20selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20result%20%3D%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.qsa(this%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20closest%3A%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nodes%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collection%20%3D%20typeof%20selector%20%3D%3D%20'object'%20%26%26%20%24(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(_%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%26%26%20!(collection%20%3F%20collection.indexOf(node)%20%3E%3D%200%20%3A%20zepto.matches(node%2C%20selector)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20node%20!%3D%3D%20context%20%26%26%20!isDocument(node)%20%26%26%20node.parentNode%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node%20%26%26%20nodes.indexOf(node)%20%3C%200)%20nodes.push(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(nodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parents%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20ancestors%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(nodes.length%20%3E%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20%24.map(nodes%2C%20function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20((node%20%3D%20node.parentNode)%20%26%26%20!isDocument(node)%20%26%26%20ancestors.indexOf(node)%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ancestors.push(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20node%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(ancestors%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(uniq(this.pluck('parentNode'))%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20children%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20children(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20contents%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.contentDocument%20%7C%7C%20slice.call(this.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20siblings%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(this.map(function(i%2C%20el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(children(el.parentNode)%2C%20function(child)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20child%20!%3D%3D%20el%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20empty%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.innerHTML%20%3D%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60pluck%60%20is%20borrowed%20from%20Prototype.js%0A%20%20%20%20%20%20%20%20%20%20%20%20pluck%3A%20function(property)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.map(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%5Bproperty%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20show%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.display%20%3D%3D%20%22none%22%20%26%26%20(this.style.display%20%3D%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(getComputedStyle(this%2C%20'').getPropertyValue(%22display%22)%20%3D%3D%20%22none%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.display%20%3D%20defaultDisplay(this.nodeName)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20replaceWith%3A%20function(newContent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.before(newContent).remove()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrap%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20func%20%3D%20isFunction(structure)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this%5B0%5D%20%26%26%20!func)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%20%3D%20%24(structure).get(0)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clone%20%3D%20dom.parentNode%20%7C%7C%20this.length%20%3E%201%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).wrapAll(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func%20%3F%20structure.call(this%2C%20index)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clone%20%3F%20dom.cloneNode(true)%20%3A%20dom%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapAll%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this%5B0%5D).before(structure%20%3D%20%24(structure))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20children%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20drill%20down%20to%20the%20inmost%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20((children%20%3D%20structure.children()).length)%20structure%20%3D%20children.first()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(structure).append(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapInner%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20func%20%3D%20isFunction(structure)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20self%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contents%20%3D%20self.contents()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20func%20%3F%20structure.call(this%2C%20index)%20%3A%20structure%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contents.length%20%3F%20contents.wrapAll(dom)%20%3A%20self.append(dom)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20unwrap%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.parent().each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).replaceWith(%24(this).children())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clone%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.cloneNode(true)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hide%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.css(%22display%22%2C%20%22none%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toggle%3A%20function(setting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(setting%20%3D%3D%3D%20undefined%20%3F%20el.css(%22display%22)%20%3D%3D%20%22none%22%20%3A%20setting)%20%3F%20el.show()%3A%20el.hide()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20prev%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(this.pluck('previousElementSibling')).filter(selector%20%7C%7C%20'*')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20next%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(this.pluck('nextElementSibling')).filter(selector%20%7C%7C%20'*')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20html%3A%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%20in%20arguments%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20originHtml%20%3D%20this.innerHTML%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).empty().append(funcArg(this%2C%20html%2C%20idx%2C%20originHtml))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%3F%20this%5B0%5D.innerHTML%20%3A%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20function(text)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%20in%20arguments%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newText%20%3D%20funcArg(this%2C%20text%2C%20idx%2C%20this.textContent)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.textContent%20%3D%20newText%20%3D%3D%20null%20%3F%20''%20%3A%20''%20%2B%20newText%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%3F%20this.pluck('textContent').join(%22%22)%20%3A%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attr%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(typeof%20name%20%3D%3D%20'string'%20%26%26%20!(1%20in%20arguments))%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%26%26%20this%5B0%5D.nodeType%20%3D%3D%201%20%26%26%20(result%20%3D%20this%5B0%5D.getAttribute(name))%20!%3D%20null%20%3F%20result%20%3A%20undefined)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.nodeType%20!%3D%3D%201)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isObject(name))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20name)%20setAttribute(this%2C%20key%2C%20name%5Bkey%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20setAttribute(this%2C%20name%2C%20funcArg(this%2C%20value%2C%20idx%2C%20this.getAttribute(name)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeAttr%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.nodeType%20%3D%3D%3D%201%20%26%26%20name.split('%20').forEach(function(attribute)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setAttribute(this%2C%20attribute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20prop%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20propMap%5Bname%5D%20%7C%7C%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(1%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5Bname%5D%20%3D%20funcArg(this%2C%20value%2C%20idx%2C%20this%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(this%5B0%5D%20%26%26%20this%5B0%5D%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeProp%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20propMap%5Bname%5D%20%7C%7C%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20this%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20attrName%20%3D%20'data-'%20%2B%20name.replace(capitalRE%2C%20'-%241').toLowerCase()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20%3D%20(1%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.attr(attrName%2C%20value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.attr(attrName)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20data%20!%3D%3D%20null%20%3F%20deserializeValue(data)%20%3A%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(0%20in%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%20value%20%3D%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.value%20%3D%20funcArg(this%2C%20value%2C%20idx%2C%20this.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%5B0%5D%20%26%26%20(this%5B0%5D.multiple%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this%5B0%5D).find('option').filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.selected%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D).pluck('value')%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5B0%5D.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A%20function(coordinates)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(coordinates)%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20coords%20%3D%20funcArg(this%2C%20coordinates%2C%20index%2C%20%24this.offset())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset%20%3D%20%24this.offsetParent().offset()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20props%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20coords.top%20-%20parentOffset.top%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20coords.left%20-%20parentOffset.left%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24this.css('position')%20%3D%3D%20'static')%20props%5B'position'%5D%20%3D%20'relative'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.css(props)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(document.documentElement%20!%3D%3D%20this%5B0%5D%20%26%26%20!%24.contains(document.documentElement%2C%20this%5B0%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20obj%20%3D%20this%5B0%5D.getBoundingClientRect()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20obj.left%20%2B%20window.pageXOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20obj.top%20%2B%20window.pageYOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20Math.round(obj.width)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20Math.round(obj.height)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20css%3A%20function(property%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20element%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20property%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!element)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.style%5Bcamelize(property)%5D%20%7C%7C%20getComputedStyle(element%2C%20'').getPropertyValue(property)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(isArray(property))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!element)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20props%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20computedStyle%20%3D%20getComputedStyle(element%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(property%2C%20function(_%2C%20prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20props%5Bprop%5D%20%3D%20(element.style%5Bcamelize(prop)%5D%20%7C%7C%20computedStyle.getPropertyValue(prop))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20props%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20css%20%3D%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type(property)%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!value%20%26%26%20value%20!%3D%3D%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.removeProperty(dasherize(property))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20css%20%3D%20dasherize(property)%20%2B%20%22%3A%22%20%2B%20maybeAddPx(property%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20property)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!property%5Bkey%5D%20%26%26%20property%5Bkey%5D%20!%3D%3D%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.removeProperty(dasherize(key))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20css%20%2B%3D%20dasherize(key)%20%2B%20'%3A'%20%2B%20maybeAddPx(key%2C%20property%5Bkey%5D)%20%2B%20'%3B'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.cssText%20%2B%3D%20'%3B'%20%2B%20css%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20index%3A%20function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element%20%3F%20this.indexOf(%24(element)%5B0%5D)%20%3A%20this.parent().children().indexOf(this%5B0%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hasClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.some.call(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.test(className(el))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20classRE(name))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20addClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!('className'%20in%20this))%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cls%20%3D%20className(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newName%20%3D%20funcArg(this%2C%20name%2C%20idx%2C%20cls)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newName.split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!%24(this).hasClass(klass))%20classList.push(klass)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList.length%20%26%26%20className(this%2C%20cls%20%2B%20(cls%20%3F%20%22%20%22%20%3A%20%22%22)%20%2B%20classList.join(%22%20%22))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!('className'%20in%20this))%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20undefined)%20return%20className(this%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20className(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcArg(this%2C%20name%2C%20idx%2C%20classList).split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20classList.replace(classRE(klass)%2C%20%22%20%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className(this%2C%20classList.trim())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toggleClass%3A%20function(name%2C%20when)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20names%20%3D%20funcArg(this%2C%20name%2C%20idx%2C%20className(this))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20names.split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(when%20%3D%3D%3D%20undefined%20%3F%20!%24this.hasClass(klass)%20%3A%20when)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.addClass(klass)%3A%20%24this.removeClass(klass)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scrollTop%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20hasScrollTop%20%3D%20'scrollTop'%20in%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20hasScrollTop%20%3F%20this%5B0%5D.scrollTop%20%3A%20this%5B0%5D.pageYOffset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(hasScrollTop%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTop%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTo(this.scrollX%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scrollLeft%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20hasScrollLeft%20%3D%20'scrollLeft'%20in%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20hasScrollLeft%20%3F%20this%5B0%5D.scrollLeft%20%3A%20this%5B0%5D.pageXOffset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(hasScrollLeft%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollLeft%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTo(value%2C%20this.scrollY)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20elem%20%3D%20this%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20*real*%20offsetParent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offsetParent%20%3D%20this.offsetParent()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20correct%20offsets%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset%20%3D%20this.offset()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset%20%3D%20rootNodeRE.test(offsetParent%5B0%5D.nodeName)%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20offsetParent.offset()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Subtract%20element%20margins%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20note%3A%20when%20an%20element%20has%20margin%3A%20auto%20the%20offsetLeft%20and%20marginLeft%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20are%20the%20same%20in%20Safari%20causing%20offset.left%20to%20incorrectly%20be%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset.top%20-%3D%20parseFloat(%24(elem).css('margin-top'))%20%7C%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset.left%20-%3D%20parseFloat(%24(elem).css('margin-left'))%20%7C%7C%200%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20offsetParent%20borders%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset.top%20%2B%3D%20parseFloat(%24(offsetParent%5B0%5D).css('border-top-width'))%20%7C%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset.left%20%2B%3D%20parseFloat(%24(offsetParent%5B0%5D).css('border-left-width'))%20%7C%7C%200%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Subtract%20the%20two%20offsets%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20offset.top%20-%20parentOffset.top%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20offset.left%20-%20parentOffset.left%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetParent%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20parent%20%3D%20this.offsetParent%20%7C%7C%20document.body%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(parent%20%26%26%20!rootNodeRE.test(parent.nodeName)%20%26%26%20%24(parent).css(%22position%22)%20%3D%3D%20%22static%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20parent.offsetParent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20parent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20for%20now%0A%20%20%20%20%20%20%20%20%24.fn.detach%20%3D%20%24.fn.remove%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20the%20%60width%60%20and%20%60height%60%20functions%0A%20%20%20%20%20%20%20%20%3B%0A%20%20%20%20%20%20%20%20%5B'width'%2C%20'height'%5D.forEach(function(dimension)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dimensionProperty%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dimension.replace(%2F.%2F%2C%20function(m)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m%5B0%5D.toUpperCase()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Bdimension%5D%20%3D%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20offset%2C%20el%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20isWindow(el)%20%3F%20el%5B'inner'%20%2B%20dimensionProperty%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isDocument(el)%20%3F%20el.documentElement%5B'scroll'%20%2B%20dimensionProperty%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(offset%20%3D%20this.offset())%20%26%26%20offset%5Bdimension%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20%24(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.css(dimension%2C%20funcArg(this%2C%20value%2C%20idx%2C%20el%5Bdimension%5D()))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20function%20traverseNode(node%2C%20fun)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fun(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%2C%20len%20%3D%20node.childNodes.length%3B%20i%20%3C%20len%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20traverseNode(node.childNodes%5Bi%5D%2C%20fun)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20the%20%60after%60%2C%20%60prepend%60%2C%20%60before%60%2C%20%60append%60%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%60insertAfter%60%2C%20%60insertBefore%60%2C%20%60appendTo%60%2C%20and%20%60prependTo%60%20methods.%0A%20%20%20%20%20%20%20%20adjacencyOperators.forEach(function(operator%2C%20operatorIndex)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20inside%20%3D%20operatorIndex%20%25%202%20%2F%2F%3D%3E%20prepend%2C%20append%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Boperator%5D%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20arguments%20can%20be%20nodes%2C%20arrays%20of%20nodes%2C%20Zepto%20objects%20and%20HTML%20strings%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20argType%2C%20nodes%20%3D%20%24.map(arguments%2C%20function(arg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20arr%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20argType%20%3D%20type(arg)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(argType%20%3D%3D%20%22array%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arg.forEach(function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(el.nodeType%20!%3D%3D%20undefined)%20return%20arr.push(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(%24.zepto.isZ(el))%20return%20arr%20%3D%20arr.concat(el.get())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arr%20%3D%20arr.concat(zepto.fragment(el))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20arr%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20argType%20%3D%3D%20%22object%22%20%7C%7C%20arg%20%3D%3D%20null%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arg%20%3A%20zepto.fragment(arg)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%2C%20copyByClone%20%3D%20this.length%20%3E%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(nodes.length%20%3C%201)%20return%20this%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(_%2C%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20inside%20%3F%20target%20%3A%20target.parentNode%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20convert%20all%20methods%20to%20a%20%22before%22%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20operatorIndex%20%3D%3D%200%20%3F%20target.nextSibling%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20operatorIndex%20%3D%3D%201%20%3F%20target.firstChild%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20operatorIndex%20%3D%3D%202%20%3F%20target%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20null%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20parentInDocument%20%3D%20%24.contains(document.documentElement%2C%20parent)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes.forEach(function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(copyByClone)%20node%20%3D%20node.cloneNode(true)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(!parent)%20return%20%24(node).remove()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent.insertBefore(node%2C%20target)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(parentInDocument)%20traverseNode(node%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(el.nodeName%20!%3D%20null%20%26%26%20el.nodeName.toUpperCase()%20%3D%3D%3D%20'SCRIPT'%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!el.type%20%7C%7C%20el.type%20%3D%3D%3D%20'text%2Fjavascript')%20%26%26%20!el.src)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20target%20%3D%20el.ownerDocument%20%3F%20el.ownerDocument.defaultView%20%3A%20window%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5B'eval'%5D.call(target%2C%20el.innerHTML)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20after%20%20%20%20%3D%3E%20insertAfter%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20prepend%20%20%3D%3E%20prependTo%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20before%20%20%20%3D%3E%20insertBefore%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20append%20%20%20%3D%3E%20appendTo%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Binside%20%3F%20operator%20%2B%20'To'%20%3A%20'insert'%20%2B%20(operatorIndex%20%3F%20'Before'%20%3A%20'After')%5D%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(html)%5Boperator%5D(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20zepto.Z.prototype%20%3D%20Z.prototype%20%3D%20%24.fn%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Export%20internal%20API%20functions%20in%20the%20%60%24.zepto%60%20namespace%0A%20%20%20%20%20%20%20%20zepto.uniq%20%3D%20uniq%0A%20%20%20%20%20%20%20%20zepto.deserializeValue%20%3D%20deserializeValue%0A%20%20%20%20%20%20%20%20%24.zepto%20%3D%20zepto%0A%0A%20%20%20%20%20%20%20%20return%20%24%0A%20%20%20%20%7D)()%0A%0A%20%20%20%20%2F%2F%20If%20%60%24%60%20is%20not%20yet%20defined%2C%20point%20it%20to%20%60Zepto%60%0A%20%20%20%20window.Zepto%20%3D%20Zepto%0A%20%20%20%20window.%24%20%3D%3D%3D%20undefined%20%26%26%20(window.%24%20%3D%20Zepto)%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%0A%20%20%20%20%2F%2F%20%20%20%20%20(c)%202010-2016%20Thomas%20Fuchs%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%20may%20be%20freely%20distributed%20under%20the%20MIT%20license.%0A%0A%20%20%20%20%3B%0A%20%20%20%20(function(%24)%20%7B%0A%20%20%20%20%20%20%20%20var%20_zid%20%3D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%20%3D%20Array.prototype.slice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isFunction%20%3D%20%24.isFunction%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isString%20%3D%20function(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20obj%20%3D%3D%20'string'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20handlers%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20specialEvents%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20focusinSupported%20%3D%20'onfocusin'%20in%20window%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20focus%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20focus%3A%20'focusin'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blur%3A%20'focusout'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hover%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mouseenter%3A%20'mouseover'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mouseleave%3A%20'mouseout'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20specialEvents.click%20%3D%20specialEvents.mousedown%20%3D%20specialEvents.mouseup%20%3D%20specialEvents.mousemove%20%3D%20'MouseEvents'%0A%0A%20%20%20%20%20%20%20%20function%20zid(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20element._zid%20%7C%7C%20(element._zid%20%3D%20_zid%2B%2B)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20findHandlers(element%2C%20event%2C%20fn%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%20%3D%20parse(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event.ns)%20var%20matcher%20%3D%20matcherFor(event.ns)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(handlers%5Bzid(element)%5D%20%7C%7C%20%5B%5D).filter(function(handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20handler%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!event.e%20%7C%7C%20handler.e%20%3D%3D%20event.e)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!event.ns%20%7C%7C%20matcher.test(handler.ns))%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!fn%20%7C%7C%20zid(handler.fn)%20%3D%3D%3D%20zid(fn))%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!selector%20%7C%7C%20handler.sel%20%3D%3D%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20parse(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20parts%20%3D%20(''%20%2B%20event).split('.')%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%3A%20parts%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ns%3A%20parts.slice(1).sort().join('%20')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20matcherFor(ns)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20RegExp('(%3F%3A%5E%7C%20)'%20%2B%20ns.replace('%20'%2C%20'%20.*%20%3F')%20%2B%20'(%3F%3A%20%7C%24)')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20eventCapture(handler%2C%20captureSetting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handler.del%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!focusinSupported%20%26%26%20(handler.e%20in%20focus))%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20!!captureSetting%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20realEvent(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20hover%5Btype%5D%20%7C%7C%20(focusinSupported%20%26%26%20focus%5Btype%5D)%20%7C%7C%20type%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20add(element%2C%20events%2C%20fn%2C%20data%2C%20selector%2C%20delegator%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20zid(element)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set%20%3D%20(handlers%5Bid%5D%20%7C%7C%20(handlers%5Bid%5D%20%3D%20%5B%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20events.split(%2F%5Cs%2F).forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%3D%3D%20'ready')%20return%20%24(document).ready(fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20handler%20%3D%20parse(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.fn%20%3D%20fn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.sel%20%3D%20selector%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20emulate%20mouseenter%2C%20mouseleave%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(handler.e%20in%20hover)%20fn%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20related%20%3D%20e.relatedTarget%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!related%20%7C%7C%20(related%20!%3D%3D%20this%20%26%26%20!%24.contains(this%2C%20related)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20handler.fn.apply(this%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.del%20%3D%20delegator%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20delegator%20%7C%7C%20fn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.proxy%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20compatible(e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.isImmediatePropagationStopped%20%26%26%20e.isImmediatePropagationStopped())%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.data%20%3D%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%20callback.apply(element%2C%20e._args%20%3D%3D%20undefined%20%3F%20%5Be%5D%20%3A%20%5Be%5D.concat(e._args))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(result%20%3D%3D%3D%20false)%20e.preventDefault()%2C%20e.stopPropagation()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.i%20%3D%20set.length%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set.push(handler)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20('addEventListener'%20in%20element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.addEventListener(realEvent(handler.e)%2C%20handler.proxy%2C%20eventCapture(handler%2C%20capture))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20remove(element%2C%20events%2C%20fn%2C%20selector%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20zid(element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20(events%20%7C%7C%20'').split(%2F%5Cs%2F).forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20findHandlers(element%2C%20event%2C%20fn%2C%20selector).forEach(function(handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20handlers%5Bid%5D%5Bhandler.i%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20('removeEventListener'%20in%20element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.removeEventListener(realEvent(handler.e)%2C%20handler.proxy%2C%20eventCapture(handler%2C%20capture))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.event%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20add%3A%20add%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20remove%3A%20remove%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.proxy%20%3D%20function(fn%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20(2%20in%20arguments)%20%26%26%20slice.call(arguments%2C%202)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(fn))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20proxyFn%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn.apply(context%2C%20args%20%3F%20args.concat(slice.call(arguments))%20%3A%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxyFn._zid%20%3D%20zid(fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20proxyFn%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(isString(context))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.unshift(fn%5Bcontext%5D%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.proxy.apply(null%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.proxy(fn%5Bcontext%5D%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20TypeError(%22expected%20function%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.bind%20%3D%20function(event%2C%20data%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20data%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.unbind%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.off(event%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.one%20%3D%20function(event%2C%20selector%2C%20data%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20selector%2C%20data%2C%20callback%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20returnTrue%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20returnFalse%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ignoreProperties%20%3D%20%2F%5E(%5BA-Z%5D%7CreturnValue%24%7Clayer%5BXY%5D%24%7CwebkitMovement%5BXY%5D%24)%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20eventMethods%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20preventDefault%3A%20'isDefaultPrevented'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopImmediatePropagation%3A%20'isImmediatePropagationStopped'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopPropagation%3A%20'isPropagationStopped'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20compatible(event%2C%20source)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(source%20%7C%7C%20!event.isDefaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%20%7C%7C%20(source%20%3D%20event)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(eventMethods%2C%20function(name%2C%20predicate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sourceMethod%20%3D%20source%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%5Bname%5D%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5Bpredicate%5D%20%3D%20returnTrue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sourceMethod%20%26%26%20sourceMethod.apply(source%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%5Bpredicate%5D%20%3D%20returnFalse%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event.timeStamp%20%7C%7C%20(event.timeStamp%20%3D%20Date.now())%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(source.defaultPrevented%20!%3D%3D%20undefined%20%3F%20source.defaultPrevented%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'returnValue'%20in%20source%20%3F%20source.returnValue%20%3D%3D%3D%20false%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source.getPreventDefault%20%26%26%20source.getPreventDefault())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event.isDefaultPrevented%20%3D%20returnTrue%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20event%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20createProxy(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%2C%20proxy%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20originalEvent%3A%20event%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!ignoreProperties.test(key)%20%26%26%20event%5Bkey%5D%20!%3D%3D%20undefined)%20proxy%5Bkey%5D%20%3D%20event%5Bkey%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20compatible(proxy%2C%20event)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.delegate%20%3D%20function(selector%2C%20event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20selector%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.undelegate%20%3D%20function(selector%2C%20event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.off(event%2C%20selector%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.live%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(document.body).delegate(this.selector%2C%20event%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.die%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(document.body).undelegate(this.selector%2C%20event%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.on%20%3D%20function(event%2C%20selector%2C%20data%2C%20callback%2C%20one)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20autoRemove%2C%20delegator%2C%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%26%26%20!isString(event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(event%2C%20function(type%2C%20fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.on(type%2C%20selector%2C%20data%2C%20fn%2C%20one)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(selector)%20%26%26%20!isFunction(callback)%20%26%26%20callback%20!%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20data%2C%20data%20%3D%20selector%2C%20selector%20%3D%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20undefined%20%7C%7C%20data%20%3D%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20data%2C%20data%20%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20false)%20callback%20%3D%20returnFalse%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this.each(function(_%2C%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(one)%20autoRemove%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(element%2C%20e.type%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback.apply(this%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(selector)%20delegator%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20evt%2C%20match%20%3D%20%24(e.target).closest(selector%2C%20element).get(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(match%20%26%26%20match%20!%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20evt%20%3D%20%24.extend(createProxy(e)%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentTarget%3A%20match%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20liveFired%3A%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(autoRemove%20%7C%7C%20callback).apply(match%2C%20%5Bevt%5D.concat(slice.call(arguments%2C%201)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20add(element%2C%20event%2C%20callback%2C%20data%2C%20selector%2C%20delegator%20%7C%7C%20autoRemove)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.off%20%3D%20function(event%2C%20selector%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%26%26%20!isString(event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(event%2C%20function(type%2C%20fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.off(type%2C%20selector%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(selector)%20%26%26%20!isFunction(callback)%20%26%26%20callback%20!%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20selector%2C%20selector%20%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20false)%20callback%20%3D%20returnFalse%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(this%2C%20event%2C%20callback%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.trigger%20%3D%20function(event%2C%20args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%20%3D%20(isString(event)%20%7C%7C%20%24.isPlainObject(event))%20%3F%20%24.Event(event)%20%3A%20compatible(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20event._args%20%3D%20args%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20handle%20focus()%2C%20blur()%20by%20calling%20them%20directly%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(event.type%20in%20focus%20%26%26%20typeof%20this%5Bevent.type%5D%20%3D%3D%20%22function%22)%20this%5Bevent.type%5D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20items%20in%20the%20collection%20might%20not%20be%20DOM%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20('dispatchEvent'%20in%20this)%20this.dispatchEvent(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%24(this).triggerHandler(event%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20triggers%20event%20handlers%20on%20current%20element%20just%20as%20if%20an%20event%20occurred%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20doesn't%20trigger%20an%20actual%20event%2C%20doesn't%20bubble%0A%20%20%20%20%20%20%20%20%24.fn.triggerHandler%20%3D%20function(event%2C%20args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20e%2C%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(i%2C%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20createProxy(isString(event)%20%3F%20%24.Event(event)%20%3A%20event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e._args%20%3D%20args%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.target%20%3D%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(findHandlers(element%2C%20event.type%20%7C%7C%20event)%2C%20function(i%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20handler.proxy(e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.isImmediatePropagationStopped%20%26%26%20e.isImmediatePropagationStopped())%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20shortcut%20methods%20for%20%60.bind(event%2C%20fn)%60%20for%20each%20event%20type%0A%20%20%20%20%20%20%20%20%3B%0A%20%20%20%20%20%20%20%20('focusin%20focusout%20focus%20blur%20load%20resize%20scroll%20unload%20click%20dblclick%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20'mousedown%20mouseup%20mousemove%20mouseover%20mouseout%20mouseenter%20mouseleave%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20'change%20select%20keydown%20keypress%20keyup%20error').split('%20').forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Bevent%5D%20%3D%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(0%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bind(event%2C%20callback)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.trigger(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%24.Event%20%3D%20function(type%2C%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(type))%20props%20%3D%20type%2C%20type%20%3D%20props.type%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20event%20%3D%20document.createEvent(specialEvents%5Btype%5D%20%7C%7C%20'Events')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bubbles%20%3D%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(props)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20name%20in%20props)(name%20%3D%3D%20'bubbles')%20%3F%20(bubbles%20%3D%20!!props%5Bname%5D)%20%3A%20(event%5Bname%5D%20%3D%20props%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20event.initEvent(type%2C%20bubbles%2C%20true)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20compatible(event)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D)(Zepto)%0A%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20%20%20var%20x%20%3D%20Zepto%3B%0A%0A%20%20%20%20%2F%2F%20Zepto%20extensions%0A%20%20%20%20x.fn.innerText%20%3D%20function(nodeFilter_obj%2C%20joiner)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!(0%20in%20this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20joiner%20%3D%20(typeof%20joiner%20%3D%3D%20'string')%20%3F%20joiner%20%3A%20'%20'%3B%0A%20%20%20%20%20%20%20%20return%20x.map(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20node%2C%20text%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20whatToShow%20%3D%20nodeFilter_obj%20%3F%20NodeFilter.SHOW_ALL%20%3A%20NodeFilter.SHOW_TEXT%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20walker%20%3D%20document.createTreeWalker(el%2C%20whatToShow%2C%20nodeFilter_obj%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%3D%20walker.nextNode())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text.push(node.nodeValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20text.join(joiner)%3B%0A%20%20%20%20%20%20%20%20%7D).join(joiner).replace(%2F%5Cn%2B%2Fg%2C%20joiner)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.outerHTML%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!(0%20in%20this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20x('%3Cdiv%3E').append(this%5B0%5D.cloneNode(true)).html()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.tagHTML%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20x('%3Cdiv%3E').append(this%5B0%5D.cloneNode(true)).html().replace(%2F%3E.*%2F%2C%20'%3E')%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Are%20we%20running%20in%20the%20page%20context%20or%20extension%20context%3F%0A%20%20%20%20x.pagecontext%20%3D%20args.pagecontext%20%7C%7C%20false%3B%0A%0A%20%20%20%20%2F%2F%20Set%20an%20attribute%20on%20an%20Object%20using%20a%20possible%20deeply-nested%20path%0A%20%20%20%20%2F%2F%20Stole%20this%20from%20lodash%20_.set(object%2C%20path%2C%20value)%0A%20%20%20%20%2F%2F%20eslint-disable-next-line%0A%20%20%20%20x.set%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20h%20%3D%20'%5Bobject%20Array%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20g%20%3D%20'%5Bobject%20Function%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20'%5Bobject%20String%5D'%3B%0A%20%20%20%20%20%20%20%20var%20k%20%3D%20%2F%5C.%7C%5C%5B(%3F%3A%5B%5E%5B%5C%5D%5D*%7C(%5B%22'%5D)(%3F%3A(%3F!%5C1)%5B%5E%5Cn%5C%5C%5D%7C%5C%5C.)*%3F%5C1)%5C%5D%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20m%20%3D%20%2F%5E%5Cw*%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%20%3D%20%2F%5B%5E.%5B%5C%5D%5D%2B%7C%5C%5B(%3F%3A(-%3F%5Cd%2B(%3F%3A%5C.%5Cd%2B)%3F)%7C(%5B%22'%5D)((%3F%3A(%3F!%5C2)%5B%5E%5Cn%5C%5C%5D%7C%5C%5C.)*%3F)%5C2)%5C%5D%2Fg%3B%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20%2F%5C%5C(%5C%5C)%3F%2Fg%3B%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20%2F%5E%5Cd%2B%24%2F%3B%0A%0A%20%20%20%20%20%20%20%20function%20n(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%3D%3D%20null%20%3F%20''%20%3A%20(b%20%2B%20'')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20f(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20!!b%20%26%26%20typeof%20b%20%3D%3D%20'object'%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20j%20%3D%20Object.prototype%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20j.toString%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%209007199254740991%3B%0A%0A%20%20%20%20%20%20%20%20function%20r(b%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20(typeof%20b%20%3D%3D%20'number'%20%7C%7C%20q.test(b))%20%3F%20%2Bb%20%3A%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20c%20%3D%3D%20null%20%3F%20d%20%3A%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%3E%20-1%20%26%26%20b%20%25%201%20%3D%3D%200%20%26%26%20b%20%3C%20c%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20t(b%2C%20d)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20typeof%20b%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((c%20%3D%3D%20'string'%20%26%26%20m.test(b))%20%7C%7C%20c%20%3D%3D%20'number')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20!k.test(b)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f%20%7C%7C%20(d%20!%3D%20null%20%26%26%20b%20in%20i(d))%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20v(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20b%20%3D%3D%20'number'%20%26%26%20b%20%3E%20-1%20%26%26%20b%20%25%201%20%3D%3D%200%20%26%26%20b%20%3C%3D%20d%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20i(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c(b)%20%3F%20b%20%3A%20Object(b)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20s(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n(b).replace(l%2C%20function(d%2C%20b%2C%20f%2C%20e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.push(f%20%3F%20e.replace(o%2C%20'%241')%20%3A%20(b%20%7C%7C%20d))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20e%20%3D%20function(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f(c)%20%26%26%20v(c.length)%20%26%26%20b.call(c)%20%3D%3D%20h%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20function%20w(d)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c(d)%20%26%26%20b.call(d)%20%3D%3D%20g%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20c(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20b%20%3D%20typeof%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20!!c%20%26%26%20(b%20%3D%3D%20'object'%20%7C%7C%20b%20%3D%3D%20'function')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20x(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20c%20%3D%3D%20'string'%20%7C%7C%20(f(c)%20%26%26%20b.call(c)%20%3D%3D%20p)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20u(e%2C%20d%2C%20k)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20e%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%20(d%20%2B%20'')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20%3D%20(e%5Bi%5D%20!%3D%20null%20%7C%7C%20t(d%2C%20e))%20%3F%20%5Bi%5D%20%3A%20s(d)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20-1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20%3D%20d.length%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20h%20-%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(b%20!%3D%20null%20%26%26%20%2B%2Bf%20%3C%20h)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20g%20%3D%20d%5Bf%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(c(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(f%20%3D%3D%20j)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%5Bg%5D%20%3D%20k%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b%5Bg%5D%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%5Bg%5D%20%3D%20r(d%5Bf%20%2B%201%5D)%20%3F%20%5B%5D%20%3A%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20b%5Bg%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20e%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20u%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20%2F%2F%20Test%20if%20a%20property%20is%20defined.%0A%20%20%20%20x.def%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20return%20typeof%20o%20!%3D%20%22undefined%22%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Simple%20Pub%2FSub%0A%20%20%20%20x.pubsub_handlers%20%3D%20%7B%7D%3B%0A%20%20%20%20x.pubsub_messages%20%3D%20%7B%7D%3B%20%2F%2F%20A%20list%20of%20all%20messages%0A%20%20%20%20x.publish%20%3D%20function(event%2C%20data%2C%20republish%2C%20persist_messages)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20republish%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20republish%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20persist_messages%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20persist_messages%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20data%20%3D%20data%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20funcs%20%3D%20x.pubsub_handlers%5Bevent%5D%3B%0A%20%20%20%20%20%20%20%20if%20(funcs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20funcs.forEach(function(f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.call(x%2C%20event%2C%20data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20running%20in%20the%20page%20context%2C%20send%20a%20message%20back%20to%20the%20extension%20code%0A%20%20%20%20%20%20%20%20if%20(republish)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clone%20data%20before%20posting%2C%20to%20make%20sure%20that%20object%20references%20are%20not%20passed%0A%20%20%20%20%20%20%20%20%20%20%20%20window.postMessage(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sfx%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22pagecontext%22%3A%20x.pagecontext%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22event%22%3A%20event%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20x.clone(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20%22*%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20this%20message%20in%20case%20a%20subscriber%20appears%20later%20and%20wants%20all%20past%20messages%3F%0A%20%20%20%20%20%20%20%20if%20(persist_messages)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_messages%5Bevent%5D%20%3D%20x.pubsub_messages%5Bevent%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20messages%20%3D%20x.pubsub_messages%5Bevent%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20messages.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22event%22%3A%20event%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20TODO%3A%20Wildcard%20subscriptions%0A%20%20%20%20x.subscribe%20%3D%20function(event%2C%20func%2C%20receive_past_messages)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20receive_past_messages%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20receive_past_messages%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20events%20%3D%20(typeof%20event%20%3D%3D%20%22string%22)%20%3F%20%5Bevent%5D%20%3A%20event%3B%0A%20%20%20%20%20%20%20%20events.forEach(function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.pubsub_handlers%5Bev%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_handlers%5Bev%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_handlers%5Bev%5D.push(func)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20past%20messages%20are%20requested%2C%20fire%20this%20function%20for%20each%20of%20the%20past%20messages%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(receive_past_messages)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20messages%20%3D%20x.pubsub_messages%5Bev%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20messages%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messages.forEach(function(msg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func.call(x%2C%20msg.event%2C%20msg.data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Allow%20for%20passing%20of%20messages%20between%20extension%20and%20page%20contexts%2C%20using%20window.postMessage%0A%20%20%20%20window.addEventListener('message'%2C%20function(event)%20%7B%0A%20%20%20%20%20%20%20%20if%20(event.data.sfx%20%26%26%20event.data.pagecontext%20!%3D%20x.pagecontext)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20message%20has%20been%20received%20from%20the%20other%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20x.publish(event.data.message.event%2C%20event.data.message.data%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20A%20Generalized%20storage%2Fpersistence%20mechanism%0A%20%20%20%20var%20ls%20%3D%20window.localStorage%3B%0A%20%20%20%20x.storage%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22prefix%22%3A%20null%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%7B%7D%2C%20%2F%2F%20keys%20are%20options%2C%20stats%2C%20etc%0A%20%20%20%20%20%20%20%20%22set%22%3A%20function(key%2C%20prop%2C%20val%2C%20callback%2C%20save)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20stored%20value%20in%20memory%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkey%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20container%20%3D%20x.storage.data%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Single%20value%20set%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20prop%20!%3D%20%22object%22%20%26%26%20(typeof%20callback%20%3D%3D%20%22undefined%22%20%7C%7C%20typeof%20callback%20%3D%3D%20%22function%22%20%7C%7C%20callback%20%3D%3D%20null))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set_or_delete(container%2C%20prop%2C%20val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Multiset%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20prop%20%3D%3D%20%22object%22%20%26%26%20(typeof%20val%20%3D%3D%20%22undefined%22%20%7C%7C%20typeof%20val%20%3D%3D%20%22function%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20save%20%3D%20callback%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20prop2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(prop2%20in%20prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set_or_delete(container%2C%20prop2%2C%20prop%5Bprop2%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(false%20!%3D%3D%20save)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.save(key%2C%20null%2C%20callback)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(key%2C%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22set_or_delete%22%3A%20function(container%2C%20prop%2C%20val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Delete%20a%20value%20by%20setting%20it%20to%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(prop%20in%20container%20%26%26%20typeof%20val%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20container%5Bprop%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.set(container%2C%20prop%2C%20val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22save%22%3A%20function(key%2C%20val%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(val%20%3D%3D%20null%20%26%26%20typeof%20x.storage.data%5Bkey%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%20%3D%20x.storage.data%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20persist%0A%20%20%20%20%20%20%20%20%20%20%20%20Extension.storage.set(key%2C%20val%2C%20function(key%2C%20val%2C%20ret)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20post%20to%20localstorage%20to%20trigger%20updates%20in%20other%20windows%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22time%22%3A%20x.now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22key%22%3A%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ls.setItem('x-storage'%2C%20JSON.stringify(o))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Call%20the%20callback%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(key%2C%20val%2C%20ret)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20(x.storage.prefix%20!%3D%20null%20%3F%20x.storage.prefix%20%2B%20'%2F'%20%3A%20''))%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22get%22%3A%20function(keys%2C%20defaultValue%2C%20callback%2C%20use_cache)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!!use_cache%20%26%26%20typeof%20keys%20%3D%3D%20%22string%22%20%26%26%20typeof%20x.storage.data%5Bkeys%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback(x.storage.data%5Bkeys%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20Get%20multi%20values%20from%20cache!%0A%20%20%20%20%20%20%20%20%20%20%20%20Extension.storage.get(keys%2C%20defaultValue%2C%20function(values)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20key%2C%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20the%20data%20in%20memory%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20keys%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Single%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkeys%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.update(keys%2C%20values)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Multi%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20keys.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20keys%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.update(key%2C%20values%5Bkey%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(values)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20(x.storage.prefix%20!%3D%20null%20%3F%20x.storage.prefix%20%2B%20'%2F'%20%3A%20''))%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22refresh%22%3A%20function(key%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkey%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.get(key%2C%20null%2C%20callback%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22update%22%3A%20function(key%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Use%20localStorage%20to%20communicate%20storage%20changes%20between%20windows%20and%20tabs.%0A%20%20%20%20%2F%2F%20Changes%20to%20localStorage%20trigger%20the%20'storage'%20event%20in%20other%20windows%20on%20the%20same%20site.%0A%20%20%20%20if%20(!x.pagecontext)%20%7B%0A%20%20%20%20%20%20%20%20window.addEventListener('storage'%2C%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%22x-storage%22%20%3D%3D%20e.key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20json%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(e.newValue)%3B%20%2F%2F%20%7B%22time%22%3A123%2C%22key%22%3A%22key_name%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.refresh(json.key%2C%20function(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Publish%20a%20message%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.publish(%22storage%2Frefresh%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22key%22%3A%20json.key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('storage%20event'%2C%20e%2C%20'error'%2C%20err%2C%20'json'%2C%20json)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Sanitize%20HTML%20using%20the%20DOMPurify%20library%2C%20if%20available%0A%20%20%20%20x.sanitize%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20return%20(typeof%20DOMPurify%20!%3D%20%22undefined%22%20%3F%20DOMPurify.sanitize(html)%20%3A%20html)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.safe_html%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20html%20%3D%20x.sanitize(html)%3B%0A%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x(this).html(html)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20%2F%2F%20http%2Fajax%0A%20%20%20%20x.ajax%20%3D%20function(urlOrObject%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20Allow%20for%20ajax%20from%20pagecontext%0A%20%20%20%20%20%20%20%20Extension.ajax(urlOrObject%2C%20function(content%2C%20status%2C%20headers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(headers%20%26%26%20%2Fapplication%5C%2Fjson%2F.test(headers%5B'content-type'%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20JSON.parse(content)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20callback(content%2C%20status)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.ajax_dom%20%3D%20function(urlOrObject%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20x.ajax(urlOrObject%2C%20function(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24dom%20%3D%20x('%3Cdiv%3E')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24dom.append(data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20callback(%24dom)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20css%0A%20%20%20%20x.css%20%3D%20function(css%2C%20id)%20%7B%0A%20%20%20%20%20%20%20%20x.when('head'%2C%20function(%24head)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20document.getElementById(id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(s)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(css)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20css%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x(s).remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20document.createElement('style')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20css%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.id%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%24head.append(s)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20function%20execution%20in%20a%20%3Cscript%3E%20block%20(in%20page%20context)%0A%20%20%20%20x.inject%20%3D%20function(code%2C%20args%2C%20windowVar)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!document%20%7C%7C%20!document.createElement%20%7C%7C%20!document.documentElement%20%7C%7C%20!document.documentElement.appendChild)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20document.createElement('script')%3B%0A%20%20%20%20%20%20%20%20s.type%20%3D%20'text%2Fjavascript'%3B%0A%20%20%20%20%20%20%20%20args%20%3D%20JSON.stringify(args%20%7C%7C%20%7B%7D)%3B%0A%20%20%20%20%20%20%20%20var%20result%20%3D%20windowVar%20%3F%20'window.'%20%2B%20windowVar%20%2B%20'%3D'%20%3A%20''%3B%0A%20%20%20%20%20%20%20%20code%20%3D%20result%20%2B%20'('%20%2B%20code.toString()%20%2B%20')('%20%2B%20args%20%2B%20')%3B'%3B%0A%20%20%20%20%20%20%20%20if%20(windowVar)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Post%20a%20window%20notification%20saying%20this%20variable%20is%20now%20defined%0A%20%20%20%20%20%20%20%20%20%20%20%20code%20%2B%3D%20'window.postMessage(%7B%22sfxready%22%3A%22'%20%2B%20windowVar%20%2B%20'%22%7D%20%2C%20%22*%22)%3B'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20s.text%20%3D%20code%3B%0A%20%20%20%20%20%20%20%20document.documentElement.appendChild(s)%3B%0A%20%20%20%20%20%20%20%20s.parentNode.removeChild(s)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20POLLING%0A%20%20%20%20%2F%2F%20Call%20a%20function%20repeatedly%20until%20it%20doesn't%20throw%20an%20exception%20or%20returns%20non-false%0A%20%20%20%20x.poll%20%3D%20function(func%2C%20interval%2C%20max)%20%7B%0A%20%20%20%20%20%20%20%20interval%20%3D%20interval%20%7C%7C%20500%3B%0A%20%20%20%20%20%20%20%20max%20%3D%20max%20%7C%7C%2050%3B%0A%20%20%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(count%2B%2B%20%3E%20max)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(func(count)%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(f%2C%20interval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(f%2C%20interval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20f()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20A%20function%20that%20executes%20a%20function%20only%20when%20a%20selector%20returns%20a%20result%0A%20%20%20%20x.when%20%3D%20function(selector%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20var%20%24results%20%3D%20x(selector)%3B%0A%20%20%20%20%20%20%20%20if%20(%24results.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(%24results)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.when(selector%2C%20func)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20200)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Cookies%0A%20%20%20%20x.cookie%20%3D%20%7B%0A%20%20%20%20%20%20%20%20'get'%3A%20function(n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20unescape(document.cookie.match('(%5E%7C%3B)%3F'%20%2B%20n%20%2B%20'%3D(%5B%5E%3B%5D*)(%3B%7C%24)')%5B2%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20'set'%3A%20function()%20%7B%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Logging%0A%20%20%20%20x.log%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(console%20%26%26%20console.log)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20arguments%5Bi%5D%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.push(JSON.stringify(arguments%5Bi%5D%2C%20null%2C%203))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log.apply(console%2C%20args)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.alert%20%3D%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20msg%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20JSON.stringify(msg%2C%20null%2C%203)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20alert(msg)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20%22bind%22%20function%20to%20support%20event%20capture%20mode%0A%20%20%20%20x.bind%20%3D%20function(el%2C%20ev%2C%20func%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20el%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20x(el)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!el%20%7C%7C%20el.length%20%3C%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20el%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20X(el)%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20capture%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20capture%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(el%20%26%26%20el.addEventListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el.addEventListener(ev%2C%20func%2C%20capture)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.capture%20%3D%20function(el%2C%20ev%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20x.bind(el%2C%20ev%2C%20func%2C%20true)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20backwards-compatible%20replacement%20for%20the%20old%20QSA()%20function%0A%20%20%20%20x.QSA%20%3D%20function(context%2C%20selector%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20selector%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%20%3D%20selector%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20selector%20%3D%20context%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%20%3D%20document%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20x(selector%2C%20context).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(this)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20util%20method%20to%20find%20a%20single%20element%20matching%20a%20selector%0A%20%20%20%20x.find%20%3D%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20x(selector)%3B%0A%20%20%20%20%20%20%20%20return%20(o.length%20%3E%200)%20%3F%20o%5B0%5D%20%3A%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Find%20the%20real%20target%20of%20an%20event%0A%20%20%20%20x.target%20%3D%20function(e%2C%20wrap)%20%7B%0A%20%20%20%20%20%20%20%20var%20t%20%3D%20e.target%3B%0A%20%20%20%20%20%20%20%20if%20(t.nodeType%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20t.parentNode%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20wrap%20%3F%20x(t)%20%3A%20t%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.parent%20%3D%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20if%20(el%20%26%26%20el.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20el.parentNode%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20util%20method%20to%20clone%20a%20simple%20object%0A%20%20%20%20x.clone%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(JSON.stringify(o))%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Some%20useful%20string%20methods%0A%20%20%20%20x.match%20%3D%20function(str%2C%20regex%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20str%20!%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20m%20%3D%20str.match(regex)%3B%0A%20%20%20%20%20%20%20%20if%20(m%20%26%26%20m.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20func%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%20regex.global%20%3F%200%20%3A%201%3B%20i%20%3C%20m.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func(m%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m.length%20%3E%201%20%3F%20m%5Bregex.global%20%3F%200%20%3A%201%5D%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Get%20a%20timestamp%0A%20%20%20%20x.time%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20Date.now()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.now%20%3D%20x.time%3B%0A%20%20%20%20x.today%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20%20%20return%20d.getFullYear()%20*%2010000%20%2B%20(d.getMonth()%20%2B%201)%20*%20100%20%2B%20d.getDate()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Express%20a%20timestamp%20as%20a%20relative%20time%20%22ago%22%0A%20%20%20%20x.ago%20%3D%20function(when%2C%20now%2C%20shortened%2C%20higher_resolution)%20%7B%0A%20%20%20%20%20%20%20%20now%20%3D%20now%20%7C%7C%20x.now()%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20shortened%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shortened%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20diff%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20var%20delta%20%3D%20(now%20-%20when)%3B%0A%20%20%20%20%20%20%20%20var%20seconds%20%3D%20delta%20%2F%20x.seconds%3B%0A%20%20%20%20%20%20%20%20if%20(seconds%20%3C%2060)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22just%20now%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20days%20%3D%20Math.floor(delta%20%2F%20x.days)%3B%0A%20%20%20%20%20%20%20%20if%20(days%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20days%20%2B%20%22%20day%22%20%2B%20(days%20%3E%201%20%3F%20%22s%22%20%3A%20%22%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delta%20-%3D%20(days%20*%20x.days)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20hours%20%3D%20Math.floor(delta%20%2F%20x.hours)%3B%0A%20%20%20%20%20%20%20%20if%20(hours%20%3E%200%20%26%26%20(higher_resolution%20%7C%7C%20!diff))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20hours%20%2B%20%22%20%22%20%2B%20(shortened%20%3F%20%22hr%22%20%3A%20%22hours%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delta%20-%3D%20(hours%20*%20x.hours)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20minutes%20%3D%20Math.floor(delta%20%2F%20x.minutes)%3B%0A%20%20%20%20%20%20%20%20if%20(minutes%20%3E%200%20%26%26%20(!diff%20%7C%7C%20(higher_resolution%20%26%26%20days%20%3C%201)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20minutes%20%2B%20%22%20%22%20%2B%20(shortened%20%3F%20%22mins%22%20%3A%20%22minutes%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!diff)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%3D%20%22a%20while%20%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20diff%20%2B%20%22ago%22%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Recurring%20tasks%20execute%20only%20at%20certain%20intervals%0A%20%20%20%20x.seconds%20%3D%201000%3B%0A%20%20%20%20x.minutes%20%3D%20x.seconds%20*%2060%3B%0A%20%20%20%20x.hours%20%3D%20x.minutes%20*%2060%3B%0A%20%20%20%20x.days%20%3D%20x.hours%20*%2024%3B%0A%20%20%20%20x.task%20%3D%20function(key%2C%20frequency%2C%20callback%2C%20elsecallback)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Internally%20store%20the%20state%20of%20each%20task%20in%20a%20user%20pref%0A%20%20%20%20%20%20%20%20x.storage.get('tasks'%2C%20%7B%7D%2C%20function(tasks)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20tasks%5Bkey%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bkey%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22run_on%22%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20t%20%3D%20tasks%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20now%20%3D%20x.now()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20past%20due%2C%20update%20the%20task%20and%20execute%20the%20callback%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!t.run_on%20%7C%7C%20((t.run_on%20%2B%20frequency)%20%3C%20now))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t.run_on%20%3D%20now%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set('tasks'%2C%20key%2C%20t%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20elsecallback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elsecallback(t.run_on)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20true)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Semver%20Compare%0A%20%20%20%20x.semver_compare%20%3D%20function(a%2C%20b)%20%7B%0A%20%20%20%20%20%20%20%20var%20pa%20%3D%20a.split('.')%3B%0A%20%20%20%20%20%20%20%20var%20pb%20%3D%20b.split('.')%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%203%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20na%20%3D%20Number(pa%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nb%20%3D%20Number(pb%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(na%20%3E%20nb)%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nb%20%3E%20na)%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isNaN(na)%20%26%26%20isNaN(nb))%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isNaN(na)%20%26%26%20!isNaN(nb))%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20UI%20methods%20to%20simulate%20user%20actions%0A%20%20%20%20x.ui%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22click%22%3A%20function(selector%2C%20bubble)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20bubble%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bubble%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20x(selector).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20e%20%3D%20document.createEvent('MouseEvents')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initEvent('click'%2C%20bubble%2C%20true%2C%20window%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dispatchEvent(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22keypress%22%3A%20function(selector%2C%20code%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20type%20%7C%7C%20%22keypress%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x(selector).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20e%20%3D%20document.createEvent('KeyboardEvent')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20code%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20code%20%3D%20code.charCodeAt(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.initKeyboardEvent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initKeyboardEvent(type%2C%20true%2C%20true%2C%20window%2C%20code%2C%20null%2C%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(e.initKeyEvent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initKeyEvent(type%2C%20true%2C%20true%2C%20window%2C%20false%2C%20false%2C%20false%2C%20false%2C%20false%2C%20code)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dispatchEvent(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22scroll%22%3A%20function(pixels%2C%20el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24el%20%3D%20X(el%20%7C%7C%20window)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20scrollTop%20%3D%20%24el.scrollTop()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20scrollTop%20%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.scrollTop(scrollTop%20%2B%20pixels)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Draggable%20Objects%0A%20%20%20%20x.draggable%20%3D%20function(el%2C%20dragend)%20%7B%0A%20%20%20%20%20%20%20%20var%20%24el%20%3D%20X(el)%3B%0A%20%20%20%20%20%20%20%20el%20%3D%20%24el%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20var%20%24undraggables%20%3D%20%24el.find('*%5Bdraggable%3D%22false%22%5D')%3B%0A%20%20%20%20%20%20%20%20if%20(%24undraggables.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24undraggables.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cursor'%3A%20'auto'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D).mouseenter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D).mouseleave(function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24el.on('dragstart'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.dragend%20%3D%20dragend%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.dataTransfer.setData(%22text%2Fplain%22%2C%20(el.offsetLeft%20-%20ev.clientX)%20%2B%20'%2C'%20%2B%20(el.offsetTop%20-%20ev.clientY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.target%20%3D%20el%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.draggable.target%20%3D%20null%3B%0A%20%20%20%20x.draggable.dragend%20%3D%20null%3B%0A%20%20%20%20x(window).on('dragover'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x.draggable.target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).on('drop'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x.draggable.target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20offset%20%3D%20ev.dataTransfer.getData(%22text%2Fplain%22).split('%2C')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24el%20%3D%20x(x.draggable.target)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20left%20%3D%20(ev.clientX%20%2B%20%2Boffset%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(left%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20top%20%3D%20(ev.clientY%20%2B%20%2Boffset%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(top%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('left'%2C%20left%20%2B%20'px')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('top'%2C%20top%20%2B%20'px')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('right'%2C%20'auto')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('bottom'%2C%20'auto')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.target%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.draggable.dragend%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.dragend(%24el%2C%20left%2C%20top)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20ELEMENT%20CREATION%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20Create%20a%20document%20fragment%2C%20then%20optionally%20run%20a%20function%20with%20it%20as%20an%20argument%0A%20%20%20%20x.fragment%20%3D%20function(html%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20var%20frag%20%3D%20document.createDocumentFragment()%3B%0A%20%20%20%20%20%20%20%20var%20div%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20var%20selector%3B%0A%20%20%20%20%20%20%20%20div.innerHTML%20%3D%20x.sanitize(html)%3B%0A%20%20%20%20%20%20%20%20while%20(div%20%26%26%20div.firstChild)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20frag.appendChild(div.firstChild)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20func%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(frag)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20func%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(selector%20in%20func)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20click(QS(frag%2C%20selector)%2C%20func%5Bselector%5D%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20frag%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Observe%20DOM%20Changes%0A%20%20%20%20x.on_attribute_change%20%3D%20function(el%2C%20attr%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20(new%20MutationObserver(function(mutations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mutations.forEach(function(mutation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!attr%20%7C%7C%20(mutation.attributeName%20%3D%3D%20attr%20%26%26%20el.getAttribute(attr)%20!%3D%20mutation.oldValue))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(mutation.attributeName%2C%20mutation.oldValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D)).observe(el%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attributes%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attributeOldValue%3A%20true%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20x.return_false%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20x.is_document_ready%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document%20%26%26%20document.readyState)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(document.readyState%20%3D%3D%20%22interactive%22%20%7C%7C%20document.readyState%20%3D%3D%20%22complete%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20(document%20%26%26%20document.getElementsByTagName%20%26%26%20document.getElementsByTagName('BODY').length%20%3E%200)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Notes%20to%20be%20emitted%20in%20any%20sort%20of%20Support%20report%0A%20%20%20%20x.support_note%20%3D%20function(who%2C%20what)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20x.support_notes%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.support_notes%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20x.support_notes%5Bwho%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20who%3A%20who%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20what%3A%20what%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20when%3A%20x.now()%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20%22Ready%22%20queue%20of%20functions%20to%20run%20once%20the%20event%20is%20triggered%0A%20%20%20%20x.ready%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20ready%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20var%20fire%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.func()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.log(%22Error%20in%20module%3A%20%22%20%2B%20o.label)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20function(label%2C%20f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20label%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20No%20arg%20passed%2C%20fire%20the%20queue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ready%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.forEach(function(o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fire(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20label%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20label%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20label%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20f%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22label%22%3A%20label%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22func%22%3A%20f%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(ready)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fire(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.push(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20%2F%2F%20beforeReady()%20allows%20modules%20to%20halt%20execution%20or%20do%20things%20before%20normal%20execution%0A%20%20%20%20x.beforeReady%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20i%2C%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20return%20function(f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20f%20!%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fire%20the%20queue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20queue.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(queue%5Bi%5D(f)%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.push(f)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20return%20x%3B%0A%7D%3B%0Avar%20X%20%3D%20XLib()%3B%0A%0Afunction%20save()%20%7B%0A%20%20%20%20%2F%2FRemove%20relative%20time%0A%20%20%20%20X.QSA(document%2C%20'abbr%5Bdata-utime%5D'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20msg.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2FExpand%20group%20desc%0A%20%20%20%20X.QSA(document%2C%20'span.see_more_link_inner'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20msg.click()%3B%0A%20%20%20%20%7D)%3B%0A%0A%09const%20styles%20%3D%20%60%0A%09div%23pagelet_sidebar%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_bluebar%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._2fvv%7B%20display%3Anone%20!important%3B%20%7D%0A%09form._3_gi%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._3miz%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._4adj%7B%20opacity%3A%200.0%3B%20!important%3B%20%7D%0A%09div%23pagelet_group_composer%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23groupsNewMembersLink%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._i7m%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._5dwa%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._2pio%7B%20display%3Anone%20!important%3B%20%7D%0A%09div.qjfq86k5%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_ego_contextual_group%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div%23pagelet_ego_pane%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_dock%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_rhc_footer%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23group_rhc_post_tags_list%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div._18dz%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div.groupsInviteJoinCard%7B%20display%3Anone%20!important%3B%20%7D%0A%0A%09div._43u6%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._6cuq%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._78bu%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._4efl%7B%20display%3Anone%20!important%3B%20%7D%0A%09a._3_qk%7B%20display%3Anone%20!important%3B%20%7D%0A%09span._6cok%7B%20display%3Anone%20!important%3B%20%7D%0A%09a._6qw5%7B%20display%3Anone%20!important%3B%20%7D%0A%09span.timestampContent%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20html%20body._5vb_%20%23globalContainer%20%7B%0A%20%20%20%20%20%20%20%20padding-right%3A%200px%20!important%3B%0A%20%20%20%20%7D%0A%09abbr%5Bdata-utime%5D%3Abefore%20%7B%0A%09%20%20content%3A%20attr(title)%20attr(data-tooltip-content)%3B%0A%09%7D%0A%09a._6qw8%3Abefore%20%7B%0A%09%20%20content%3A%20%22%20%C2%B7%20%22%3B%0A%09%7D%0A%20%20%20%20div._8m-h%3A%3Abefore%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20span.uiLikePageButton%7B%20display%3Anone%20!important%3B%20%7D%0A%0A%20%20%20%20div%5Brole%3D%22banner%22%5D%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.be9z9djy%20%7B%0A%20%20%20%20%20%20%20%20top%3A%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20div.qsy8amke.ue3kfks5.pw54ja7n.uo3d90p7.l82x9zwi.rq0escxv.ni8dbmo4.stjgntxs.l9j0dhe7.k4urcfbm%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.rq0escxv.l9j0dhe7.du4w35lb.j83agx80.taijpn5t.gs1a9yip.owycx6da.btwxx1t3.cddn0xzi.dsne8k7f%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.bp9cbjyn.m9osqain.j83agx80.jq4qci2q.bkfpd7mw.a3bd9o3v.kvgmc6g5.wkznzc2l.oygrvhab.dhix69tm.jktsbyx5.rz4wbd8a.osnr6wyh.a8nywdso.s1tcr66n%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.scb9dxdr.sj5x9vvc.hv4rvrfc.ecm0bbzt.lzcic4wl.btwxx1t3.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.rq0escxv.l9j0dhe7.du4w35lb.j83agx80.bkfpd7mw.bp9cbjyn.owycx6da.btwxx1t3%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.j34wkznp.qp9yad78.pmk7jnqg.kr520xx4%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.oajrlxb2.g5ia77u1.qu0x051f.esr5mh6w.e9989ue4.r7d6kgcz.rq0escxv.nhd2j8a9.q9uorilb.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.i1ao9s8h.esuyzwwr.f1sip0of.lzcic4wl.m9osqain.gpro0wi8.n3ffmt46.l9j0dhe7%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.oajrlxb2.bp9cbjyn.g5ia77u1.mtkw9kbi.tlpljxtp.qensuy8j.ppp5ayq2.goun2846.ccm00jje.s44p3ltw.mk2mc5f4.rt8b4zig.n8ej3o3l.agehan2d.sk4xxmp2.rq0escxv.nhd2j8a9.j83agx80.mg4g778l.btwxx1t3.pfnyh3mw.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.tgvbjcpo.hpfvmrgz.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.l9j0dhe7.i1ao9s8h.esuyzwwr.f1sip0of.du4w35lb.lzcic4wl.abiwlrkh.p8dawk7l.buofh1pr.taijpn5t%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.ecm0bbzt.hv4rvrfc.e5nlhep0.dati1w0a.lzcic4wl.btwxx1t3.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.poy2od1o.i09qtzwb.n7fi1qx3%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.a8nywdso.e5nlhep0.rz4wbd8a.ecm0bbzt.jklb3kyz.dhix69tm.oygrvhab.wkznzc2l.kvgmc6g5.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.oajrlxb2.g5ia77u1.qu0x051f.esr5mh6w.e9989ue4.r7d6kgcz.rq0escxv.n05y2jgg.hbms080z.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.i1ao9s8h.vul9dhcy.f1sip0of.lzcic4wl.l9j0dhe7.abiwlrkh.p8dawk7l.f49446kz._3_qk.a8nywdso.qt6c0cv9.rz4wbd8a.jb3vyjys.jklb3kyz.owomucta.n3ffmt46.e9vueds3.bp9cbjyn%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20%60%0A%0A%09const%20styleSheet%20%3D%20document.createElement(%22style%22)%0A%09styleSheet.type%20%3D%20%22text%2Fcss%22%0A%09styleSheet.innerText%20%3D%20styles%0A%09document.head.appendChild(styleSheet)%0A%0A%20%20%20%20if(document.querySelector('div%23contentArea'))%20%7B%0A%20%20%20%20%20%20%20%20let%20box%20%3D%20document.querySelector('div')%3B%0A%20%20%20%20%20%20%20%20let%20width%20%3D%20box.offsetWidth%3B%0A%20%20%20%20%20%20%20%20let%20height%20%3D%20box.offsetHeight%3B%0A%20%20%20%20%20%20%20%20page_l%20%3D%20Math.round(height*0.2015944286630624)%0A%20%20%20%20%7Delse%20%7B%0A%20%20%20%20%20%20%20%20let%20box%20%3D%20%20document.querySelector(%22.hybvsw6c.ue3kfks5.pw54ja7n.uo3d90p7.l82x9zwi.rq0escxv.ni8dbmo4.stjgntxs.l9j0dhe7.k4urcfbm.sbcfpzgs%22)%0A%20%20%20%20%20%20%20%20let%20width%20%3D%20box.offsetWidth%3B%0A%20%20%20%20%20%20%20%20let%20height%20%3D%20box.offsetHeight%2B500%3B%0A%20%20%20%20%20%20%20%20page_l%20%3D%20Math.round(height*0.2645833333333%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20styles_page%20%3D%20%60%0A%20%20%20%20%40page%20%7B%0A%20%20%20%20%20%20margin%3A%200%3B%0A%20%20%20%20%20%20padding%3A%200%3B%0A%20%20%20%20%20%20size%3A%20200mm%20%60%2Bpage_l%2B%60mm%3B%0A%20%20%20%20%60%0A%20%20%20%20const%20styleSheet_page%20%3D%20document.createElement(%22style%22)%0A%20%20%20%20styleSheet_page.type%20%3D%20%22text%2Fcss%22%0A%20%20%20%20styleSheet_page.innerText%20%3D%20styles_page%0A%20%20%20%20document.head.appendChild(styleSheet_page)%0A%0A%20%20%20%20window.scrollTo(0%2C%200)%0A%09window.print()%0A%7D%7D)()">
<span>Post to PDF</span>
</a></span>

<span class="bookmarklet-wrapper">
<a class="bookmarklet" title="Download" onclick="return false;" href="javascript:(function()%7Bwindow.history.pushState(%22object%20or%20string%22%2C%20%22Post%22%2C%20%22%2Fpost%22)%3B%0Atop.document.title%3D'Post'%0A%0Alet%20todo%20%3D%206%3B%0Aconst%20EXPAND_POST%20%3D%201%3B%0Aconst%20EXPAND_COMMENTS%20%3D%202%3B%0Aconst%20EXPAND_REPLIES%20%3D%204%3B%0Aconst%20EXPAND_XLAT%20%3D%208%3B%0Aconst%20EXPAND_FILTER%20%3D%2016%3B%0Aconst%20WAIT_TIME%20%3D%20100%3B%0Aconst%20MAX_WAIT%20%3D%2020%3B%0Aconst%20END_DELAY%20%3D%200%3B%0Aconst%20POST_ARTICLE%20%3D%20%22%5Baria-posinset%5D%5Brole%3D%5C%22article%5C%22%5D%22%3B%0Aconst%20VIDEO_ARTICLE%20%3D%20%22._6x84%2C%5Bdata-pagelet%3D%5C%22TahoeRightRail%5C%22%5D%22%3B%0Aconst%20FS_ARTICLE%20%3D%20%22.o36gj0jk%3Anot(%5Brole%3D%5C%22navigation%5C%22%5D)%22%3B%0Aconst%20NEW_ARTICLE%20%3D%20POST_ARTICLE%20%2B%20%22%2C%22%20%2B%20FS_ARTICLE%20%2B%20%22%2C%22%20%2B%20VIDEO_ARTICLE%3B%0Aconst%20POST_ACTION%20%3D%20%22.sjgh65i0%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20div%20%3E%20span%2C.jifvfom9%5Brole%3D%5C%22button%5C%22%5D%2C.p24jkzn5%22%3B%0Aconst%20POST_ROOT%20%3D%20%22.userContentWrapper%2C.uiScrollableAreaContent%2C%22%20%2B%20NEW_ARTICLE%3B%0Aconst%20RESPONSE_COUNTER%20%3D%20%22%5Baria-label%5D%5Brole%3D%5C%22article%5C%22%5D%22%3B%0Aconst%20GET_MORE_ANYTHING%20%3D%20%22._4sxc%2Cspan.o8rfisnq%22%3B%0Aconst%20GET_REPLIES_ONLY%20%3D%20%22._4sso%22%3B%0Aconst%20SHOW_COMMENTS%20%3D%20%22%5Bdata-ft%3D%5Cu0027%7B%5C%22tn%5C%22%3A%5C%22O%5C%22%7D%5Cu0027%5D%22%3B%0Aconst%20SINGLE_COMMENT_AREA%20%3D%20%22._3w53%2C._6iiv%2C._7a9a%22%3B%0Aconst%20FILTER_ROOT%20%3D%20POST_ROOT%20%2B%20%22%2C.uiScrollableAreaContent%2C.uiStreamStory%22%3B%0Aconst%20FILTER_DONE%20%3D%20%22h6%20~%20ul%20%3E%20li%22%3B%0Aconst%20FILTER_ATTR%20%3D%20%22data-ordering%22%3B%0Aconst%20FILTER_VALUE%20%3D%20%22RANKED_UNFILTERED%22%3B%0Aconst%20FILTER_NEW%20%3D%20%22.bp9cbjyn%20%3E%20.p8dawk7l%5Brole%3D%5C%22button%5C%22%5D%3Anot(%5Baria-label%5D)%3Anot(%5Baria-haspopup%5D)%3Anot(.jifvfom9)%3Anot(._4sxc)%22%3B%0Aconst%20CSS_LOGIN_STUFF%20%3D%20%22._5hn6%2C%20._67m7%2C%20.generic_dialog_modal%22%3B%0Aconst%20BASE_SEE_MORE%20%3D%20%22.text_exposed_link%20.see_more_link_inner%22%3B%0Aconst%20EXPOSE_CONTENT%20%3D%20%22.text_exposed_link%22%3B%0Aconst%20CSS_SEE_MORE%20%3D%20%22.fss%3Anot(._5shl)%22%3B%0Aconst%20SMN%20%3D%20%22.lrazzd5p%5Brole%3D%5C%22button%5C%22%5D%22%3B%0Aconst%20SEE_MORE_NEW%20%3D%20POST_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%20%2B%20%22%2C%22%20%2B%20FS_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%20%2B%20%22%2C%22%20%2B%20VIDEO_ARTICLE%20%2B%20%22%20%22%20%2B%20SMN%3B%0Aconst%20_NONE%20%3D%20%22no-value%22%3B%0Aconst%20_COMMENTS%20%3D%20%22-comments%22%3B%0Aconst%20_REPLIES%20%3D%20%22-replies%22%3B%0Aconst%20SETTINGS_KEY%20%3D%20%22expand-all-todo%22%3B%0A%0Afunction%20bind(obj%2C%20fn)%20%7B%0A%20%20%20%20return%20function()%20%7B%0A%20%20%20%20%20%20%20%20fn.apply(obj%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%7D%0Alet%20Global%20%3D%20null%3B%0Aif%20(!document.querySelectorAll(%22xx%22).forEach)%20%7B%0A%20%20%20%20Object.prototype.forEach%20%3D%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20let%20T%3B%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20T%20%3D%20arguments%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20O%20%3D%20Object(this)%3B%0A%20%20%20%20%20%20%20%20let%20len%20%3D%20O.length%20%3E%3E%3E%200%3B%0A%20%20%20%20%20%20%20%20let%20k%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20(k%20%3C%20len)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(k%20in%20O)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback.call(T%2C%20O%5Bk%5D%2C%20k%2C%20O)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20k%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%7D%0A%0Afunction%20EscHandler()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20false%3B%0A%20%20%20%20this.handler%20%3D%20bind(this%2C%20this.docKeyDown)%3B%0A%7D%0AEscHandler.prototype.shouldAbort%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.abortNow%3B%0A%7D%3B%0AEscHandler.prototype.abort%20%3D%20function(value)%20%7B%0A%20%20%20%20if%20(value%20%26%26%20!this.shouldAbort()%20%26%26%20!Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Aborting...%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.abortNow%20%3D%20value%3B%0A%7D%3B%0AEscHandler.prototype.on%20%3D%20function()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20false%3B%0A%20%20%20%20document.addEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0AEscHandler.prototype.off%20%3D%20function()%20%7B%0A%20%20%20%20this.abortNow%20%3D%20true%3B%0A%20%20%20%20document.removeEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0AEscHandler.prototype.docKeyDown%20%3D%20function(e)%20%7B%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%2027)%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20this.abort(true)%3B%0A%20%20%20%20%20%20%20%20if%20(Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Session.trulyEnd()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0Afunction%20CfgHandler()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20false%3B%0A%20%20%20%20this.handler%20%3D%20bind(this%2C%20this.docKeyDown)%3B%0A%7D%0ACfgHandler.prototype.shouldConfig%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.doConfig%3B%0A%7D%3B%0ACfgHandler.prototype.on%20%3D%20function()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20false%3B%0A%20%20%20%20document.addEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0ACfgHandler.prototype.off%20%3D%20function()%20%7B%0A%20%20%20%20this.doConfig%20%3D%20true%3B%0A%20%20%20%20document.removeEventListener(%22keydown%22%2C%20this.handler)%3B%0A%7D%3B%0ACfgHandler.prototype.docKeyDown%20%3D%20function(e)%20%7B%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%3D%20%22S%22.charCodeAt(0))%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20if%20(e.ctrlKey)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Settings.removeKey(SETTINGS_KEY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(%22Will%20use%20default%20settings%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.doConfig%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20if%20(Global.ending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20CfgWindow.showIt()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%3B%0A%0Afunction%20Settings()%20%7B%7D%0Anew%20Settings()%3B%0ASettings.hasValue%20%3D%20function(value)%20%7B%0A%20%20%20%20return%20window.localStorage.getItem(value)%20!%3D%3D%20null%3B%0A%7D%3B%0ASettings.getValue%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(!Settings.hasValue(value))%20%7B%0A%20%20%20%20%20%20%20%20return%20deflt%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20window.localStorage.getItem(value)%3B%0A%7D%3B%0ASettings.getInt%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20Number.parseInt(Settings.getValue(value%2C%20deflt)%2C%2010)%3B%0A%7D%3B%0ASettings.getBoolean%20%3D%20function(value%2C%20deflt)%20%7B%0A%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20deflt%20%3D%20%22false%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20Settings.getValue(value%2C%20%22%22%20%2B%20deflt)%20%3D%3D%20%22true%22%3B%0A%7D%3B%0ASettings.setValue%20%3D%20function(key%2C%20value)%20%7B%0A%20%20%20%20return%20window.localStorage.setItem(key%2C%20%22%22%20%2B%20value)%3B%0A%7D%3B%0ASettings.removeKey%20%3D%20function(key)%20%7B%0A%20%20%20%20return%20window.localStorage.removeItem(key)%3B%0A%7D%3B%0A%0Afunction%20BaseWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22base-window%22%3B%0A%7D%0ABaseWindow.prototype.show%20%3D%20function()%20%7B%0A%20%20%20%20const%20WANT_W%20%3D%20300%3B%0A%20%20%20%20const%20WANT_H%20%3D%20200%3B%0A%20%20%20%20const%20sizer%20%3D%20document.querySelector(%22html%22)%3B%0A%20%20%20%20const%20w%20%3D%20sizer.clientWidth%3B%0A%20%20%20%20const%20h%20%3D%20sizer.clientHeight%3B%0A%20%20%20%20let%20x%20%3D%200%3B%0A%20%20%20%20if%20(w%20%3E%20WANT_W)%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20(w%20-%20WANT_W)%20%2F%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20y%20%3D%200%3B%0A%20%20%20%20if%20(h%20%3E%20WANT_H)%20%7B%0A%20%20%20%20%20%20%20%20y%20%3D%20(h%20-%20WANT_H)%20%2F%203%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20div%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20div.id%20%3D%20this.id%3B%0A%20%20%20%20div.style.direction%20%3D%20%22ltr%22%3B%0A%20%20%20%20div.style.position%20%3D%20%22fixed%22%3B%0A%20%20%20%20div.style.zIndex%20%3D%20%22999999%22%3B%0A%20%20%20%20div.style.left%20%3D%20x%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.width%20%3D%20WANT_W%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.top%20%3D%20y%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.height%20%3D%20WANT_H%20%2B%20%22px%22%3B%0A%20%20%20%20div.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20div.style.backgroundColor%20%3D%20%22%23425f9c%22%3B%0A%20%20%20%20document.body.insertAdjacentElement(%22afterbegin%22%2C%20div)%3B%0A%20%20%20%20this.create(div)%3B%0A%20%20%20%20this.init(div)%3B%0A%7D%3B%0ABaseWindow.prototype.create%20%3D%20function(div)%20%7B%7D%3B%0ABaseWindow.prototype.init%20%3D%20function(div)%20%7B%7D%3B%0ABaseWindow.prototype.hide%20%3D%20function()%20%7B%0A%20%20%20%20document.querySelectorAll(%22%23%22%20%2B%20this.id).forEach(item%20%3D%3E%20document.body.removeChild(item))%3B%0A%7D%3B%0A%0Afunction%20CfgWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22cfg-window%22%3B%0A%7D%0ACfgWindow.prototype%20%3D%20Object.create(BaseWindow.prototype)%3B%0ACfgWindow.prototype.create%20%3D%20function(div)%20%7B%0A%20%20%20%20let%20node%20%3D%20document.createElement(%22p%22)%3B%0A%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20node.innerHTML%20%3D%20%22%3Ci%3EExpand%20All%3C%2Fi%3E%20Settings%22%3B%0A%20%20%20%20node.style.marginLeft%20%3D%20%224px%22%3B%0A%20%20%20%20node.style.fontWeight%20%3D%20%22bold%22%3B%0A%20%20%20%20const%20boxes%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%5B%22In%20Classic%20Facebook%2C%20click%20%3Ci%3EContinue%20Reading%3C%2Fi%3E%20links.%22%2C%20EXPAND_POST%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Expand%20comments.%22%2C%20EXPAND_COMMENTS%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Expand%20replies.%22%2C%20EXPAND_REPLIES%5D%2C%0A%20%20%20%20%20%20%20%20%5B%22Don't%20force%20%3Ci%3EAll%20Comments%3C%2Fi%3E%20filter.%22%2C%20EXPAND_FILTER%5D%0A%20%20%20%20%5D%3B%0A%20%20%20%20boxes.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%20document.createElement(%22p%22)%3B%0A%20%20%20%20%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20%20%20%20%20node.style.marginTop%20%3D%20%222px%22%3B%0A%20%20%20%20%20%20%20%20node.style.marginBottom%20%3D%20%222px%22%3B%0A%20%20%20%20%20%20%20%20let%20node2%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20%20%20%20%20node2.type%20%3D%20%22checkbox%22%3B%0A%20%20%20%20%20%20%20%20node2.value%20%3D%20item%5B1%5D%3B%0A%20%20%20%20%20%20%20%20node2.style.marginLeft%20%3D%20%2215px%22%3B%0A%20%20%20%20%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20node2%20%3D%20document.createElement(%22label%22)%3B%0A%20%20%20%20%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20%20%20%20%20node2.innerHTML%20%3D%20item%5B0%5D%3B%0A%20%20%20%20%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20%20%20%20%20node2.style.paddingBottom%20%3D%20%225px%22%3B%0A%20%20%20%20%20%20%20%20node2.style.fontWeight%20%3D%20%22normal%22%3B%0A%20%20%20%20%20%20%20%20node2.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20node%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20div.appendChild(node)%3B%0A%20%20%20%20node.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20let%20node2%20%3D%20document.createElement(%22button%22)%3B%0A%20%20%20%20node.appendChild(node2)%3B%0A%20%20%20%20node2.innerHTML%20%3D%20%22Done%22%3B%0A%20%20%20%20node2.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20node2.addEventListener(%22click%22%2C%20Session.trulyEnd)%3B%0A%20%20%20%20div.addEventListener(%22CheckboxStateChange%22%2C%20CfgWindow.check)%3B%0A%20%20%20%20div.addEventListener(%22click%22%2C%20CfgWindow.check)%3B%0A%7D%3B%0ACfgWindow.check%20%3D%20function(e)%20%7B%0A%20%20%20%20let%20node%20%3D%20Dom.upThenDown(e.target%2C%20%22p%22%2C%20%22input%22)%3B%0A%20%20%20%20if%20(node%20!%3D%20e.target)%20%7B%0A%20%20%20%20%20%20%20%20node.checked%20%3D%20!node.checked%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(node.checked)%20%7B%0A%20%20%20%20%20%20%20%20todo%20%7C%3D%20Number.parseInt(node.value)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20todo%20%26%3D%20~Number.parseInt(node.value)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Settings.setValue(SETTINGS_KEY%2C%20todo)%3B%0A%7D%3B%0ACfgWindow.prototype.init%20%3D%20function(div)%20%7B%0A%20%20%20%20let%20boxes%20%3D%20div.querySelectorAll(%22input%22)%3B%0A%20%20%20%20if%20(boxes.length%20%3D%3D%3D%204)%20%7B%0A%20%20%20%20%20%20%20%20boxes%5B0%5D.checked%20%3D%20(todo%20%26%20EXPAND_POST)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B1%5D.checked%20%3D%20(todo%20%26%20EXPAND_COMMENTS)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B2%5D.checked%20%3D%20(todo%20%26%20EXPAND_REPLIES)%20!%3D%200%3B%0A%20%20%20%20%20%20%20%20boxes%5B3%5D.checked%20%3D%20(todo%20%26%20EXPAND_FILTER)%20!%3D%200%3B%0A%20%20%20%20%7D%0A%7D%3B%0ACfgWindow.showIt%20%3D%20function()%20%7B%0A%20%20%20%20Global.logger.hide()%3B%0A%20%20%20%20Global.cfg%20%3D%20new%20CfgWindow()%3B%0A%20%20%20%20Global.cfg.show()%3B%0A%7D%3B%0A%0Afunction%20LogWindow()%20%7B%0A%20%20%20%20this.id%20%3D%20%22log-window%22%3B%0A%20%20%20%20this.timeouts%20%3D%200%3B%0A%20%20%20%20this.phantoms%20%3D%200%3B%0A%20%20%20%20this.edit%20%3D%20null%3B%0A%7D%0ALogWindow.prototype%20%3D%20Object.create(BaseWindow.prototype)%3B%0ALogWindow.prototype.create%20%3D%20function(div)%20%7B%0A%20%20%20%20this.edit%20%3D%20document.createElement(%22textarea%22)%3B%0A%20%20%20%20this.edit.style.width%20%3D%20%22100%25%22%3B%0A%20%20%20%20this.edit.style.height%20%3D%20%22100%25%22%3B%0A%20%20%20%20this.edit.style.color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20this.edit.style.backgroundColor%20%3D%20%22%23425f9c%22%3B%0A%20%20%20%20div.appendChild(this.edit)%3B%0A%7D%3B%0ALogWindow.prototype.hide%20%3D%20function()%20%7B%0A%20%20%20%20BaseWindow.prototype.hide.call(this)%3B%0A%20%20%20%20this.edit%20%3D%20null%3B%0A%7D%3B%0ALogWindow.prototype.log%20%3D%20function(s)%20%7B%0A%20%20%20%20console.log(s)%3B%0A%20%20%20%20if%20(this.edit)%20%7B%0A%20%20%20%20%20%20%20%20this.edit.value%20%3D%20s%20%2B%20%22%5Cn%22%20%2B%20this.edit.value%3B%0A%20%20%20%20%7D%0A%7D%3B%0ALogWindow.prototype.timeout%20%3D%20function()%20%7B%0A%20%20%20%20this.timeouts%2B%2B%3B%0A%7D%3B%0ALogWindow.prototype.phantom%20%3D%20function()%20%7B%0A%20%20%20%20this.phantoms%2B%2B%3B%0A%7D%3B%0ALogWindow.prototype.counts%20%3D%20function()%20%7B%0A%20%20%20%20if%20(this.timeouts%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.log(this.timeouts%20%2B%20%22%20timeout(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(this.phantoms%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.log(this.phantoms%20%2B%20%22%20phantom(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.log(%22Responses%20%3D%20%22%20%2B%20Global.root.queryAll(RESPONSE_COUNTER).length)%3B%0A%7D%3B%0A%0Afunction%20Root()%20%7B%0A%20%20%20%20this.rootNode%20%3D%20document.body%3B%0A%20%20%20%20this.usingBody%20%3D%20true%3B%0A%7D%0ARoot.removeOverlay%20%3D%20function()%20%7B%0A%20%20%20%20document.querySelectorAll(CSS_LOGIN_STUFF).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Removing%20overlay%20stuff%22)%3B%0A%20%20%20%20%20%20%20%20item.parentNode.removeChild(item)%3B%0A%20%20%20%20%7D)%3B%0A%7D%3B%0ARoot.prototype.query%20%3D%20function(s)%20%7B%0A%20%20%20%20return%20this.rootNode.querySelector(s)%3B%0A%7D%3B%0ARoot.prototype.queryAll%20%3D%20function(s)%20%7B%0A%20%20%20%20return%20this.rootNode.querySelectorAll(s)%3B%0A%7D%3B%0ARoot.prototype.determine%20%3D%20function()%20%7B%0A%20%20%20%20const%20EXPANDING%20%3D%20%22Expanding%3A%20%22%3B%0A%20%20%20%20const%20div%20%3D%20Dom.findFirstVisible(document.querySelectorAll(POST_ARTICLE))%3B%0A%20%20%20%20if%20(!!div)%20%7B%0A%20%20%20%20%20%20%20%20let%20canPost%20%3D%20!!document.querySelector(POST_ACTION)%3B%0A%20%20%20%20%20%20%20%20let%20topOnly%20%3D%20!canPost%3B%0A%20%20%20%20%20%20%20%20if%20(topOnly)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20topOnly%20%3D%20Dom.filterHidden(document.querySelectorAll(%22%5Brole%3D%5C%22navigation%5C%22%5D%22)).length%20%3D%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20topOnly%20%3D%20Dom.filterHidden(document.querySelectorAll(%22%5Brole%3D%5C%22feed%5C%22%5D%22)).length%20%3E%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(topOnly)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(EXPANDING%20%2B%20%22Topmost%20post%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rootNode%20%3D%20div.parentNode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.usingBody%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(!this.usingBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20USE_PARENT%20%3D%20true%3B%0A%20%20%20%20let%20check%20%3D%20%5B%5D%3B%0A%20%20%20%20check.push(%5B%22.uiStreamStory%22%2C%20%22Video%20comments%20on%20right%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22div.rhcScroller%20.uiScrollableAreaContent%22%2C%20%22Theater%20mode%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22.uiLayer%3Anot(.hidden_elem)%22%2C%20%22Overlaid%20post%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22.permalinkPost%22%2C%20%22Permalinked%20post%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Bdata-pagelet%3D%5C%22TahoeRightRail%5C%22%5D%22%2C%20%22Full-browser%20video%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5BFS_ARTICLE%2C%20%22Full-browser%22%2C%20USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Brole%3D%5C%22main%5C%22%5D%22%2C%20%22Main%20content%20area%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.push(%5B%22%5Brole%3D%5C%22feed%5C%22%5D%22%2C%20%22Feed%22%2C%20!USE_PARENT%5D)%3B%0A%20%20%20%20check.find(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20divs%20%3D%20Dom.filterHidden(document.querySelectorAll(item%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20let%20div%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(divs.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20divs%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(divs.length%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20divs%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!!div)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(EXPANDING%20%2B%20item%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(item%5B2%5D%20%3D%3D%20USE_PARENT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div%20%3D%20div.parentNode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rootNode%20%3D%20div%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.usingBody%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%7D%3B%0ARoot.prototype.getRoot%20%3D%20function()%20%7B%0A%20%20%20%20return%20this.rootNode%3B%0A%7D%3B%0ARoot.prototype.getResponseCount%20%3D%20function()%20%7B%0A%20%20%20%20return%20getResponseCount(this.rootNode)%3B%0A%7D%3B%0ARoot.prototype.getContentSize%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20this.rootNode.scrollHeight%3B%0A%20%20%20%20result%20%2B%3D%20this.getResponseCount()%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.isClassicVideo%20%3D%20function()%20%7B%0A%20%20%20%20const%20result%20%3D%20!!document.querySelector(%22.uiStreamStory%22)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prepIfClassicVideo%20%3D%20function(onDone)%20%7B%0A%20%20%20%20let%20wait%20%3D%200%3B%0A%20%20%20%20if%20(Root.isClassicVideo())%20%7B%0A%20%20%20%20%20%20%20%20const%20links%20%3D%20document.querySelectorAll(SHOW_COMMENTS)%3B%0A%20%20%20%20%20%20%20%20if%20(links.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Global.log(%22Making%20sure%20video%20comments%20are%20showing%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20links%5Blinks.length%20-%201%5D.click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20wait%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(onDone)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(onDone%2C%20wait)%3B%0A%20%20%20%20%7D%0A%7D%3B%0ARoot.prototype.isFullBrowserNew%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20!!Global.root.query(FS_ARTICLE)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prototype.isSearchResults%20%3D%20function()%20%7B%0A%20%20%20%20let%20result%20%3D%20!!Global.root.query(%22%23pagelet_group_search%2C.p8dawk7l%5Brole%3D%5C%22presentation%5C%22%5D%22)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ARoot.prototype.countPosts%20%3D%20function()%20%7B%0A%20%20%20%20if%20(Root.isClassicVideo())%20%7B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(POST_ROOT))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(POST_ROOT))%3B%0A%20%20%20%20return%20filter.length%3B%0A%7D%3B%0A%0Afunction%20Dom()%20%7B%7D%0Anew%20Dom()%3B%0ADom.getStyle%20%3D%20function(node)%20%7B%0A%20%20%20%20return%20node.ownerDocument.defaultView.getComputedStyle(node%2C%20null)%3B%0A%7D%3B%0ADom.isHidden%20%3D%20function(node)%20%7B%0A%20%20%20%20while%20(node%20%26%26%20node.ownerDocument)%20%7B%0A%20%20%20%20%20%20%20%20if%20(Dom.getStyle(node)%5B%22display%22%5D%20%3D%3D%20%22none%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20node%20%3D%20node.parentNode%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%3B%0A%7D%3B%0ADom.filterHidden%20%3D%20function(nodes)%20%7B%0A%20%20%20%20let%20result%20%3D%20%5B%5D%3B%0A%20%20%20%20nodes.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!Dom.isHidden(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.push(item)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20result%3B%0A%7D%3B%0ADom.findFirstVisible%20%3D%20function(nodes)%20%7B%0A%20%20%20%20let%20filtered%20%3D%20Dom.filterHidden(nodes)%3B%0A%20%20%20%20return%20filtered.length%20%3E%3D%201%20%3F%20filtered%5B0%5D%20%3A%20null%3B%0A%7D%3B%0ADom.dumpAncestors%20%3D%20function(node)%20%7B%0A%20%20%20%20while%20(node)%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20node.nodeName%3B%0A%20%20%20%20%20%20%20%20if%20(node.id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20id%3D%5C%22%22%20%2B%20node.id%20%2B%20%22%5C%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(node.className)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20class%3D%5C%22%22%20%2B%20node.className%20%2B%20%22%5C%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(Dom.isHidden(node))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20%22%20hidden%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20Global.log(s)%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20node.parentNode%3B%0A%20%20%20%20%7D%0A%7D%3B%0ADom.upThenDown%20%3D%20function(node%2C%20ancestor%2C%20descendant)%20%7B%0A%20%20%20%20const%20item%20%3D%20node.parentNode.closest(ancestor)%3B%0A%20%20%20%20if%20(item)%20%7B%0A%20%20%20%20%20%20%20%20return%20item.querySelector(descendant)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20null%3B%0A%7D%3B%0A%0Afunction%20getResponseCount(item)%20%7B%0A%20%20%20%20return%20item.querySelectorAll(RESPONSE_COUNTER).length%3B%0A%7D%0A%0Afunction%20closeShareReport(onDone)%20%7B%0A%20%20%20%20const%20nodes%20%3D%20document.querySelectorAll(%22.sx_1ea4e0%2C.sx_ecfa40%2C.sx_1564cf%2C.sx_4564fd%2C.sx_4cbb0f%22)%3B%0A%20%20%20%20if%20(nodes.length%20%3D%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20const%20close%20%3D%20nodes%5B0%5D.closest(%22.thwo4zme%5Brole%3D%5C%22button%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20if%20(close)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20close.click()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(onDone)%20onDone()%3B%0A%7D%0A%0Afunction%20ensureCommentsShowing(onDone)%20%7B%0A%20%20%20%20if%20(Global.root.isSearchResults())%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22You%20must%20manually%20drill%20down%20into%20a%20search%20result.%22)%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20%5B%5D%3B%0A%20%20%20%20const%20n%20%3D%20Global.root.countPosts()%3B%0A%20%20%20%20if%20(n%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Examining%20%22%20%2B%20n%20%2B%20%22%20posts%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.root.queryAll(POST_ROOT).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!item.querySelector(POST_ROOT))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20link%20%3D%20item.querySelector(SHOW_COMMENTS)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(link%20%26%26%20!item.querySelector(SINGLE_COMMENT_AREA))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter.push(link)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Showing%20comment%20area%20for%20%22%20%2B%20filter.length%20%2B%20%22%20post(s)%22)%3B%0A%20%20%20%20%20%20%20%20clickAndWait(_NONE%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20ensureCommentsShowingNew(onDone)%20%7B%0A%20%20%20%20let%20filter%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20selector%20%3D%20%22.tvmbv18p%22%3B%0A%20%20%20%20if%20(Global.root.isFullBrowserNew())%20%7B%0A%20%20%20%20%20%20%20%20selector%20%3D%20%22%5Bclass%3D%5C%22cwj9ozl2%5C%22%5D%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.root.queryAll(POST_ROOT).forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!item.querySelector(selector))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20link%20%3D%20item.querySelector(%22.gtad4xkn%3Afirst-child%20.auili1gw%5Brole%3D%5C%22button%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(link%20%26%26%20link.textContent.indexOf(%22%20Share%22)%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filter.push(link)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Showing%20comment%20area%20for%20%22%20%2B%20filter.length%20%2B%20%22%20post(s)%22)%3B%0A%20%20%20%20%20%20%20%20clickAndWait(_NONE%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20isNewWindow(link)%20%7B%0A%20%20%20%20return%20!!link.querySelector(%22a%5Btarget%5D%5Bhref%5D%22)%3B%0A%7D%0A%0Afunction%20newWindowNow(link)%20%7B%0A%20%20%20%20const%20anchor%20%3D%20link.querySelector(%22a%5Btarget%5D%5Bhref%5D%22)%3B%0A%20%20%20%20Global.log(%22New%20window%3A%20%22%20%2B%20anchor.textContent)%3B%0A%20%20%20%20if%20(!window.open(anchor.getAttribute(%22href%22)%2C%20anchor.getAttribute(%22target%22)))%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22New%20window%20was%20blocked!%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20clickClass(value%2C%20onDone)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(value)).filter(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20BASE_SEE_MORE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(item.parentNode.closest(%22.groupsSideMargin%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Dom.isHidden(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20SEE_MORE_NEW)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!!item.childElementCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20full%20%3D%20item.parentNode.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20link%20%3D%20item.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(full.charAt(full.length%20-%20link.length%20-%202)%20%3D%3D%20%22%5Cu2026%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20EXPOSE_CONTENT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isNewWindow(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newWindowNow(item)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20filter.length%3B%0A%7D%0A%0Afunction%20doNotWait(value)%20%7B%0A%20%20%20%20return%20%5BCSS_SEE_MORE%2C%20SEE_MORE_NEW%2C%20BASE_SEE_MORE%2C%20EXPOSE_CONTENT%5D.indexOf(value)%20%3E%3D%200%3B%0A%7D%0A%0Afunction%20commentsOrReplies(comments%2C%20onDone)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20filter%20%3D%20Array.from(Global.root.queryAll(GET_MORE_ANYTHING))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(%22%5Brole%3D%5C%22img%5C%22%5D%22))%3B%0A%20%20%20%20if%20(comments)%20%7B%0A%20%20%20%20%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!item.querySelector(GET_REPLIES_ONLY))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20!!item.querySelector(GET_REPLIES_ONLY))%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(filter.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(comments%20%3F%20_COMMENTS%20%3A%20_REPLIES%2C%20onDone%2C%20filter%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20getBestLabel(link)%20%7B%0A%20%20%20%20let%20label%20%3D%20link.getAttribute(%22aria-label%22)%3B%0A%20%20%20%20if%20(!label)%20%7B%0A%20%20%20%20%20%20%20%20label%20%3D%20link.textContent%3B%0A%20%20%20%20%7D%0A%20%20%20%20label%20%3D%20label.split(%22%5Cu00a0%5Cu0020%5Cu00b7%22)%5B0%5D%3B%0A%20%20%20%20const%20time%20%3D%20link.querySelector(%22._3eom%22)%3B%0A%20%20%20%20if%20(time%20%26%26%20label.endsWith(time.textContent))%20%7B%0A%20%20%20%20%20%20%20%20label%20%3D%20label.substring(0%2C%20label.length%20-%20time.textContent.length)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20label%3B%0A%7D%0A%0Afunction%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%20%7B%0A%20%20%20%20if%20(Global.escHandler.shouldAbort())%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20n%20%3D%20Global.root.getContentSize()%3B%0A%20%20%20%20Global.log(%22click%20(%22%20%2B%20(links.length%20-%20i%20-%201)%20%2B%20%22%20left)%3A%20%22%20%2B%20getBestLabel(links%5Bi%5D))%3B%0A%20%20%20%20links%5Bi%5D.click()%3B%0A%20%20%20%20if%20(value%20%3D%3D%20_NONE)%20%7B%0A%20%20%20%20%20%20%20%20n%20%3D%20Global.root.getContentSize()%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20wait%20%3D%20MAX_WAIT%3B%0A%20%20%20%20let%20time%20%3D%20WAIT_TIME%3B%0A%20%20%20%20if%20(doNotWait(value))%20%7B%0A%20%20%20%20%20%20%20%20wait%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20time%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.setTimeout(()%20%3D%3E%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20wait)%2C%20time)%3B%0A%7D%0A%0Afunction%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20wait)%20%7B%0A%20%20%20%20if%20(wait%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(Global.root.getContentSize()%20-%20n%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%20_COMMENTS%20%7C%7C%20value%20%3D%3D%20_REPLIES)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commentsOrReplies(value%20%3D%3D%20_COMMENTS%2C%20onDone)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(window.doPhantomCheck%20%26%26%20!Global.root.getRoot().contains(links%5Bi%5D))%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.phantom()%3B%0A%20%20%20%20%20%20%20%20wait%20%3D%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(wait%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20waitHelper(value%2C%20onDone%2C%20links%2C%20i%2C%20n%2C%20--wait)%2C%20WAIT_TIME)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(wait%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.timeout()%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(%2B%2Bi%20%3C%20links.length)%20%7B%0A%20%20%20%20%20%20%20%20clickAndWait(value%2C%20onDone%2C%20links%2C%20i)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce(onDone)%20%7B%0A%20%20%20%20window.responseCount%20%3D%20Global.root.getResponseCount()%3B%0A%20%20%20%20window.doPhantomCheck%20%3D%20true%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_COMMENTS)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20commentsOrReplies(true%2C%20()%20%3D%3E%20pumpOnce2(onDone))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20pumpOnce2(onDone)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce2(onDone)%20%7B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_REPLIES)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20commentsOrReplies(false%2C%20()%20%3D%3E%20pumpOnce3(onDone))%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20pumpOnce3(onDone)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20pumpOnce3(onDone)%20%7B%0A%20%20%20%20if%20(Global.root.getResponseCount()%20%3E%20window.responseCount)%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20pumpOnce(onDone)%2C%20500)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20delete%20window.doPhantomCheck%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilter(onDone)%20%7B%0A%20%20%20%20window.filters%20%3D%20Array.from(Global.root.queryAll(%22%5B%22%20%2B%20FILTER_ATTR%20%2B%20%22%5D%22)).filter(item%20%3D%3E%20item.getAttribute(FILTER_ATTR)%20!%3D%20FILTER_VALUE)%3B%0A%20%20%20%20window.filters_i%20%3D%200%3B%0A%20%20%20%20window.filters_onDone%20%3D%20onDone%3B%0A%20%20%20%20if%20(window.filters.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Changing%20%22%20%2B%20window.filters.length%20%2B%20%22%20Classic%20filter(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOne()%3B%0A%7D%0A%0Afunction%20filterOne()%20%7B%0A%20%20%20%20if%20(window.filters_i%20%3C%20window.filters.length)%20%7B%0A%20%20%20%20%20%20%20%20const%20link%20%3D%20window.filters%5Bwindow.filters_i%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20link.click()%3B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter2(link)%2C%20100)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.filters_onDone)%20window.filters_onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilter2(link)%20%7B%0A%20%20%20%20const%20menu%20%3D%20document.querySelector(%22%5Bdata-ownerid%3D%5C%22%22%20%2B%20link.id%20%2B%20%22%5C%22%5D%22)%3B%0A%20%20%20%20if%20(menu)%20%7B%0A%20%20%20%20%20%20%20%20const%20item%20%3D%20menu.querySelector(%22%5B%22%20%2B%20FILTER_ATTR%20%2B%20%22%3D%5C%22%22%20%2B%20FILTER_VALUE%20%2B%20%22%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20if%20(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20post%20%3D%20link.closest(FILTER_ROOT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter3(post%2C%2050))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20item.closest(%22a%22).click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20link.click()%3B%0A%20%20%20%20filterOne()%3B%0A%7D%0A%0Afunction%20setFilter3(post)%20%7B%0A%20%20%20%20if%20(!post.querySelector(FILTER_DONE))%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilter3(post)%2C%20200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20filterOne()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilterNew(onDone)%20%7B%0A%20%20%20%20window.filters%20%3D%20Array.from(Global.root.queryAll(FILTER_NEW))%3B%0A%20%20%20%20window.filters%20%3D%20window.filters.filter(item%20%3D%3E%20!item.closest(%22.sq6gx45u%22))%3B%0A%20%20%20%20window.filters%20%3D%20window.filters.filter(item%20%3D%3E%20!item.querySelector(%22h1%2Csvg%22))%3B%0A%20%20%20%20if%20(window.filters%20%3E%20Global.root.countPosts())%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Something%20went%20wrong%22)%3B%0A%20%20%20%20%20%20%20%20Global.log(%22Not%20checking%20%22%20%2B%20window.filters.length%20%2B%20%22%20New%20filter(s)%22)%3B%0A%20%20%20%20%20%20%20%20if%20(onDone)%20onDone%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20window.filters_i%20%3D%200%3B%0A%20%20%20%20window.filters_onDone%20%3D%20onDone%3B%0A%20%20%20%20if%20(window.filters.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20Global.log(%22Checking%20%22%20%2B%20window.filters.length%20%2B%20%22%20New%20filter(s)%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOneNew()%3B%0A%7D%0A%0Afunction%20filterOneNew()%20%7B%0A%20%20%20%20if%20(window.filters_i%20%3C%20window.filters.length)%20%7B%0A%20%20%20%20%20%20%20%20const%20link%20%3D%20window.filters%5Bwindow.filters_i%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20link.click()%3B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew2(link)%2C%20100)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.filters_onDone)%20window.filters_onDone()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20setFilterNew2(link)%20%7B%0A%20%20%20%20let%20filter%20%3D%20Array.from(document.querySelectorAll(%22.ama3r5zh%5Brole%3D%5C%22menu%5C%22%5D%2C.swg4t2nn%5Brole%3D%5C%22menu%5C%22%5D%22))%3B%0A%20%20%20%20filter%20%3D%20filter.filter(item%20%3D%3E%20item.querySelectorAll(%22%5Brole%3D%5C%22menuitem%5C%22%5D%22).length%20%3E%3D%203)%3B%0A%20%20%20%20if%20(filter.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20const%20menus%20%3D%20filter%5B0%5D.querySelectorAll(%22%5Brole%3D%5C%22menuitem%5C%22%5D%22)%3B%0A%20%20%20%20%20%20%20%20const%20span%20%3D%20menus%5B2%5D.querySelector(%22span%22)%3B%0A%20%20%20%20%20%20%20%20let%20text%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20if%20(!!span)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%20%3D%20span.textContent%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(text%20!%3D%20link.textContent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20menus%5B2%5D.click()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20post%20%3D%20link.closest(NEW_ARTICLE)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew3(post)%2C%20100)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20menus%5B0%5D.closest(%22%5Brole%3D%5C%22menu%5C%22%5D%22).outerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20filterOneNew()%3B%0A%7D%0A%0Afunction%20setFilterNew3(post)%20%7B%0A%20%20%20%20if%20(!!post.querySelector(FILTER_NEW))%20%7B%0A%20%20%20%20%20%20%20%20filterOneNew()%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20window.setTimeout(()%20%3D%3E%20setFilterNew3(post)%2C%20100)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20Actions()%20%7B%0A%20%20%20%20this.i%20%3D%200%3B%0A%20%20%20%20this.setUpActions()%3B%0A%7D%0AActions.prototype.setUpActions%20%3D%20function()%20%7B%0A%20%20%20%20this.actions%20%3D%20%5B%5D%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20Root.prepIfClassicVideo(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20ensureCommentsShowing(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20ensureCommentsShowingNew(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20closeShareReport(onDone))%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_FILTER)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20setFilter(onDone))%3B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20setFilterNew(onDone))%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(BASE_SEE_MORE%2C%20onDone))%3B%0A%20%20%20%20if%20((todo%20%26%20EXPAND_POST)%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(EXPOSE_CONTENT%2C%20onDone))%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20pumpOnce(onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(CSS_SEE_MORE%2C%20onDone))%3B%0A%20%20%20%20this.actions.push(onDone%20%3D%3E%20clickClass(SEE_MORE_NEW%2C%20onDone))%3B%0A%20%20%20%20this.actions.push(Session.endSession)%3B%0A%20%20%20%20this.actions.push(null)%3B%0A%7D%3B%0AActions.prototype.doAction%20%3D%20function()%20%7B%0A%20%20%20%20if%20(this.actions%5Bthis.i%5D%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.actions%5Bthis.i%5D(()%20%3D%3E%20window.setTimeout(bind(this%2C%20this.doAction)%2C%2050))%3B%0A%20%20%20%20%20%20%20%20this.i%2B%2B%3B%0A%20%20%20%20%7D%0A%7D%3B%0AActions.prototype.kickOff%20%3D%20function()%20%7B%0A%20%20%20%20this.i%20%3D%200%3B%0A%20%20%20%20this.doAction()%3B%0A%7D%3B%0A%0Afunction%20Session()%20%7B%7D%0ASession.init%20%3D%20function()%20%7B%0A%20%20%20%20if%20(window.Global)%20%7B%0A%20%20%20%20%20%20%20%20Global%20%3D%20window.Global%3B%0A%20%20%20%20%20%20%20%20Global.escHandler.abort(true)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20Session.kickOff()%3B%0A%20%20%20%20%7D%0A%7D%3B%0ASession.kickOff%20%3D%20function()%20%7B%0A%20%20%20%20Global%20%3D%20%7B%0A%20%20%20%20%20%20%20%20escHandler%3A%20new%20EscHandler()%2C%0A%20%20%20%20%20%20%20%20cfgHandler%3A%20new%20CfgHandler()%2C%0A%20%20%20%20%20%20%20%20logger%3A%20new%20LogWindow()%2C%0A%20%20%20%20%20%20%20%20root%3A%20new%20Root()%0A%20%20%20%20%7D%3B%0A%20%20%20%20Global.log%20%3D%20function(s)%20%7B%0A%20%20%20%20%20%20%20%20Global.logger.log(s)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20window.Global%20%3D%20Global%3B%0A%20%20%20%20Session.main()%3B%0A%7D%3B%0ASession.main%20%3D%20function()%20%7B%0A%20%20%20%20todo%20%3D%20Settings.getInt(SETTINGS_KEY%2C%20todo)%3B%0A%20%20%20%20Global.logger.show()%3B%0A%20%20%20%20Global.escHandler.on()%3B%0A%20%20%20%20Global.cfgHandler.on()%3B%0A%20%20%20%20Root.removeOverlay()%3B%0A%20%20%20%20Global.root.determine()%3B%0A%20%20%20%20Global.actions%20%3D%20new%20Actions()%3B%0A%20%20%20%20Global.actions.kickOff()%3B%0A%7D%3B%0ASession.endSession%20%3D%20function()%20%7B%0A%20%20%20%20Global.logger.counts()%3B%0A%20%20%20%20if%20(Global.cfgHandler.shouldConfig())%20%7B%0A%20%20%20%20%20%20%20%20CfgWindow.showIt()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.ending%20%3D%20true%3B%0A%20%20%20%20Global.log(%22%5BPress%20%5Cu0027s%5Cu0027%20now%20for%20Settings%5D%22)%3B%0A%20%20%20%20window.scrollTo(0%2C%200)%0A%20%20%20%20window.setTimeout(Session.maybeEnd%2C%20END_DELAY%20*%201000)%3B%0A%7D%3B%0ASession.maybeEnd%20%3D%20function()%20%7B%0A%20%20%20%20delete%20Global.ending%3B%0A%20%20%20%20if%20(!Global.cfgHandler.shouldConfig())%20%7B%0A%20%20%20%20%20%20%20%20Session.trulyEnd()%3B%0A%20%20%20%20%7D%0A%7D%3B%0ASession.trulyEnd%20%3D%20function()%20%7B%0A%20%20%20%20if%20(Global.cfg)%20%7B%0A%20%20%20%20%20%20%20%20Global.cfg.hide()%3B%0A%20%20%20%20%20%20%20%20delete%20Global.cfg%3B%0A%20%20%20%20%7D%0A%20%20%20%20Global.escHandler.off()%3B%0A%20%20%20%20Global.cfgHandler.off()%3B%0A%20%20%20%20Global.logger.hide()%3B%0A%20%20%20%20delete%20window.Global%3B%0A%20%20%20%20Global%20%3D%20null%3B%0A%20%20%20%20save()%3B%0A%7D%3B%0ASession.init()%3B%0Avar%20XLib%20%3D%20function(args)%20%7B%0A%20%20%20%20args%20%3D%20args%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%2F%2F%20LOCAL%20CHANGE%20to%20prevent%20errors%20in%20Chrome%3A%0A%20%20%20%20%2F%2F%20-%20%20!t.isImmediatePropagationStopped()%0A%20%20%20%20%2F%2F%20%2B%20%20(!t.isImmediatePropagationStopped%20%7C%7C%20!t.isImmediatePropagationStopped())%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fgithub.e-sites.nl%2Fzeptobuilder%2F%0A%20%20%20%20%2F*!%20Zepto%201.2.0%20(generated%20with%20Zepto%20Builder)%20-%20zepto%20event%20-%20zeptojs.com%2Flicense%20*%2F%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%0A%20%20%20%20%2F%2F%20%20%20%20%20(c)%202010-2016%20Thomas%20Fuchs%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%20may%20be%20freely%20distributed%20under%20the%20MIT%20license.%0A%0A%20%20%20%20%2F*%20eslint-disable%20*%2F%0A%20%20%20%20var%20Zepto%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20undefined%2C%20key%2C%20%24%2C%20classList%2C%20emptyArray%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concat%20%3D%20emptyArray.concat%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%20%3D%20emptyArray.filter%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%20%3D%20emptyArray.slice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20document%20%3D%20window.document%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20elementDisplay%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20classCache%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cssNumber%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'column-count'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'columns'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'font-weight'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'line-height'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'opacity'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'z-index'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'zoom'%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fragmentRE%20%3D%20%2F%5E%5Cs*%3C(%5Cw%2B%7C!)%5B%5E%3E%5D*%3E%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20singleTagRE%20%3D%20%2F%5E%3C(%5Cw%2B)%5Cs*%5C%2F%3F%3E(%3F%3A%3C%5C%2F%5C1%3E%7C)%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tagExpanderRE%20%3D%20%2F%3C(%3F!area%7Cbr%7Ccol%7Cembed%7Chr%7Cimg%7Cinput%7Clink%7Cmeta%7Cparam)((%5B%5Cw%3A%5D%2B)%5B%5E%3E%5D*)%5C%2F%3E%2Fig%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rootNodeRE%20%3D%20%2F%5E(%3F%3Abody%7Chtml)%24%2Fi%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capitalRE%20%3D%20%2F(%5BA-Z%5D)%2Fg%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20special%20attributes%20that%20should%20be%20get%2Fset%20via%20method%20calls%0A%20%20%20%20%20%20%20%20%20%20%20%20methodAttributes%20%3D%20%5B'val'%2C%20'css'%2C%20'html'%2C%20'text'%2C%20'data'%2C%20'width'%2C%20'height'%2C%20'offset'%5D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20adjacencyOperators%20%3D%20%5B'after'%2C%20'prepend'%2C%20'before'%2C%20'append'%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20table%20%3D%20document.createElement('table')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tableRow%20%3D%20document.createElement('tr')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20containers%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tr'%3A%20document.createElement('tbody')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tbody'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'thead'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tfoot'%3A%20table%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'td'%3A%20tableRow%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'th'%3A%20tableRow%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'*'%3A%20document.createElement('div')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20readyRE%20%3D%20%2Fcomplete%7Cloaded%7Cinteractive%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20simpleSelectorRE%20%3D%20%2F%5E%5B%5Cw-%5D*%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20class2type%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toString%20%3D%20class2type.toString%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zepto%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20camelize%2C%20uniq%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20tempParent%20%3D%20document.createElement('div')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20propMap%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'tabindex'%3A%20'tabIndex'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'readonly'%3A%20'readOnly'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'for'%3A%20'htmlFor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'class'%3A%20'className'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'maxlength'%3A%20'maxLength'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cellspacing'%3A%20'cellSpacing'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cellpadding'%3A%20'cellPadding'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'rowspan'%3A%20'rowSpan'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'colspan'%3A%20'colSpan'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'usemap'%3A%20'useMap'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'frameborder'%3A%20'frameBorder'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'contenteditable'%3A%20'contentEditable'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isArray%20%3D%20Array.isArray%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20function(object)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20object%20instanceof%20Array%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20zepto.matches%20%3D%20function(element%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector%20%7C%7C%20!element%20%7C%7C%20element.nodeType%20!%3D%3D%201)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20matchesSelector%20%3D%20element.matches%20%7C%7C%20element.webkitMatchesSelector%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.mozMatchesSelector%20%7C%7C%20element.oMatchesSelector%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.matchesSelector%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(matchesSelector)%20return%20matchesSelector.call(element%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fall%20back%20to%20performing%20a%20selector%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20match%2C%20parent%20%3D%20element.parentNode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3D%20!parent%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(temp)(parent%20%3D%20tempParent).appendChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20%3D%20~zepto.qsa(parent%2C%20selector).indexOf(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20temp%20%26%26%20tempParent.removeChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20match%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20type(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20%3D%3D%20null%20%3F%20String(obj)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20class2type%5BtoString.call(obj)%5D%20%7C%7C%20%22object%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isFunction(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20type(value)%20%3D%3D%20%22function%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isWindow(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20!%3D%20null%20%26%26%20obj%20%3D%3D%20obj.window%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isDocument(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20obj%20!%3D%20null%20%26%26%20obj.nodeType%20%3D%3D%20obj.DOCUMENT_NODE%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isObject(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20type(obj)%20%3D%3D%20%22object%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20isPlainObject(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20isObject(obj)%20%26%26%20!isWindow(obj)%20%26%26%20Object.getPrototypeOf(obj)%20%3D%3D%20Object.prototype%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20likeArray(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20length%20%3D%20!!obj%20%26%26%20'length'%20in%20obj%20%26%26%20obj.length%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20%24.type(obj)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'function'%20!%3D%20type%20%26%26%20!isWindow(obj)%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'array'%20%3D%3D%20type%20%7C%7C%20length%20%3D%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(typeof%20length%20%3D%3D%20'number'%20%26%26%20length%20%3E%200%20%26%26%20(length%20-%201)%20in%20obj)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20compact(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(array%2C%20function(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20item%20!%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20flatten(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20array.length%20%3E%200%20%3F%20%24.fn.concat.apply(%5B%5D%2C%20array)%20%3A%20array%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20camelize%20%3D%20function(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str.replace(%2F-%2B(.)%3F%2Fg%2C%20function(match%2C%20chr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20chr%20%3F%20chr.toUpperCase()%20%3A%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20dasherize(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str.replace(%2F%3A%3A%2Fg%2C%20'%2F')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F(%5BA-Z%5D%2B)(%5BA-Z%5D%5Ba-z%5D)%2Fg%2C%20'%241_%242')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F(%5Ba-z%5Cd%5D)(%5BA-Z%5D)%2Fg%2C%20'%241_%242')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%2F_%2Fg%2C%20'-')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.toLowerCase()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20uniq%20%3D%20function(array)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(array%2C%20function(item%2C%20idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20array.indexOf(item)%20%3D%3D%20idx%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20classRE(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20name%20in%20classCache%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classCache%5Bname%5D%20%3A%20(classCache%5Bname%5D%20%3D%20new%20RegExp('(%5E%7C%5C%5Cs)'%20%2B%20name%20%2B%20'(%5C%5Cs%7C%24)'))%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20maybeAddPx(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(typeof%20value%20%3D%3D%20%22number%22%20%26%26%20!cssNumber%5Bdasherize(name)%5D)%20%3F%20value%20%2B%20%22px%22%20%3A%20value%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20defaultDisplay(nodeName)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20element%2C%20display%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!elementDisplay%5BnodeName%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element%20%3D%20document.createElement(nodeName)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%20%3D%20getComputedStyle(element%2C%20'').getPropertyValue(%22display%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.parentNode.removeChild(element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%20%3D%3D%20%22none%22%20%26%26%20(display%20%3D%20%22block%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elementDisplay%5BnodeName%5D%20%3D%20display%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20elementDisplay%5BnodeName%5D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20children(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'children'%20in%20element%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20slice.call(element.children)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.map(element.childNodes%2C%20function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node.nodeType%20%3D%3D%201)%20return%20node%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20Z(dom%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20len%20%3D%20dom%20%3F%20dom.length%20%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%20this%5Bi%5D%20%3D%20dom%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.length%20%3D%20len%0A%20%20%20%20%20%20%20%20%20%20%20%20this.selector%20%3D%20selector%20%7C%7C%20''%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.fragment%60%20takes%20a%20html%20string%20and%20an%20optional%20tag%20name%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20generate%20DOM%20nodes%20from%20the%20given%20html%20string.%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20generated%20DOM%20nodes%20are%20returned%20as%20an%20array.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20function%20can%20be%20overridden%20in%20plugins%20for%20example%20to%20make%0A%20%20%20%20%20%20%20%20%2F%2F%20it%20compatible%20with%20browsers%20that%20don't%20support%20the%20DOM%20fully.%0A%20%20%20%20%20%20%20%20zepto.fragment%20%3D%20function(html%2C%20name%2C%20properties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%2C%20nodes%2C%20container%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20special%20case%20optimization%20for%20a%20single%20tag%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(singleTagRE.test(html))%20dom%20%3D%20%24(document.createElement(RegExp.%241))%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!dom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(html.replace)%20html%20%3D%20html.replace(tagExpanderRE%2C%20%22%3C%241%3E%3C%2F%242%3E%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20undefined)%20name%20%3D%20fragmentRE.test(html)%20%26%26%20RegExp.%241%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!(name%20in%20containers))%20name%20%3D%20'*'%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container%20%3D%20containers%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.innerHTML%20%3D%20''%20%2B%20html%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20%24.each(slice.call(container.childNodes)%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.removeChild(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isPlainObject(properties))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20%24(dom)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(properties%2C%20function(key%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(methodAttributes.indexOf(key)%20%3E%20-1)%20nodes%5Bkey%5D(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20nodes.attr(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20dom%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.Z%60%20swaps%20out%20the%20prototype%20of%20the%20given%20%60dom%60%20array%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20nodes%20with%20%60%24.fn%60%20and%20thus%20supplying%20all%20the%20Zepto%20functions%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20the%20array.%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.Z%20%3D%20function(dom%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20Z(dom%2C%20selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.isZ%60%20should%20return%20%60true%60%20if%20the%20given%20object%20is%20a%20Zepto%0A%20%20%20%20%20%20%20%20%2F%2F%20collection.%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.isZ%20%3D%20function(object)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20object%20instanceof%20zepto.Z%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.init%60%20is%20Zepto's%20counterpart%20to%20jQuery's%20%60%24.fn.init%60%20and%0A%20%20%20%20%20%20%20%20%2F%2F%20takes%20a%20CSS%20selector%20and%20an%20optional%20context%20(and%20handles%20various%0A%20%20%20%20%20%20%20%20%2F%2F%20special%20cases).%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.init%20%3D%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20nothing%20given%2C%20return%20an%20empty%20Zepto%20collection%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector)%20return%20zepto.Z()%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Optimize%20for%20string%20selectors%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20selector%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20selector%20%3D%20selector.trim()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20html%20fragment%2C%20create%20nodes%20from%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In%20both%20Chrome%2021%20and%20Firefox%2015%2C%20DOM%20error%2012%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20is%20thrown%20if%20the%20fragment%20doesn't%20begin%20with%20%3C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(selector%5B0%5D%20%3D%3D%20'%3C'%20%26%26%20fragmentRE.test(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20zepto.fragment(selector%2C%20RegExp.%241%2C%20context)%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20there's%20a%20context%2C%20create%20a%20collection%20on%20that%20context%20first%2C%20and%20select%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20nodes%20from%20there%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(context%20!%3D%3D%20undefined)%20return%20%24(context).find(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20CSS%20selector%2C%20use%20it%20to%20select%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20dom%20%3D%20zepto.qsa(document%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20function%20is%20given%2C%20call%20it%20when%20the%20DOM%20is%20ready%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(isFunction(selector))%20return%20%24(document).ready(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20a%20Zepto%20collection%20is%20given%2C%20just%20return%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(zepto.isZ(selector))%20return%20selector%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20normalize%20array%20if%20an%20array%20of%20nodes%20is%20given%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isArray(selector))%20dom%20%3D%20compact(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wrap%20DOM%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(isObject(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20%5Bselector%5D%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20it's%20a%20html%20fragment%2C%20create%20nodes%20from%20it%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(fragmentRE.test(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20zepto.fragment(selector.trim()%2C%20RegExp.%241%2C%20context)%2C%20selector%20%3D%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20there's%20a%20context%2C%20create%20a%20collection%20on%20that%20context%20first%2C%20and%20select%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20nodes%20from%20there%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(context%20!%3D%3D%20undefined)%20return%20%24(context).find(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20And%20last%20but%20no%20least%2C%20if%20it's%20a%20CSS%20selector%2C%20use%20it%20to%20select%20nodes.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20dom%20%3D%20zepto.qsa(document%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20create%20a%20new%20Zepto%20collection%20from%20the%20nodes%20found%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.Z(dom%2C%20selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24%60%20will%20be%20the%20base%20%60Zepto%60%20object.%20When%20calling%20this%0A%20%20%20%20%20%20%20%20%2F%2F%20function%20just%20call%20%60%24.zepto.init%2C%20which%20makes%20the%20implementation%0A%20%20%20%20%20%20%20%20%2F%2F%20details%20of%20selecting%20nodes%20and%20creating%20Zepto%20collections%0A%20%20%20%20%20%20%20%20%2F%2F%20patchable%20in%20plugins.%0A%20%20%20%20%20%20%20%20%24%20%3D%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.init(selector%2C%20context)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20extend(target%2C%20source%2C%20deep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(deep%20%26%26%20(isPlainObject(source%5Bkey%5D)%20%7C%7C%20isArray(source%5Bkey%5D)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isPlainObject(source%5Bkey%5D)%20%26%26%20!isPlainObject(target%5Bkey%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5Bkey%5D%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isArray(source%5Bkey%5D)%20%26%26%20!isArray(target%5Bkey%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5Bkey%5D%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20extend(target%5Bkey%5D%2C%20source%5Bkey%5D%2C%20deep)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(source%5Bkey%5D%20!%3D%3D%20undefined)%20target%5Bkey%5D%20%3D%20source%5Bkey%5D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Copy%20all%20but%20undefined%20properties%20from%20one%20or%20more%0A%20%20%20%20%20%20%20%20%2F%2F%20objects%20to%20the%20%60target%60%20object.%0A%20%20%20%20%20%20%20%20%24.extend%20%3D%20function(target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20deep%2C%20args%20%3D%20slice.call(arguments%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20target%20%3D%3D%20'boolean')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deep%20%3D%20target%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20args.shift()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20args.forEach(function(arg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20extend(target%2C%20arg%2C%20deep)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20target%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%60%24.zepto.qsa%60%20is%20Zepto's%20CSS%20selector%20implementation%20which%0A%20%20%20%20%20%20%20%20%2F%2F%20uses%20%60document.querySelectorAll%60%20and%20optimizes%20for%20some%20special%20cases%2C%20like%20%60%23id%60.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20method%20can%20be%20overridden%20in%20plugins.%0A%20%20%20%20%20%20%20%20zepto.qsa%20%3D%20function(element%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20found%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeID%20%3D%20selector%5B0%5D%20%3D%3D%20'%23'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeClass%20%3D%20!maybeID%20%26%26%20selector%5B0%5D%20%3D%3D%20'.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nameOnly%20%3D%20maybeID%20%7C%7C%20maybeClass%20%3F%20selector.slice(1)%20%3A%20selector%2C%20%2F%2F%20Ensure%20that%20a%201%20char%20tag%20name%20still%20gets%20checked%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isSimple%20%3D%20simpleSelectorRE.test(nameOnly)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(element.getElementById%20%26%26%20isSimple%20%26%26%20maybeID)%20%3F%20%2F%2F%20Safari%20DocumentFragment%20doesn't%20have%20getElementById%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20((found%20%3D%20element.getElementById(nameOnly))%20%3F%20%5Bfound%5D%20%3A%20%5B%5D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(element.nodeType%20!%3D%3D%201%20%26%26%20element.nodeType%20!%3D%3D%209%20%26%26%20element.nodeType%20!%3D%3D%2011)%20%3F%20%5B%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20slice.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isSimple%20%26%26%20!maybeID%20%26%26%20element.getElementsByClassName%20%3F%20%2F%2F%20DocumentFragment%20doesn't%20have%20getElementsByClassName%2FTagName%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maybeClass%20%3F%20element.getElementsByClassName(nameOnly)%20%3A%20%2F%2F%20If%20it's%20simple%2C%20it%20could%20be%20a%20class%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.getElementsByTagName(selector)%20%3A%20%2F%2F%20Or%20a%20tag%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.querySelectorAll(selector)%20%2F%2F%20Or%20it's%20not%20simple%2C%20and%20we%20need%20to%20query%20all%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20filtered(nodes%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20selector%20%3D%3D%20null%20%3F%20%24(nodes)%20%3A%20%24(nodes).filter(selector)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.contains%20%3D%20document.documentElement.contains%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20function(parent%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20parent%20!%3D%3D%20node%20%26%26%20parent.contains(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20function(parent%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%26%26%20(node%20%3D%20node.parentNode))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node%20%3D%3D%3D%20parent)%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20funcArg(context%2C%20arg%2C%20idx%2C%20payload)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20isFunction(arg)%20%3F%20arg.call(context%2C%20idx%2C%20payload)%20%3A%20arg%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20setAttribute(node%2C%20name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20null%20%3F%20node.removeAttribute(name)%20%3A%20node.setAttribute(name%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20access%20className%20property%20while%20respecting%20SVGAnimatedString%0A%20%20%20%20%20%20%20%20function%20className(node%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20klass%20%3D%20node.className%20%7C%7C%20''%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3D%20klass%20%26%26%20klass.baseVal%20!%3D%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20svg%20%3F%20klass.baseVal%20%3A%20klass%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%20%3F%20(klass.baseVal%20%3D%20value)%20%3A%20(node.className%20%3D%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20%22true%22%20%20%3D%3E%20true%0A%20%20%20%20%20%20%20%20%2F%2F%20%22false%22%20%3D%3E%20false%0A%20%20%20%20%20%20%20%20%2F%2F%20%22null%22%20%20%3D%3E%20null%0A%20%20%20%20%20%20%20%20%2F%2F%20%2242%22%20%20%20%20%3D%3E%2042%0A%20%20%20%20%20%20%20%20%2F%2F%20%2242.5%22%20%20%3D%3E%2042.5%0A%20%20%20%20%20%20%20%20%2F%2F%20%2208%22%20%20%20%20%3D%3E%20%2208%22%0A%20%20%20%20%20%20%20%20%2F%2F%20JSON%20%20%20%20%3D%3E%20parse%20if%20valid%0A%20%20%20%20%20%20%20%20%2F%2F%20String%20%20%3D%3E%20self%0A%20%20%20%20%20%20%20%20function%20deserializeValue(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20%22true%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(value%20%3D%3D%20%22false%22%20%3F%20false%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%3D%20%22null%22%20%3F%20null%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Bvalue%20%2B%20%22%22%20%3D%3D%20value%20%3F%20%2Bvalue%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%5E%5B%5C%5B%5C%7B%5D%2F.test(value)%20%3F%20%24.parseJSON(value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.type%20%3D%20type%0A%20%20%20%20%20%20%20%20%24.isFunction%20%3D%20isFunction%0A%20%20%20%20%20%20%20%20%24.isWindow%20%3D%20isWindow%0A%20%20%20%20%20%20%20%20%24.isArray%20%3D%20isArray%0A%20%20%20%20%20%20%20%20%24.isPlainObject%20%3D%20isPlainObject%0A%0A%20%20%20%20%20%20%20%20%24.isEmptyObject%20%3D%20function(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(name%20in%20obj)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.isNumeric%20%3D%20function(val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20num%20%3D%20Number(val)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20typeof%20val%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20val%20!%3D%20null%20%26%26%20type%20!%3D%20'boolean'%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(type%20!%3D%20'string'%20%7C%7C%20val.length)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20!isNaN(num)%20%26%26%20isFinite(num)%20%7C%7C%20false%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.inArray%20%3D%20function(elem%2C%20array%2C%20i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.indexOf.call(array%2C%20elem%2C%20i)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.camelCase%20%3D%20camelize%0A%20%20%20%20%20%20%20%20%24.trim%20%3D%20function(str)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%20%3D%3D%20null%20%3F%20%22%22%20%3A%20String.prototype.trim.call(str)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20plugin%20compatibility%0A%20%20%20%20%20%20%20%20%24.uuid%20%3D%200%0A%20%20%20%20%20%20%20%20%24.support%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%24.expr%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%24.noop%20%3D%20function()%20%7B%7D%0A%0A%20%20%20%20%20%20%20%20%24.map%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20value%2C%20values%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i%2C%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(likeArray(elements))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20elements.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20callback(elements%5Bi%5D%2C%20i)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20!%3D%20null)%20values.push(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20elements)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20callback(elements%5Bkey%5D%2C%20key)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20!%3D%20null)%20values.push(value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flatten(values)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.each%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(likeArray(elements))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20elements.length%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback.call(elements%5Bi%5D%2C%20i%2C%20elements%5Bi%5D)%20%3D%3D%3D%20false)%20return%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20elements)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback.call(elements%5Bkey%5D%2C%20key%2C%20elements%5Bkey%5D)%20%3D%3D%3D%20false)%20return%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20elements%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.grep%20%3D%20function(elements%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(elements%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(window.JSON)%20%24.parseJSON%20%3D%20JSON.parse%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Populate%20the%20class2type%20map%0A%20%20%20%20%20%20%20%20%24.each(%22Boolean%20Number%20String%20Function%20Array%20Date%20RegExp%20Object%20Error%22.split(%22%20%22)%2C%20function(i%2C%20name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20class2type%5B%22%5Bobject%20%22%20%2B%20name%20%2B%20%22%5D%22%5D%20%3D%20name.toLowerCase()%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20methods%20that%20will%20be%20available%20on%20all%0A%20%20%20%20%20%20%20%20%2F%2F%20Zepto%20collections%0A%20%20%20%20%20%20%20%20%24.fn%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20constructor%3A%20zepto.Z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20length%3A%200%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Because%20a%20collection%20acts%20like%20an%20array%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20copy%20over%20these%20useful%20array%20functions.%0A%20%20%20%20%20%20%20%20%20%20%20%20forEach%3A%20emptyArray.forEach%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20reduce%3A%20emptyArray.reduce%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20push%3A%20emptyArray.push%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sort%3A%20emptyArray.sort%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20splice%3A%20emptyArray.splice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20indexOf%3A%20emptyArray.indexOf%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20concat%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20i%2C%20value%2C%20args%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20arguments%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%5Bi%5D%20%3D%20zepto.isZ(value)%20%3F%20value.toArray()%20%3A%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20concat.apply(zepto.isZ(this)%20%3F%20this.toArray()%20%3A%20this%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60map%60%20and%20%60slice%60%20in%20the%20jQuery%20API%20work%20differently%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20from%20their%20array%20counterparts%0A%20%20%20%20%20%20%20%20%20%20%20%20map%3A%20function(fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(%24.map(this%2C%20function(el%2C%20i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn.call(el%2C%20i%2C%20el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(slice.apply(this%2C%20arguments))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20ready%3A%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20check%20if%20document.body%20exists%20for%20IE%20as%20that%20browser%20reports%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20document%20ready%20when%20it%20hasn't%20yet%20created%20the%20body%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(readyRE.test(document.readyState)%20%26%26%20document.body)%20callback(%24)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20document.addEventListener('DOMContentLoaded'%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(%24)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20get%3A%20function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20idx%20%3D%3D%3D%20undefined%20%3F%20slice.call(this)%20%3A%20this%5Bidx%20%3E%3D%200%20%3F%20idx%20%3A%20idx%20%2B%20this.length%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toArray%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.get()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20size%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.length%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20remove%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.parentNode%20!%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.parentNode.removeChild(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20each%3A%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20emptyArray.every.call(this%2C%20function(el%2C%20idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback.call(el%2C%20idx%2C%20el)%20!%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(selector))%20return%20this.not(this.not(selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(filter.call(this%2C%20function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.matches(element%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20add%3A%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(uniq(this.concat(%24(selector%2C%20context))))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20is%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.length%20%3E%200%20%26%26%20zepto.matches(this%5B0%5D%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20not%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nodes%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(selector)%20%26%26%20selector.call%20!%3D%3D%20undefined)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector.call(this%2C%20idx))%20nodes.push(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20excludes%20%3D%20typeof%20selector%20%3D%3D%20'string'%20%3F%20this.filter(selector)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(likeArray(selector)%20%26%26%20isFunction(selector.item))%20%3F%20slice.call(selector)%20%3A%20%24(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.forEach(function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(excludes.indexOf(el)%20%3C%200)%20nodes.push(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(nodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20has%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20isObject(selector)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.contains(this%2C%20selector)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).find(selector).size()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20eq%3A%20function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20idx%20%3D%3D%3D%20-1%20%3F%20this.slice(idx)%20%3A%20this.slice(idx%2C%20%2Bidx%20%2B%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20first%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%20%26%26%20!isObject(el)%20%3F%20el%20%3A%20%24(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20last%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20this%5Bthis.length%20-%201%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%20%26%26%20!isObject(el)%20%3F%20el%20%3A%20%24(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20find%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%2C%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!selector)%20result%20%3D%20%24()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20selector%20%3D%3D%20'object')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20%24(selector).filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20node%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.some.call(%24this%2C%20function(parent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.contains(parent%2C%20node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(this.length%20%3D%3D%201)%20result%20%3D%20%24(zepto.qsa(this%5B0%5D%2C%20selector))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20result%20%3D%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20zepto.qsa(this%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20closest%3A%20function(selector%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nodes%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collection%20%3D%20typeof%20selector%20%3D%3D%20'object'%20%26%26%20%24(selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(_%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%26%26%20!(collection%20%3F%20collection.indexOf(node)%20%3E%3D%200%20%3A%20zepto.matches(node%2C%20selector)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20node%20!%3D%3D%20context%20%26%26%20!isDocument(node)%20%26%26%20node.parentNode%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(node%20%26%26%20nodes.indexOf(node)%20%3C%200)%20nodes.push(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(nodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parents%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20ancestors%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(nodes.length%20%3E%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes%20%3D%20%24.map(nodes%2C%20function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20((node%20%3D%20node.parentNode)%20%26%26%20!isDocument(node)%20%26%26%20ancestors.indexOf(node)%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ancestors.push(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20node%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(ancestors%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(uniq(this.pluck('parentNode'))%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20children%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20children(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20contents%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.contentDocument%20%7C%7C%20slice.call(this.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20siblings%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filtered(this.map(function(i%2C%20el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20filter.call(children(el.parentNode)%2C%20function(child)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20child%20!%3D%3D%20el%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20empty%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.innerHTML%20%3D%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60pluck%60%20is%20borrowed%20from%20Prototype.js%0A%20%20%20%20%20%20%20%20%20%20%20%20pluck%3A%20function(property)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.map(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20el%5Bproperty%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20show%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.display%20%3D%3D%20%22none%22%20%26%26%20(this.style.display%20%3D%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(getComputedStyle(this%2C%20'').getPropertyValue(%22display%22)%20%3D%3D%20%22none%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.display%20%3D%20defaultDisplay(this.nodeName)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20replaceWith%3A%20function(newContent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.before(newContent).remove()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrap%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20func%20%3D%20isFunction(structure)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this%5B0%5D%20%26%26%20!func)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20dom%20%3D%20%24(structure).get(0)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clone%20%3D%20dom.parentNode%20%7C%7C%20this.length%20%3E%201%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).wrapAll(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func%20%3F%20structure.call(this%2C%20index)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clone%20%3F%20dom.cloneNode(true)%20%3A%20dom%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapAll%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this%5B0%5D).before(structure%20%3D%20%24(structure))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20children%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20drill%20down%20to%20the%20inmost%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20((children%20%3D%20structure.children()).length)%20structure%20%3D%20children.first()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(structure).append(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20wrapInner%3A%20function(structure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20func%20%3D%20isFunction(structure)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20self%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contents%20%3D%20self.contents()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dom%20%3D%20func%20%3F%20structure.call(this%2C%20index)%20%3A%20structure%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contents.length%20%3F%20contents.wrapAll(dom)%20%3A%20self.append(dom)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20unwrap%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.parent().each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).replaceWith(%24(this).children())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clone%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.cloneNode(true)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hide%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.css(%22display%22%2C%20%22none%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toggle%3A%20function(setting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20el%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(setting%20%3D%3D%3D%20undefined%20%3F%20el.css(%22display%22)%20%3D%3D%20%22none%22%20%3A%20setting)%20%3F%20el.show()%3A%20el.hide()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20prev%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(this.pluck('previousElementSibling')).filter(selector%20%7C%7C%20'*')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20next%3A%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24(this.pluck('nextElementSibling')).filter(selector%20%7C%7C%20'*')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20html%3A%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%20in%20arguments%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20originHtml%20%3D%20this.innerHTML%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this).empty().append(funcArg(this%2C%20html%2C%20idx%2C%20originHtml))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%3F%20this%5B0%5D.innerHTML%20%3A%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20function(text)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%20in%20arguments%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20newText%20%3D%20funcArg(this%2C%20text%2C%20idx%2C%20this.textContent)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.textContent%20%3D%20newText%20%3D%3D%20null%20%3F%20''%20%3A%20''%20%2B%20newText%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%3F%20this.pluck('textContent').join(%22%22)%20%3A%20null)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attr%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(typeof%20name%20%3D%3D%20'string'%20%26%26%20!(1%20in%20arguments))%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(0%20in%20this%20%26%26%20this%5B0%5D.nodeType%20%3D%3D%201%20%26%26%20(result%20%3D%20this%5B0%5D.getAttribute(name))%20!%3D%20null%20%3F%20result%20%3A%20undefined)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.nodeType%20!%3D%3D%201)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isObject(name))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20name)%20setAttribute(this%2C%20key%2C%20name%5Bkey%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20setAttribute(this%2C%20name%2C%20funcArg(this%2C%20value%2C%20idx%2C%20this.getAttribute(name)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeAttr%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.nodeType%20%3D%3D%3D%201%20%26%26%20name.split('%20').forEach(function(attribute)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setAttribute(this%2C%20attribute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20prop%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20propMap%5Bname%5D%20%7C%7C%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(1%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5Bname%5D%20%3D%20funcArg(this%2C%20value%2C%20idx%2C%20this%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(this%5B0%5D%20%26%26%20this%5B0%5D%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeProp%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20propMap%5Bname%5D%20%7C%7C%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20this%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20function(name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20attrName%20%3D%20'data-'%20%2B%20name.replace(capitalRE%2C%20'-%241').toLowerCase()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20%3D%20(1%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.attr(attrName%2C%20value)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.attr(attrName)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20data%20!%3D%3D%20null%20%3F%20deserializeValue(data)%20%3A%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(0%20in%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%20value%20%3D%20%22%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.value%20%3D%20funcArg(this%2C%20value%2C%20idx%2C%20this.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%5B0%5D%20%26%26%20(this%5B0%5D.multiple%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(this%5B0%5D).find('option').filter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.selected%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D).pluck('value')%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5B0%5D.value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%3A%20function(coordinates)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(coordinates)%20return%20this.each(function(index)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20coords%20%3D%20funcArg(this%2C%20coordinates%2C%20index%2C%20%24this.offset())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset%20%3D%20%24this.offsetParent().offset()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20props%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20coords.top%20-%20parentOffset.top%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20coords.left%20-%20parentOffset.left%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24this.css('position')%20%3D%3D%20'static')%20props%5B'position'%5D%20%3D%20'relative'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.css(props)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(document.documentElement%20!%3D%3D%20this%5B0%5D%20%26%26%20!%24.contains(document.documentElement%2C%20this%5B0%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20obj%20%3D%20this%5B0%5D.getBoundingClientRect()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20obj.left%20%2B%20window.pageXOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20obj.top%20%2B%20window.pageYOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20Math.round(obj.width)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20Math.round(obj.height)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20css%3A%20function(property%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(arguments.length%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20element%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20property%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!element)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.style%5Bcamelize(property)%5D%20%7C%7C%20getComputedStyle(element%2C%20'').getPropertyValue(property)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(isArray(property))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!element)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20props%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20computedStyle%20%3D%20getComputedStyle(element%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(property%2C%20function(_%2C%20prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20props%5Bprop%5D%20%3D%20(element.style%5Bcamelize(prop)%5D%20%7C%7C%20computedStyle.getPropertyValue(prop))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20props%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20css%20%3D%20''%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type(property)%20%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!value%20%26%26%20value%20!%3D%3D%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.removeProperty(dasherize(property))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20css%20%3D%20dasherize(property)%20%2B%20%22%3A%22%20%2B%20maybeAddPx(property%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20property)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!property%5Bkey%5D%20%26%26%20property%5Bkey%5D%20!%3D%3D%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.removeProperty(dasherize(key))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20css%20%2B%3D%20dasherize(key)%20%2B%20'%3A'%20%2B%20maybeAddPx(key%2C%20property%5Bkey%5D)%20%2B%20'%3B'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.style.cssText%20%2B%3D%20'%3B'%20%2B%20css%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20index%3A%20function(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element%20%3F%20this.indexOf(%24(element)%5B0%5D)%20%3A%20this.parent().children().indexOf(this%5B0%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hasClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20emptyArray.some.call(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.test(className(el))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20classRE(name))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20addClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!('className'%20in%20this))%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20cls%20%3D%20className(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newName%20%3D%20funcArg(this%2C%20name%2C%20idx%2C%20cls)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newName.split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!%24(this).hasClass(klass))%20classList.push(klass)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList.length%20%26%26%20className(this%2C%20cls%20%2B%20(cls%20%3F%20%22%20%22%20%3A%20%22%22)%20%2B%20classList.join(%22%20%22))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20removeClass%3A%20function(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!('className'%20in%20this))%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20undefined)%20return%20className(this%2C%20'')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20className(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20funcArg(this%2C%20name%2C%20idx%2C%20classList).split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classList%20%3D%20classList.replace(classRE(klass)%2C%20%22%20%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className(this%2C%20classList.trim())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20toggleClass%3A%20function(name%2C%20when)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!name)%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20%24(this)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20names%20%3D%20funcArg(this%2C%20name%2C%20idx%2C%20className(this))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20names.split(%2F%5Cs%2B%2Fg).forEach(function(klass)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(when%20%3D%3D%3D%20undefined%20%3F%20!%24this.hasClass(klass)%20%3A%20when)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.addClass(klass)%3A%20%24this.removeClass(klass)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scrollTop%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20hasScrollTop%20%3D%20'scrollTop'%20in%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20hasScrollTop%20%3F%20this%5B0%5D.scrollTop%20%3A%20this%5B0%5D.pageYOffset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(hasScrollTop%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTop%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTo(this.scrollX%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scrollLeft%3A%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20hasScrollLeft%20%3D%20'scrollLeft'%20in%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20hasScrollLeft%20%3F%20this%5B0%5D.scrollLeft%20%3A%20this%5B0%5D.pageXOffset%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(hasScrollLeft%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollLeft%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.scrollTo(value%2C%20this.scrollY)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.length)%20return%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20elem%20%3D%20this%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20*real*%20offsetParent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offsetParent%20%3D%20this.offsetParent()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20correct%20offsets%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset%20%3D%20this.offset()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset%20%3D%20rootNodeRE.test(offsetParent%5B0%5D.nodeName)%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20offsetParent.offset()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Subtract%20element%20margins%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20note%3A%20when%20an%20element%20has%20margin%3A%20auto%20the%20offsetLeft%20and%20marginLeft%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20are%20the%20same%20in%20Safari%20causing%20offset.left%20to%20incorrectly%20be%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset.top%20-%3D%20parseFloat(%24(elem).css('margin-top'))%20%7C%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset.left%20-%3D%20parseFloat(%24(elem).css('margin-left'))%20%7C%7C%200%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20offsetParent%20borders%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset.top%20%2B%3D%20parseFloat(%24(offsetParent%5B0%5D).css('border-top-width'))%20%7C%7C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentOffset.left%20%2B%3D%20parseFloat(%24(offsetParent%5B0%5D).css('border-left-width'))%20%7C%7C%200%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Subtract%20the%20two%20offsets%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%20offset.top%20-%20parentOffset.top%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20offset.left%20-%20parentOffset.left%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offsetParent%3A%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.map(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20parent%20%3D%20this.offsetParent%20%7C%7C%20document.body%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(parent%20%26%26%20!rootNodeRE.test(parent.nodeName)%20%26%26%20%24(parent).css(%22position%22)%20%3D%3D%20%22static%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20parent.offsetParent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20parent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20for%20now%0A%20%20%20%20%20%20%20%20%24.fn.detach%20%3D%20%24.fn.remove%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20the%20%60width%60%20and%20%60height%60%20functions%0A%20%20%20%20%20%20%20%20%3B%0A%20%20%20%20%20%20%20%20%5B'width'%2C%20'height'%5D.forEach(function(dimension)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dimensionProperty%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dimension.replace(%2F.%2F%2C%20function(m)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m%5B0%5D.toUpperCase()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Bdimension%5D%20%3D%20function(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20offset%2C%20el%20%3D%20this%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20return%20isWindow(el)%20%3F%20el%5B'inner'%20%2B%20dimensionProperty%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isDocument(el)%20%3F%20el.documentElement%5B'scroll'%20%2B%20dimensionProperty%5D%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(offset%20%3D%20this.offset())%20%26%26%20offset%5Bdimension%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20return%20this.each(function(idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20%24(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.css(dimension%2C%20funcArg(this%2C%20value%2C%20idx%2C%20el%5Bdimension%5D()))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20function%20traverseNode(node%2C%20fun)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fun(node)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%2C%20len%20%3D%20node.childNodes.length%3B%20i%20%3C%20len%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20traverseNode(node.childNodes%5Bi%5D%2C%20fun)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20the%20%60after%60%2C%20%60prepend%60%2C%20%60before%60%2C%20%60append%60%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%60insertAfter%60%2C%20%60insertBefore%60%2C%20%60appendTo%60%2C%20and%20%60prependTo%60%20methods.%0A%20%20%20%20%20%20%20%20adjacencyOperators.forEach(function(operator%2C%20operatorIndex)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20inside%20%3D%20operatorIndex%20%25%202%20%2F%2F%3D%3E%20prepend%2C%20append%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Boperator%5D%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20arguments%20can%20be%20nodes%2C%20arrays%20of%20nodes%2C%20Zepto%20objects%20and%20HTML%20strings%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20argType%2C%20nodes%20%3D%20%24.map(arguments%2C%20function(arg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20arr%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20argType%20%3D%20type(arg)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(argType%20%3D%3D%20%22array%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arg.forEach(function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(el.nodeType%20!%3D%3D%20undefined)%20return%20arr.push(el)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(%24.zepto.isZ(el))%20return%20arr%20%3D%20arr.concat(el.get())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arr%20%3D%20arr.concat(zepto.fragment(el))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20arr%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20argType%20%3D%3D%20%22object%22%20%7C%7C%20arg%20%3D%3D%20null%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arg%20%3A%20zepto.fragment(arg)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%2C%20copyByClone%20%3D%20this.length%20%3E%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(nodes.length%20%3C%201)%20return%20this%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function(_%2C%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20inside%20%3F%20target%20%3A%20target.parentNode%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20convert%20all%20methods%20to%20a%20%22before%22%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20operatorIndex%20%3D%3D%200%20%3F%20target.nextSibling%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20operatorIndex%20%3D%3D%201%20%3F%20target.firstChild%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20operatorIndex%20%3D%3D%202%20%3F%20target%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20null%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20parentInDocument%20%3D%20%24.contains(document.documentElement%2C%20parent)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nodes.forEach(function(node)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(copyByClone)%20node%20%3D%20node.cloneNode(true)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(!parent)%20return%20%24(node).remove()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent.insertBefore(node%2C%20target)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(parentInDocument)%20traverseNode(node%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(el.nodeName%20!%3D%20null%20%26%26%20el.nodeName.toUpperCase()%20%3D%3D%3D%20'SCRIPT'%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!el.type%20%7C%7C%20el.type%20%3D%3D%3D%20'text%2Fjavascript')%20%26%26%20!el.src)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20target%20%3D%20el.ownerDocument%20%3F%20el.ownerDocument.defaultView%20%3A%20window%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%5B'eval'%5D.call(target%2C%20el.innerHTML)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20after%20%20%20%20%3D%3E%20insertAfter%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20prepend%20%20%3D%3E%20prependTo%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20before%20%20%20%3D%3E%20insertBefore%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20append%20%20%20%3D%3E%20appendTo%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Binside%20%3F%20operator%20%2B%20'To'%20%3A%20'insert'%20%2B%20(operatorIndex%20%3F%20'Before'%20%3A%20'After')%5D%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(html)%5Boperator%5D(this)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20zepto.Z.prototype%20%3D%20Z.prototype%20%3D%20%24.fn%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Export%20internal%20API%20functions%20in%20the%20%60%24.zepto%60%20namespace%0A%20%20%20%20%20%20%20%20zepto.uniq%20%3D%20uniq%0A%20%20%20%20%20%20%20%20zepto.deserializeValue%20%3D%20deserializeValue%0A%20%20%20%20%20%20%20%20%24.zepto%20%3D%20zepto%0A%0A%20%20%20%20%20%20%20%20return%20%24%0A%20%20%20%20%7D)()%0A%0A%20%20%20%20%2F%2F%20If%20%60%24%60%20is%20not%20yet%20defined%2C%20point%20it%20to%20%60Zepto%60%0A%20%20%20%20window.Zepto%20%3D%20Zepto%0A%20%20%20%20window.%24%20%3D%3D%3D%20undefined%20%26%26%20(window.%24%20%3D%20Zepto)%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%0A%20%20%20%20%2F%2F%20%20%20%20%20(c)%202010-2016%20Thomas%20Fuchs%0A%20%20%20%20%2F%2F%20%20%20%20%20Zepto.js%20may%20be%20freely%20distributed%20under%20the%20MIT%20license.%0A%0A%20%20%20%20%3B%0A%20%20%20%20(function(%24)%20%7B%0A%20%20%20%20%20%20%20%20var%20_zid%20%3D%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20slice%20%3D%20Array.prototype.slice%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isFunction%20%3D%20%24.isFunction%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isString%20%3D%20function(obj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20obj%20%3D%3D%20'string'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20handlers%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20specialEvents%20%3D%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20focusinSupported%20%3D%20'onfocusin'%20in%20window%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20focus%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20focus%3A%20'focusin'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blur%3A%20'focusout'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hover%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mouseenter%3A%20'mouseover'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mouseleave%3A%20'mouseout'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20specialEvents.click%20%3D%20specialEvents.mousedown%20%3D%20specialEvents.mouseup%20%3D%20specialEvents.mousemove%20%3D%20'MouseEvents'%0A%0A%20%20%20%20%20%20%20%20function%20zid(element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20element._zid%20%7C%7C%20(element._zid%20%3D%20_zid%2B%2B)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20findHandlers(element%2C%20event%2C%20fn%2C%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%20%3D%20parse(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event.ns)%20var%20matcher%20%3D%20matcherFor(event.ns)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(handlers%5Bzid(element)%5D%20%7C%7C%20%5B%5D).filter(function(handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20handler%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!event.e%20%7C%7C%20handler.e%20%3D%3D%20event.e)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!event.ns%20%7C%7C%20matcher.test(handler.ns))%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!fn%20%7C%7C%20zid(handler.fn)%20%3D%3D%3D%20zid(fn))%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!selector%20%7C%7C%20handler.sel%20%3D%3D%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20parse(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20parts%20%3D%20(''%20%2B%20event).split('.')%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%3A%20parts%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ns%3A%20parts.slice(1).sort().join('%20')%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20matcherFor(ns)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20RegExp('(%3F%3A%5E%7C%20)'%20%2B%20ns.replace('%20'%2C%20'%20.*%20%3F')%20%2B%20'(%3F%3A%20%7C%24)')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20eventCapture(handler%2C%20captureSetting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handler.del%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(!focusinSupported%20%26%26%20(handler.e%20in%20focus))%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20!!captureSetting%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20realEvent(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20hover%5Btype%5D%20%7C%7C%20(focusinSupported%20%26%26%20focus%5Btype%5D)%20%7C%7C%20type%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20add(element%2C%20events%2C%20fn%2C%20data%2C%20selector%2C%20delegator%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20zid(element)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set%20%3D%20(handlers%5Bid%5D%20%7C%7C%20(handlers%5Bid%5D%20%3D%20%5B%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20events.split(%2F%5Cs%2F).forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%3D%3D%20'ready')%20return%20%24(document).ready(fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20handler%20%3D%20parse(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.fn%20%3D%20fn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.sel%20%3D%20selector%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20emulate%20mouseenter%2C%20mouseleave%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(handler.e%20in%20hover)%20fn%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20related%20%3D%20e.relatedTarget%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!related%20%7C%7C%20(related%20!%3D%3D%20this%20%26%26%20!%24.contains(this%2C%20related)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20handler.fn.apply(this%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.del%20%3D%20delegator%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20callback%20%3D%20delegator%20%7C%7C%20fn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.proxy%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20compatible(e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.isImmediatePropagationStopped%20%26%26%20e.isImmediatePropagationStopped())%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.data%20%3D%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%20callback.apply(element%2C%20e._args%20%3D%3D%20undefined%20%3F%20%5Be%5D%20%3A%20%5Be%5D.concat(e._args))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(result%20%3D%3D%3D%20false)%20e.preventDefault()%2C%20e.stopPropagation()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handler.i%20%3D%20set.length%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set.push(handler)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20('addEventListener'%20in%20element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.addEventListener(realEvent(handler.e)%2C%20handler.proxy%2C%20eventCapture(handler%2C%20capture))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20remove(element%2C%20events%2C%20fn%2C%20selector%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id%20%3D%20zid(element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20(events%20%7C%7C%20'').split(%2F%5Cs%2F).forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20findHandlers(element%2C%20event%2C%20fn%2C%20selector).forEach(function(handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20handlers%5Bid%5D%5Bhandler.i%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20('removeEventListener'%20in%20element)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.removeEventListener(realEvent(handler.e)%2C%20handler.proxy%2C%20eventCapture(handler%2C%20capture))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.event%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20add%3A%20add%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20remove%3A%20remove%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.proxy%20%3D%20function(fn%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20(2%20in%20arguments)%20%26%26%20slice.call(arguments%2C%202)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFunction(fn))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20proxyFn%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fn.apply(context%2C%20args%20%3F%20args.concat(slice.call(arguments))%20%3A%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxyFn._zid%20%3D%20zid(fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20proxyFn%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(isString(context))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.unshift(fn%5Bcontext%5D%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.proxy.apply(null%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24.proxy(fn%5Bcontext%5D%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20TypeError(%22expected%20function%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.bind%20%3D%20function(event%2C%20data%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20data%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.unbind%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.off(event%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.one%20%3D%20function(event%2C%20selector%2C%20data%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20selector%2C%20data%2C%20callback%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20returnTrue%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20returnFalse%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ignoreProperties%20%3D%20%2F%5E(%5BA-Z%5D%7CreturnValue%24%7Clayer%5BXY%5D%24%7CwebkitMovement%5BXY%5D%24)%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20eventMethods%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20preventDefault%3A%20'isDefaultPrevented'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopImmediatePropagation%3A%20'isImmediatePropagationStopped'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20stopPropagation%3A%20'isPropagationStopped'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20compatible(event%2C%20source)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(source%20%7C%7C%20!event.isDefaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%20%7C%7C%20(source%20%3D%20event)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(eventMethods%2C%20function(name%2C%20predicate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20sourceMethod%20%3D%20source%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%5Bname%5D%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5Bpredicate%5D%20%3D%20returnTrue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20sourceMethod%20%26%26%20sourceMethod.apply(source%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%5Bpredicate%5D%20%3D%20returnFalse%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event.timeStamp%20%7C%7C%20(event.timeStamp%20%3D%20Date.now())%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(source.defaultPrevented%20!%3D%3D%20undefined%20%3F%20source.defaultPrevented%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'returnValue'%20in%20source%20%3F%20source.returnValue%20%3D%3D%3D%20false%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source.getPreventDefault%20%26%26%20source.getPreventDefault())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event.isDefaultPrevented%20%3D%20returnTrue%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20event%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20createProxy(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20key%2C%20proxy%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20originalEvent%3A%20event%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(key%20in%20event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!ignoreProperties.test(key)%20%26%26%20event%5Bkey%5D%20!%3D%3D%20undefined)%20proxy%5Bkey%5D%20%3D%20event%5Bkey%5D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20compatible(proxy%2C%20event)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.delegate%20%3D%20function(selector%2C%20event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.on(event%2C%20selector%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.undelegate%20%3D%20function(selector%2C%20event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.off(event%2C%20selector%2C%20callback)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.live%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(document.body).delegate(this.selector%2C%20event%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.die%20%3D%20function(event%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(document.body).undelegate(this.selector%2C%20event%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.on%20%3D%20function(event%2C%20selector%2C%20data%2C%20callback%2C%20one)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20autoRemove%2C%20delegator%2C%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%26%26%20!isString(event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(event%2C%20function(type%2C%20fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.on(type%2C%20selector%2C%20data%2C%20fn%2C%20one)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(selector)%20%26%26%20!isFunction(callback)%20%26%26%20callback%20!%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20data%2C%20data%20%3D%20selector%2C%20selector%20%3D%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20undefined%20%7C%7C%20data%20%3D%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20data%2C%20data%20%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20false)%20callback%20%3D%20returnFalse%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this.each(function(_%2C%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(one)%20autoRemove%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(element%2C%20e.type%2C%20callback)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback.apply(this%2C%20arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(selector)%20delegator%20%3D%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20evt%2C%20match%20%3D%20%24(e.target).closest(selector%2C%20element).get(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(match%20%26%26%20match%20!%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20evt%20%3D%20%24.extend(createProxy(e)%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentTarget%3A%20match%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20liveFired%3A%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(autoRemove%20%7C%7C%20callback).apply(match%2C%20%5Bevt%5D.concat(slice.call(arguments%2C%201)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20add(element%2C%20event%2C%20callback%2C%20data%2C%20selector%2C%20delegator%20%7C%7C%20autoRemove)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24.fn.off%20%3D%20function(event%2C%20selector%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24this%20%3D%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event%20%26%26%20!isString(event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(event%2C%20function(type%2C%20fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this.off(type%2C%20selector%2C%20fn)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(selector)%20%26%26%20!isFunction(callback)%20%26%26%20callback%20!%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20selector%2C%20selector%20%3D%20undefined%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(callback%20%3D%3D%3D%20false)%20callback%20%3D%20returnFalse%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20remove(this%2C%20event%2C%20callback%2C%20selector)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%24.fn.trigger%20%3D%20function(event%2C%20args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%20%3D%20(isString(event)%20%7C%7C%20%24.isPlainObject(event))%20%3F%20%24.Event(event)%20%3A%20compatible(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20event._args%20%3D%20args%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20handle%20focus()%2C%20blur()%20by%20calling%20them%20directly%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(event.type%20in%20focus%20%26%26%20typeof%20this%5Bevent.type%5D%20%3D%3D%20%22function%22)%20this%5Bevent.type%5D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20items%20in%20the%20collection%20might%20not%20be%20DOM%20elements%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20('dispatchEvent'%20in%20this)%20this.dispatchEvent(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%24(this).triggerHandler(event%2C%20args)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20triggers%20event%20handlers%20on%20current%20element%20just%20as%20if%20an%20event%20occurred%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20doesn't%20trigger%20an%20actual%20event%2C%20doesn't%20bubble%0A%20%20%20%20%20%20%20%20%24.fn.triggerHandler%20%3D%20function(event%2C%20args)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20e%2C%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20this.each(function(i%2C%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20createProxy(isString(event)%20%3F%20%24.Event(event)%20%3A%20event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e._args%20%3D%20args%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.target%20%3D%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.each(findHandlers(element%2C%20event.type%20%7C%7C%20event)%2C%20function(i%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20handler.proxy(e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.isImmediatePropagationStopped%20%26%26%20e.isImmediatePropagationStopped())%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20shortcut%20methods%20for%20%60.bind(event%2C%20fn)%60%20for%20each%20event%20type%0A%20%20%20%20%20%20%20%20%3B%0A%20%20%20%20%20%20%20%20('focusin%20focusout%20focus%20blur%20load%20resize%20scroll%20unload%20click%20dblclick%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20'mousedown%20mouseup%20mousemove%20mouseover%20mouseout%20mouseenter%20mouseleave%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20'change%20select%20keydown%20keypress%20keyup%20error').split('%20').forEach(function(event)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24.fn%5Bevent%5D%20%3D%20function(callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20(0%20in%20arguments)%20%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bind(event%2C%20callback)%20%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.trigger(event)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20%24.Event%20%3D%20function(type%2C%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isString(type))%20props%20%3D%20type%2C%20type%20%3D%20props.type%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20event%20%3D%20document.createEvent(specialEvents%5Btype%5D%20%7C%7C%20'Events')%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bubbles%20%3D%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(props)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20name%20in%20props)(name%20%3D%3D%20'bubbles')%20%3F%20(bubbles%20%3D%20!!props%5Bname%5D)%20%3A%20(event%5Bname%5D%20%3D%20props%5Bname%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20event.initEvent(type%2C%20bubbles%2C%20true)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20compatible(event)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D)(Zepto)%0A%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20%20%20var%20x%20%3D%20Zepto%3B%0A%0A%20%20%20%20%2F%2F%20Zepto%20extensions%0A%20%20%20%20x.fn.innerText%20%3D%20function(nodeFilter_obj%2C%20joiner)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!(0%20in%20this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20joiner%20%3D%20(typeof%20joiner%20%3D%3D%20'string')%20%3F%20joiner%20%3A%20'%20'%3B%0A%20%20%20%20%20%20%20%20return%20x.map(this%2C%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20node%2C%20text%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20whatToShow%20%3D%20nodeFilter_obj%20%3F%20NodeFilter.SHOW_ALL%20%3A%20NodeFilter.SHOW_TEXT%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20walker%20%3D%20document.createTreeWalker(el%2C%20whatToShow%2C%20nodeFilter_obj%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(node%20%3D%20walker.nextNode())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text.push(node.nodeValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20text.join(joiner)%3B%0A%20%20%20%20%20%20%20%20%7D).join(joiner).replace(%2F%5Cn%2B%2Fg%2C%20joiner)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.outerHTML%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!(0%20in%20this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20x('%3Cdiv%3E').append(this%5B0%5D.cloneNode(true)).html()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.tagHTML%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20x('%3Cdiv%3E').append(this%5B0%5D.cloneNode(true)).html().replace(%2F%3E.*%2F%2C%20'%3E')%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Are%20we%20running%20in%20the%20page%20context%20or%20extension%20context%3F%0A%20%20%20%20x.pagecontext%20%3D%20args.pagecontext%20%7C%7C%20false%3B%0A%0A%20%20%20%20%2F%2F%20Set%20an%20attribute%20on%20an%20Object%20using%20a%20possible%20deeply-nested%20path%0A%20%20%20%20%2F%2F%20Stole%20this%20from%20lodash%20_.set(object%2C%20path%2C%20value)%0A%20%20%20%20%2F%2F%20eslint-disable-next-line%0A%20%20%20%20x.set%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20h%20%3D%20'%5Bobject%20Array%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20g%20%3D%20'%5Bobject%20Function%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20'%5Bobject%20String%5D'%3B%0A%20%20%20%20%20%20%20%20var%20k%20%3D%20%2F%5C.%7C%5C%5B(%3F%3A%5B%5E%5B%5C%5D%5D*%7C(%5B%22'%5D)(%3F%3A(%3F!%5C1)%5B%5E%5Cn%5C%5C%5D%7C%5C%5C.)*%3F%5C1)%5C%5D%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20m%20%3D%20%2F%5E%5Cw*%24%2F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%20%3D%20%2F%5B%5E.%5B%5C%5D%5D%2B%7C%5C%5B(%3F%3A(-%3F%5Cd%2B(%3F%3A%5C.%5Cd%2B)%3F)%7C(%5B%22'%5D)((%3F%3A(%3F!%5C2)%5B%5E%5Cn%5C%5C%5D%7C%5C%5C.)*%3F)%5C2)%5C%5D%2Fg%3B%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20%2F%5C%5C(%5C%5C)%3F%2Fg%3B%0A%20%20%20%20%20%20%20%20var%20q%20%3D%20%2F%5E%5Cd%2B%24%2F%3B%0A%0A%20%20%20%20%20%20%20%20function%20n(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%3D%3D%20null%20%3F%20''%20%3A%20(b%20%2B%20'')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20f(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20!!b%20%26%26%20typeof%20b%20%3D%3D%20'object'%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20j%20%3D%20Object.prototype%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20j.toString%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%209007199254740991%3B%0A%0A%20%20%20%20%20%20%20%20function%20r(b%2C%20c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20(typeof%20b%20%3D%3D%20'number'%20%7C%7C%20q.test(b))%20%3F%20%2Bb%20%3A%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20c%20%3D%3D%20null%20%3F%20d%20%3A%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%20%3E%20-1%20%26%26%20b%20%25%201%20%3D%3D%200%20%26%26%20b%20%3C%20c%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20t(b%2C%20d)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20typeof%20b%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((c%20%3D%3D%20'string'%20%26%26%20m.test(b))%20%7C%7C%20c%20%3D%3D%20'number')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20!k.test(b)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f%20%7C%7C%20(d%20!%3D%20null%20%26%26%20b%20in%20i(d))%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20v(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20b%20%3D%3D%20'number'%20%26%26%20b%20%3E%20-1%20%26%26%20b%20%25%201%20%3D%3D%200%20%26%26%20b%20%3C%3D%20d%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20i(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c(b)%20%3F%20b%20%3A%20Object(b)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20s(b)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n(b).replace(l%2C%20function(d%2C%20b%2C%20f%2C%20e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c.push(f%20%3F%20e.replace(o%2C%20'%241')%20%3A%20(b%20%7C%7C%20d))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20e%20%3D%20function(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f(c)%20%26%26%20v(c.length)%20%26%26%20b.call(c)%20%3D%3D%20h%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20function%20w(d)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20c(d)%20%26%26%20b.call(d)%20%3D%3D%20g%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20c(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20b%20%3D%20typeof%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20!!c%20%26%26%20(b%20%3D%3D%20'object'%20%7C%7C%20b%20%3D%3D%20'function')%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20x(c)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20typeof%20c%20%3D%3D%20'string'%20%7C%7C%20(f(c)%20%26%26%20b.call(c)%20%3D%3D%20p)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20function%20u(e%2C%20d%2C%20k)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(e%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20e%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%20(d%20%2B%20'')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d%20%3D%20(e%5Bi%5D%20!%3D%20null%20%7C%7C%20t(d%2C%20e))%20%3F%20%5Bi%5D%20%3A%20s(d)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20-1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%20%3D%20d.length%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20h%20-%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(b%20!%3D%20null%20%26%26%20%2B%2Bf%20%3C%20h)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20g%20%3D%20d%5Bf%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(c(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(f%20%3D%3D%20j)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%5Bg%5D%20%3D%20k%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b%5Bg%5D%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%5Bg%5D%20%3D%20r(d%5Bf%20%2B%201%5D)%20%3F%20%5B%5D%20%3A%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20b%5Bg%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20e%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20u%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20%2F%2F%20Test%20if%20a%20property%20is%20defined.%0A%20%20%20%20x.def%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20return%20typeof%20o%20!%3D%20%22undefined%22%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Simple%20Pub%2FSub%0A%20%20%20%20x.pubsub_handlers%20%3D%20%7B%7D%3B%0A%20%20%20%20x.pubsub_messages%20%3D%20%7B%7D%3B%20%2F%2F%20A%20list%20of%20all%20messages%0A%20%20%20%20x.publish%20%3D%20function(event%2C%20data%2C%20republish%2C%20persist_messages)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20republish%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20republish%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20persist_messages%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20persist_messages%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20data%20%3D%20data%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20var%20funcs%20%3D%20x.pubsub_handlers%5Bevent%5D%3B%0A%20%20%20%20%20%20%20%20if%20(funcs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20funcs.forEach(function(f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f.call(x%2C%20event%2C%20data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20running%20in%20the%20page%20context%2C%20send%20a%20message%20back%20to%20the%20extension%20code%0A%20%20%20%20%20%20%20%20if%20(republish)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clone%20data%20before%20posting%2C%20to%20make%20sure%20that%20object%20references%20are%20not%20passed%0A%20%20%20%20%20%20%20%20%20%20%20%20window.postMessage(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sfx%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22pagecontext%22%3A%20x.pagecontext%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22event%22%3A%20event%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20x.clone(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20%22*%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20this%20message%20in%20case%20a%20subscriber%20appears%20later%20and%20wants%20all%20past%20messages%3F%0A%20%20%20%20%20%20%20%20if%20(persist_messages)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_messages%5Bevent%5D%20%3D%20x.pubsub_messages%5Bevent%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20messages%20%3D%20x.pubsub_messages%5Bevent%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20messages.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22event%22%3A%20event%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20TODO%3A%20Wildcard%20subscriptions%0A%20%20%20%20x.subscribe%20%3D%20function(event%2C%20func%2C%20receive_past_messages)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20receive_past_messages%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20receive_past_messages%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20events%20%3D%20(typeof%20event%20%3D%3D%20%22string%22)%20%3F%20%5Bevent%5D%20%3A%20event%3B%0A%20%20%20%20%20%20%20%20events.forEach(function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.pubsub_handlers%5Bev%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_handlers%5Bev%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20x.pubsub_handlers%5Bev%5D.push(func)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20past%20messages%20are%20requested%2C%20fire%20this%20function%20for%20each%20of%20the%20past%20messages%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(receive_past_messages)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20messages%20%3D%20x.pubsub_messages%5Bev%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20messages%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messages.forEach(function(msg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func.call(x%2C%20msg.event%2C%20msg.data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Allow%20for%20passing%20of%20messages%20between%20extension%20and%20page%20contexts%2C%20using%20window.postMessage%0A%20%20%20%20window.addEventListener('message'%2C%20function(event)%20%7B%0A%20%20%20%20%20%20%20%20if%20(event.data.sfx%20%26%26%20event.data.pagecontext%20!%3D%20x.pagecontext)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20message%20has%20been%20received%20from%20the%20other%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20x.publish(event.data.message.event%2C%20event.data.message.data%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20A%20Generalized%20storage%2Fpersistence%20mechanism%0A%20%20%20%20var%20ls%20%3D%20window.localStorage%3B%0A%20%20%20%20x.storage%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22prefix%22%3A%20null%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%7B%7D%2C%20%2F%2F%20keys%20are%20options%2C%20stats%2C%20etc%0A%20%20%20%20%20%20%20%20%22set%22%3A%20function(key%2C%20prop%2C%20val%2C%20callback%2C%20save)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20stored%20value%20in%20memory%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkey%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20container%20%3D%20x.storage.data%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Single%20value%20set%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20prop%20!%3D%20%22object%22%20%26%26%20(typeof%20callback%20%3D%3D%20%22undefined%22%20%7C%7C%20typeof%20callback%20%3D%3D%20%22function%22%20%7C%7C%20callback%20%3D%3D%20null))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set_or_delete(container%2C%20prop%2C%20val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Multiset%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20prop%20%3D%3D%20%22object%22%20%26%26%20(typeof%20val%20%3D%3D%20%22undefined%22%20%7C%7C%20typeof%20val%20%3D%3D%20%22function%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20save%20%3D%20callback%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20prop2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(prop2%20in%20prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set_or_delete(container%2C%20prop2%2C%20prop%5Bprop2%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(false%20!%3D%3D%20save)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.save(key%2C%20null%2C%20callback)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(key%2C%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22set_or_delete%22%3A%20function(container%2C%20prop%2C%20val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Delete%20a%20value%20by%20setting%20it%20to%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(prop%20in%20container%20%26%26%20typeof%20val%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20container%5Bprop%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.set(container%2C%20prop%2C%20val)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22save%22%3A%20function(key%2C%20val%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(val%20%3D%3D%20null%20%26%26%20typeof%20x.storage.data%5Bkey%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%20%3D%20x.storage.data%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20persist%0A%20%20%20%20%20%20%20%20%20%20%20%20Extension.storage.set(key%2C%20val%2C%20function(key%2C%20val%2C%20ret)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20post%20to%20localstorage%20to%20trigger%20updates%20in%20other%20windows%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22time%22%3A%20x.now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22key%22%3A%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ls.setItem('x-storage'%2C%20JSON.stringify(o))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Call%20the%20callback%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(key%2C%20val%2C%20ret)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20(x.storage.prefix%20!%3D%20null%20%3F%20x.storage.prefix%20%2B%20'%2F'%20%3A%20''))%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22get%22%3A%20function(keys%2C%20defaultValue%2C%20callback%2C%20use_cache)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!!use_cache%20%26%26%20typeof%20keys%20%3D%3D%20%22string%22%20%26%26%20typeof%20x.storage.data%5Bkeys%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20callback(x.storage.data%5Bkeys%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20Get%20multi%20values%20from%20cache!%0A%20%20%20%20%20%20%20%20%20%20%20%20Extension.storage.get(keys%2C%20defaultValue%2C%20function(values)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20key%2C%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20the%20data%20in%20memory%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20keys%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Single%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkeys%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.update(keys%2C%20values)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Multi%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20keys.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%20%3D%20keys%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.update(key%2C%20values%5Bkey%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20callback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(values)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20(x.storage.prefix%20!%3D%20null%20%3F%20x.storage.prefix%20%2B%20'%2F'%20%3A%20''))%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22refresh%22%3A%20function(key%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.storage.data%5Bkey%5D%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.get(key%2C%20null%2C%20callback%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22update%22%3A%20function(key%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.storage.data%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Use%20localStorage%20to%20communicate%20storage%20changes%20between%20windows%20and%20tabs.%0A%20%20%20%20%2F%2F%20Changes%20to%20localStorage%20trigger%20the%20'storage'%20event%20in%20other%20windows%20on%20the%20same%20site.%0A%20%20%20%20if%20(!x.pagecontext)%20%7B%0A%20%20%20%20%20%20%20%20window.addEventListener('storage'%2C%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%22x-storage%22%20%3D%3D%20e.key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20json%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(e.newValue)%3B%20%2F%2F%20%7B%22time%22%3A123%2C%22key%22%3A%22key_name%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.refresh(json.key%2C%20function(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Publish%20a%20message%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.publish(%22storage%2Frefresh%22%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22key%22%3A%20json.key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('storage%20event'%2C%20e%2C%20'error'%2C%20err%2C%20'json'%2C%20json)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Sanitize%20HTML%20using%20the%20DOMPurify%20library%2C%20if%20available%0A%20%20%20%20x.sanitize%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20return%20(typeof%20DOMPurify%20!%3D%20%22undefined%22%20%3F%20DOMPurify.sanitize(html)%20%3A%20html)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.fn.safe_html%20%3D%20function(html)%20%7B%0A%20%20%20%20%20%20%20%20html%20%3D%20x.sanitize(html)%3B%0A%20%20%20%20%20%20%20%20return%20this.each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x(this).html(html)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%0A%20%20%20%20%2F%2F%20http%2Fajax%0A%20%20%20%20x.ajax%20%3D%20function(urlOrObject%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20Allow%20for%20ajax%20from%20pagecontext%0A%20%20%20%20%20%20%20%20Extension.ajax(urlOrObject%2C%20function(content%2C%20status%2C%20headers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(headers%20%26%26%20%2Fapplication%5C%2Fjson%2F.test(headers%5B'content-type'%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20JSON.parse(content)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20callback(content%2C%20status)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.ajax_dom%20%3D%20function(urlOrObject%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20x.ajax(urlOrObject%2C%20function(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24dom%20%3D%20x('%3Cdiv%3E')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24dom.append(data)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20callback(%24dom)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20css%0A%20%20%20%20x.css%20%3D%20function(css%2C%20id)%20%7B%0A%20%20%20%20%20%20%20%20x.when('head'%2C%20function(%24head)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20document.getElementById(id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(s)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(css)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20css%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x(s).remove()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20document.createElement('style')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20css%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.id%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%24head.append(s)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20function%20execution%20in%20a%20%3Cscript%3E%20block%20(in%20page%20context)%0A%20%20%20%20x.inject%20%3D%20function(code%2C%20args%2C%20windowVar)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!document%20%7C%7C%20!document.createElement%20%7C%7C%20!document.documentElement%20%7C%7C%20!document.documentElement.appendChild)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20document.createElement('script')%3B%0A%20%20%20%20%20%20%20%20s.type%20%3D%20'text%2Fjavascript'%3B%0A%20%20%20%20%20%20%20%20args%20%3D%20JSON.stringify(args%20%7C%7C%20%7B%7D)%3B%0A%20%20%20%20%20%20%20%20var%20result%20%3D%20windowVar%20%3F%20'window.'%20%2B%20windowVar%20%2B%20'%3D'%20%3A%20''%3B%0A%20%20%20%20%20%20%20%20code%20%3D%20result%20%2B%20'('%20%2B%20code.toString()%20%2B%20')('%20%2B%20args%20%2B%20')%3B'%3B%0A%20%20%20%20%20%20%20%20if%20(windowVar)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Post%20a%20window%20notification%20saying%20this%20variable%20is%20now%20defined%0A%20%20%20%20%20%20%20%20%20%20%20%20code%20%2B%3D%20'window.postMessage(%7B%22sfxready%22%3A%22'%20%2B%20windowVar%20%2B%20'%22%7D%20%2C%20%22*%22)%3B'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20s.text%20%3D%20code%3B%0A%20%20%20%20%20%20%20%20document.documentElement.appendChild(s)%3B%0A%20%20%20%20%20%20%20%20s.parentNode.removeChild(s)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20POLLING%0A%20%20%20%20%2F%2F%20Call%20a%20function%20repeatedly%20until%20it%20doesn't%20throw%20an%20exception%20or%20returns%20non-false%0A%20%20%20%20x.poll%20%3D%20function(func%2C%20interval%2C%20max)%20%7B%0A%20%20%20%20%20%20%20%20interval%20%3D%20interval%20%7C%7C%20500%3B%0A%20%20%20%20%20%20%20%20max%20%3D%20max%20%7C%7C%2050%3B%0A%20%20%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(count%2B%2B%20%3E%20max)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(func(count)%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(f%2C%20interval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(f%2C%20interval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20f()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20A%20function%20that%20executes%20a%20function%20only%20when%20a%20selector%20returns%20a%20result%0A%20%20%20%20x.when%20%3D%20function(selector%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20var%20%24results%20%3D%20x(selector)%3B%0A%20%20%20%20%20%20%20%20if%20(%24results.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(%24results)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.when(selector%2C%20func)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20200)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Cookies%0A%20%20%20%20x.cookie%20%3D%20%7B%0A%20%20%20%20%20%20%20%20'get'%3A%20function(n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20unescape(document.cookie.match('(%5E%7C%3B)%3F'%20%2B%20n%20%2B%20'%3D(%5B%5E%3B%5D*)(%3B%7C%24)')%5B2%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20'set'%3A%20function()%20%7B%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Logging%0A%20%20%20%20x.log%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(console%20%26%26%20console.log)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20args%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20arguments%5Bi%5D%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.push(JSON.stringify(arguments%5Bi%5D%2C%20null%2C%203))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20args.push(arguments%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log.apply(console%2C%20args)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.alert%20%3D%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20msg%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20msg%20%3D%20JSON.stringify(msg%2C%20null%2C%203)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20alert(msg)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20%22bind%22%20function%20to%20support%20event%20capture%20mode%0A%20%20%20%20x.bind%20%3D%20function(el%2C%20ev%2C%20func%2C%20capture)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20el%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20x(el)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!el%20%7C%7C%20el.length%20%3C%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20el%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el%20%3D%20X(el)%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20capture%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20capture%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(el%20%26%26%20el.addEventListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20el.addEventListener(ev%2C%20func%2C%20capture)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.capture%20%3D%20function(el%2C%20ev%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20x.bind(el%2C%20ev%2C%20func%2C%20true)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20backwards-compatible%20replacement%20for%20the%20old%20QSA()%20function%0A%20%20%20%20x.QSA%20%3D%20function(context%2C%20selector%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20selector%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%20%3D%20selector%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20selector%20%3D%20context%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20context%20%3D%20document%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20x(selector%2C%20context).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(this)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20util%20method%20to%20find%20a%20single%20element%20matching%20a%20selector%0A%20%20%20%20x.find%20%3D%20function(selector)%20%7B%0A%20%20%20%20%20%20%20%20var%20o%20%3D%20x(selector)%3B%0A%20%20%20%20%20%20%20%20return%20(o.length%20%3E%200)%20%3F%20o%5B0%5D%20%3A%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Find%20the%20real%20target%20of%20an%20event%0A%20%20%20%20x.target%20%3D%20function(e%2C%20wrap)%20%7B%0A%20%20%20%20%20%20%20%20var%20t%20%3D%20e.target%3B%0A%20%20%20%20%20%20%20%20if%20(t.nodeType%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20t.parentNode%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20wrap%20%3F%20x(t)%20%3A%20t%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.parent%20%3D%20function(el)%20%7B%0A%20%20%20%20%20%20%20%20if%20(el%20%26%26%20el.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20el.parentNode%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20util%20method%20to%20clone%20a%20simple%20object%0A%20%20%20%20x.clone%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20o%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(JSON.stringify(o))%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Some%20useful%20string%20methods%0A%20%20%20%20x.match%20%3D%20function(str%2C%20regex%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20str%20!%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20m%20%3D%20str.match(regex)%3B%0A%20%20%20%20%20%20%20%20if%20(m%20%26%26%20m.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20func%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%20regex.global%20%3F%200%20%3A%201%3B%20i%20%3C%20m.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20func(m%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20m.length%20%3E%201%20%3F%20m%5Bregex.global%20%3F%200%20%3A%201%5D%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Get%20a%20timestamp%0A%20%20%20%20x.time%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20Date.now()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.now%20%3D%20x.time%3B%0A%20%20%20%20x.today%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20new%20Date()%3B%0A%20%20%20%20%20%20%20%20return%20d.getFullYear()%20*%2010000%20%2B%20(d.getMonth()%20%2B%201)%20*%20100%20%2B%20d.getDate()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Express%20a%20timestamp%20as%20a%20relative%20time%20%22ago%22%0A%20%20%20%20x.ago%20%3D%20function(when%2C%20now%2C%20shortened%2C%20higher_resolution)%20%7B%0A%20%20%20%20%20%20%20%20now%20%3D%20now%20%7C%7C%20x.now()%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20shortened%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shortened%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20diff%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20var%20delta%20%3D%20(now%20-%20when)%3B%0A%20%20%20%20%20%20%20%20var%20seconds%20%3D%20delta%20%2F%20x.seconds%3B%0A%20%20%20%20%20%20%20%20if%20(seconds%20%3C%2060)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22just%20now%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20days%20%3D%20Math.floor(delta%20%2F%20x.days)%3B%0A%20%20%20%20%20%20%20%20if%20(days%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20days%20%2B%20%22%20day%22%20%2B%20(days%20%3E%201%20%3F%20%22s%22%20%3A%20%22%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delta%20-%3D%20(days%20*%20x.days)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20hours%20%3D%20Math.floor(delta%20%2F%20x.hours)%3B%0A%20%20%20%20%20%20%20%20if%20(hours%20%3E%200%20%26%26%20(higher_resolution%20%7C%7C%20!diff))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20hours%20%2B%20%22%20%22%20%2B%20(shortened%20%3F%20%22hr%22%20%3A%20%22hours%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delta%20-%3D%20(hours%20*%20x.hours)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20minutes%20%3D%20Math.floor(delta%20%2F%20x.minutes)%3B%0A%20%20%20%20%20%20%20%20if%20(minutes%20%3E%200%20%26%26%20(!diff%20%7C%7C%20(higher_resolution%20%26%26%20days%20%3C%201)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%2B%3D%20minutes%20%2B%20%22%20%22%20%2B%20(shortened%20%3F%20%22mins%22%20%3A%20%22minutes%22)%20%2B%20%22%20%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!diff)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%3D%20%22a%20while%20%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20diff%20%2B%20%22ago%22%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Recurring%20tasks%20execute%20only%20at%20certain%20intervals%0A%20%20%20%20x.seconds%20%3D%201000%3B%0A%20%20%20%20x.minutes%20%3D%20x.seconds%20*%2060%3B%0A%20%20%20%20x.hours%20%3D%20x.minutes%20*%2060%3B%0A%20%20%20%20x.days%20%3D%20x.hours%20*%2024%3B%0A%20%20%20%20x.task%20%3D%20function(key%2C%20frequency%2C%20callback%2C%20elsecallback)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Internally%20store%20the%20state%20of%20each%20task%20in%20a%20user%20pref%0A%20%20%20%20%20%20%20%20x.storage.get('tasks'%2C%20%7B%7D%2C%20function(tasks)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20tasks%5Bkey%5D%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tasks%5Bkey%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22run_on%22%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20t%20%3D%20tasks%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20now%20%3D%20x.now()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20are%20past%20due%2C%20update%20the%20task%20and%20execute%20the%20callback%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!t.run_on%20%7C%7C%20((t.run_on%20%2B%20frequency)%20%3C%20now))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t.run_on%20%3D%20now%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.storage.set('tasks'%2C%20key%2C%20t%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20elsecallback%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elsecallback(t.run_on)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20true)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Semver%20Compare%0A%20%20%20%20x.semver_compare%20%3D%20function(a%2C%20b)%20%7B%0A%20%20%20%20%20%20%20%20var%20pa%20%3D%20a.split('.')%3B%0A%20%20%20%20%20%20%20%20var%20pb%20%3D%20b.split('.')%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%203%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20na%20%3D%20Number(pa%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nb%20%3D%20Number(pb%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(na%20%3E%20nb)%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(nb%20%3E%20na)%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isNaN(na)%20%26%26%20isNaN(nb))%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isNaN(na)%20%26%26%20!isNaN(nb))%20return%20-1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20UI%20methods%20to%20simulate%20user%20actions%0A%20%20%20%20x.ui%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%22click%22%3A%20function(selector%2C%20bubble)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20bubble%20!%3D%20%22boolean%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bubble%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20x(selector).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20e%20%3D%20document.createEvent('MouseEvents')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initEvent('click'%2C%20bubble%2C%20true%2C%20window%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dispatchEvent(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22keypress%22%3A%20function(selector%2C%20code%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20type%20%7C%7C%20%22keypress%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x(selector).each(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20e%20%3D%20document.createEvent('KeyboardEvent')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20code%20%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20code%20%3D%20code.charCodeAt(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.initKeyboardEvent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initKeyboardEvent(type%2C%20true%2C%20true%2C%20window%2C%20code%2C%20null%2C%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(e.initKeyEvent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.initKeyEvent(type%2C%20true%2C%20true%2C%20window%2C%20false%2C%20false%2C%20false%2C%20false%2C%20false%2C%20code)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dispatchEvent(e)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22scroll%22%3A%20function(pixels%2C%20el)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24el%20%3D%20X(el%20%7C%7C%20window)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20scrollTop%20%3D%20%24el.scrollTop()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20scrollTop%20%3D%3D%20%22number%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.scrollTop(scrollTop%20%2B%20pixels)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Draggable%20Objects%0A%20%20%20%20x.draggable%20%3D%20function(el%2C%20dragend)%20%7B%0A%20%20%20%20%20%20%20%20var%20%24el%20%3D%20X(el)%3B%0A%20%20%20%20%20%20%20%20el%20%3D%20%24el%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20var%20%24undraggables%20%3D%20%24el.find('*%5Bdraggable%3D%22false%22%5D')%3B%0A%20%20%20%20%20%20%20%20if%20(%24undraggables.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24undraggables.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'cursor'%3A%20'auto'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D).mouseenter(function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D).mouseleave(function(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24el.attr('draggable'%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%24el.on('dragstart'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.dragend%20%3D%20dragend%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.dataTransfer.setData(%22text%2Fplain%22%2C%20(el.offsetLeft%20-%20ev.clientX)%20%2B%20'%2C'%20%2B%20(el.offsetTop%20-%20ev.clientY))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.target%20%3D%20el%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20x.draggable.target%20%3D%20null%3B%0A%20%20%20%20x.draggable.dragend%20%3D%20null%3B%0A%20%20%20%20x(window).on('dragover'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x.draggable.target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).on('drop'%2C%20function(ev)%20%7B%0A%20%20%20%20%20%20%20%20if%20(x.draggable.target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20offset%20%3D%20ev.dataTransfer.getData(%22text%2Fplain%22).split('%2C')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20%24el%20%3D%20x(x.draggable.target)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20left%20%3D%20(ev.clientX%20%2B%20%2Boffset%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(left%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20top%20%3D%20(ev.clientY%20%2B%20%2Boffset%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(top%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('left'%2C%20left%20%2B%20'px')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('top'%2C%20top%20%2B%20'px')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('right'%2C%20'auto')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24el.css('bottom'%2C%20'auto')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.target%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20x.draggable.dragend%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.draggable.dragend(%24el%2C%20left%2C%20top)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20ELEMENT%20CREATION%0A%20%20%20%20%2F%2F%0A%20%20%20%20%2F%2F%20Create%20a%20document%20fragment%2C%20then%20optionally%20run%20a%20function%20with%20it%20as%20an%20argument%0A%20%20%20%20x.fragment%20%3D%20function(html%2C%20func)%20%7B%0A%20%20%20%20%20%20%20%20var%20frag%20%3D%20document.createDocumentFragment()%3B%0A%20%20%20%20%20%20%20%20var%20div%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20var%20selector%3B%0A%20%20%20%20%20%20%20%20div.innerHTML%20%3D%20x.sanitize(html)%3B%0A%20%20%20%20%20%20%20%20while%20(div%20%26%26%20div.firstChild)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20frag.appendChild(div.firstChild)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(typeof%20func%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func(frag)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(typeof%20func%20%3D%3D%20%22object%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(selector%20in%20func)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20click(QS(frag%2C%20selector)%2C%20func%5Bselector%5D%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20frag%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Observe%20DOM%20Changes%0A%20%20%20%20x.on_attribute_change%20%3D%20function(el%2C%20attr%2C%20callback)%20%7B%0A%20%20%20%20%20%20%20%20(new%20MutationObserver(function(mutations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mutations.forEach(function(mutation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!attr%20%7C%7C%20(mutation.attributeName%20%3D%3D%20attr%20%26%26%20el.getAttribute(attr)%20!%3D%20mutation.oldValue))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(mutation.attributeName%2C%20mutation.oldValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D)).observe(el%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attributes%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attributeOldValue%3A%20true%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20x.return_false%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20x.is_document_ready%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20if%20(document%20%26%26%20document.readyState)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20(document.readyState%20%3D%3D%20%22interactive%22%20%7C%7C%20document.readyState%20%3D%3D%20%22complete%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20(document%20%26%26%20document.getElementsByTagName%20%26%26%20document.getElementsByTagName('BODY').length%20%3E%200)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Notes%20to%20be%20emitted%20in%20any%20sort%20of%20Support%20report%0A%20%20%20%20x.support_note%20%3D%20function(who%2C%20what)%20%7B%0A%20%20%20%20%20%20%20%20if%20(typeof%20x.support_notes%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x.support_notes%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20x.support_notes%5Bwho%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20who%3A%20who%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20what%3A%20what%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20when%3A%20x.now()%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20A%20%22Ready%22%20queue%20of%20functions%20to%20run%20once%20the%20event%20is%20triggered%0A%20%20%20%20x.ready%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20var%20ready%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20var%20fire%20%3D%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.func()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x.log(%22Error%20in%20module%3A%20%22%20%2B%20o.label)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20return%20function(label%2C%20f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20label%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20No%20arg%20passed%2C%20fire%20the%20queue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ready%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.forEach(function(o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fire(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20label%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20label%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20label%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20f%20%3D%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20o%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22label%22%3A%20label%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22func%22%3A%20f%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(ready)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fire(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.push(o)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20%2F%2F%20beforeReady()%20allows%20modules%20to%20halt%20execution%20or%20do%20things%20before%20normal%20execution%0A%20%20%20%20x.beforeReady%20%3D%20(function()%20%7B%0A%20%20%20%20%20%20%20%20var%20i%2C%20queue%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20return%20function(f)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20f%20!%3D%20%22function%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fire%20the%20queue%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20queue.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(queue%5Bi%5D(f)%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20queue.push(f)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)()%3B%0A%0A%20%20%20%20return%20x%3B%0A%7D%3B%0Avar%20X%20%3D%20XLib()%3B%0A%0Afunction%20anno()%20%7B%0A%20%20%20%20var%20namehash%20%3D%20%7B%7D%3B%0A%20%20%20%20var%20colorhash%20%3D%20%7B%7D%3B%0A%20%20%20%20var%20colorcount%20%3D%201%3B%0A%20%20%20%20var%20namecount%20%3D%201%3B%0A%20%20%20%20var%20grouphash%20%3D%20%7B%7D%3B%0A%20%20%20%20var%20groupcount%20%3D%201%3B%0A%20%20%20%20var%20anon_names%20%3D%20%5B%22Mario%20Speedwagon%22%2C%20%22Anna%20Sthesia%22%2C%20%22Paul%20Molive%22%2C%20%22Anna%20Mull%22%2C%20%22Paige%20Turner%22%2C%20%22Bob%20Frapples%22%2C%20%22Walter%20Melon%22%2C%20%22Nick%20R.%20Bocker%22%2C%20%22Barb%20Ackue%22%2C%20%22Buck%20Kinnear%22%2C%20%22Greta%20Life%22%2C%20%22Ira%20Membrit%22%2C%20%22Shonda%20Leer%22%2C%20%22Brock%20Lee%22%2C%20%22Maya%20Didas%22%2C%20%22Rick%20O'Shea%22%2C%20%22Pete%20Sariya%22%2C%20%22Sal%20Monella%22%2C%20%22Sue%20Vaneer%22%2C%20%22Cliff%20Hanger%22%2C%20%22Barb%20Dwyer%22%2C%20%22Terry%20Aki%22%2C%20%22Cory%20Ander%22%2C%20%22Robin%20Banks%22%2C%20%22Jimmy%20Changa%22%2C%20%22Barry%20Wine%22%2C%20%22Wilma%20Mumduya%22%2C%20%22Zack%20Lee%22%2C%20%22Don%20Stairs%22%2C%20%22Peter%20Pants%22%2C%20%22Hal%20Appeno%20%22%2C%20%22Otto%20Matic%22%2C%20%22Tom%20Foolery%22%2C%20%22Al%20Dente%22%2C%20%22Holly%20Graham%22%2C%20%22Frank%20N.%20Stein%22%2C%20%22Barry%20Cade%22%2C%20%22Phil%20Anthropist%20%22%2C%20%22Marvin%20Gardens%22%2C%20%22Phil%20Harmonic%20%22%2C%20%22Arty%20Ficial%22%2C%20%22Will%20Power%22%2C%20%22Juan%20Annatoo%22%2C%20%22Curt%20N.%20Call%22%2C%20%22Max%20Emum%22%2C%20%22Minnie%20Mum%22%2C%20%22Bill%20Yerds%22%2C%20%22Matt%20Innae%22%2C%20%22Polly%20Science%22%2C%20%22Tara%20Misu%22%2C%20%22Gerry%20Atric%22%2C%20%22Kerry%20Oaky%22%2C%20%22Mary%20Christmas%22%2C%20%22Dan%20Druff%22%2C%20%22Jim%20Nasium%22%2C%20%22Ella%20Vator%22%2C%20%22Sal%20Vidge%22%2C%20%22Bart%20Ender%22%2C%20%22Artie%20Choke%22%2C%20%22Hans%20Olo%22%2C%20%22Marge%20Arin%22%2C%20%22Hugh%20Briss%22%2C%20%22Gene%20Poole%22%2C%20%22Ty%20Tanic%22%2C%20%22Lynn%20Guini%22%2C%20%22Claire%20Voyant%22%2C%20%22Marty%20Graw%22%2C%20%22Olive%20Yu%22%2C%20%22Gene%20Jacket%22%2C%20%22Tom%20Atoe%22%2C%20%22Doug%20Out%22%2C%20%22Beau%20Tie%22%2C%20%22Serj%20Protector%22%2C%20%22Marcus%20Down%22%2C%20%22Warren%20Peace%22%2C%20%22Bud%20Jet%22%2C%20%22Barney%20Cull%22%2C%20%22Marion%20Gaze%22%2C%20%22Ed%20Itorial%22%2C%20%22Rick%20Shaw%22%2C%20%22Ben%20Effit%22%2C%20%22Kat%20E.%20Gory%22%2C%20%22Justin%20Case%22%2C%20%22Aaron%20Ottix%22%2C%20%22Ty%20Ballgame%22%2C%20%22Barry%20Cuda%22%2C%20%22John%20Withawind%22%2C%20%22Joe%20Thyme%22%2C%20%22Mary%20Goround%22%2C%20%22Marge%20Arita%22%2C%20%22Frank%20Senbeans%22%2C%20%22Bill%20Dabear%22%2C%20%22Ray%20Zindaroof%22%2C%20%22Adam%20Zapple%22%2C%20%22Matt%20Schtick%22%2C%20%22Sue%20Shee%22%2C%20%22Chris%20P.%20Bacon%22%2C%20%22Doug%20Lee%20Duckling%22%2C%20%22Sil%20Antro%22%2C%20%22Cal%20Orie%22%2C%20%22Sara%20Bellum%22%2C%20%22Al%20Acart%22%2C%20%22Marv%20Ellis%22%2C%20%22Evan%20Shlee%22%2C%20%22Terry%20Bull%22%2C%20%22Mort%20Ission%22%2C%20%22Ken%20Tucky%22%2C%20%22Louis%20Ville%22%2C%20%22Fred%20Attchini%22%2C%20%22Al%20Fredo%22%2C%20%22Reed%20Iculous%22%2C%20%22Chip%20Zinsalsa%22%2C%20%22Matt%20Uhrafact%22%2C%20%22Mike%20Roscope%22%2C%20%22Lou%20Sinclark%22%2C%20%22Faye%20Daway%22%2C%20%22Tom%20Ollie%22%2C%20%22Sam%20Buca%22%2C%20%22Phil%20Anderer%22%2C%20%22Sam%20Owen%22%2C%20%22Mary%20Achi%22%2C%20%22Curtis%20E.%20Flush%22%2C%20%22Holland%20Oats%22%2C%20%22Eddy%20Kitt%22%2C%20%22Al%20Toesacks%22%2C%20%22Elle%20Bowdrop%22%2C%20%22Anna%20Lytics%22%2C%20%22Sara%20Bellum%22%2C%20%22Phil%20Erup%22%2C%20%22Mary%20Nara%22%2C%20%22Vic%20Tory%22%2C%20%22Bobby%20Pin%22%2C%20%22Juan%20Soponatime%22%2C%20%22Dante%20Sinferno%22%2C%20%22Faye%20Sbook%22%2C%20%22Carrie%20R.%20Pigeon%22%2C%20%22Ty%20Pryder%22%2C%20%22Cole%20Slaw%22%2C%20%22Luke%20Warm%22%2C%20%22Travis%20Tee%22%2C%20%22Clara%20Fication%22%2C%20%22Paul%20Itician%22%2C%20%22Deb%20Utant%22%2C%20%22Moe%20Thegrass%22%2C%20%22Carol%20Sell%22%2C%20%22Scott%20Schtape%22%2C%20%22Cody%20Pendant%22%2C%20%22Frank%20Furter%22%2C%20%22Barry%20Dalive%22%2C%20%22Mort%20Adella%22%2C%20%22Ray%20Diation%22%2C%20%22Mack%20Adamia%22%2C%20%22Farrah%20Moan%22%2C%20%22Theo%20Retical%22%2C%20%22Eda%20Torial%22%2C%20%22Tucker%20Doubt%22%2C%20%22Cara%20Larm%22%2C%20%22Abel%20Body%22%2C%20%22Sal%20Ami%22%2C%20%22Colin%20Derr%22%2C%20%22Mark%20Key%22%2C%20%22Sven%20Gineer%22%2C%20%22Benny%20Ficial%22%2C%20%22Reggie%20Stration%22%2C%20%22Lou%20Ow%22%2C%20%22Lou%20Tenant%22%2C%20%22Nick%20Knack%22%2C%20%22Patty%20Whack%22%2C%20%22Dan%20Delion%22%2C%20%22Terry%20Torial%22%2C%20%22Indy%20Nile%22%2C%20%22Ray%20Volver%22%2C%20%22Minnie%20Strone%22%2C%20%22Gustav%20Wind%22%2C%20%22Vinny%20Gret%22%2C%20%22Joyce%20Tick%22%2C%20%22Cliff%20Diver%22%2C%20%22Earl%20E.%20Riser%22%2C%20%22Cooke%20Edoh%22%2C%20%22Jen%20Youfelct%22%2C%20%22Reanne%20Carnation%22%2C%20%22Gio%20Metric%22%2C%20%22Claire%20Innet%22%2C%20%22Marsha%20Mello%22%5D%3B%0A%20%20%20%20%2F%2F%20Randomize%20the%20anon_names%20array%0A%20%20%20%20for%20(var%20i%20%3D%20anon_names.length%20-%201%3B%20i%20%3E%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20var%20j%20%3D%20Math.floor(Math.random()%20*%20(i%20%2B%201))%3B%0A%20%20%20%20%20%20%20%20var%20temp%20%3D%20anon_names%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20anon_names%5Bi%5D%20%3D%20anon_names%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20anon_names%5Bj%5D%20%3D%20temp%3B%0A%20%20%20%20%7D%0A%20%20%20%20X.QSA(document%2C%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.uiProfilePhoto%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.profilePic%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20img.bfb_friend_activity_img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.UIImageBlock_MED_Image%20img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23navAccountPic%20img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.UIImageBlock_ENT_Image%20img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.smallPic%20.img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fbChatOrderedList%20.pic%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20img%5Bsrc*%3Dfbcdn-profile-%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.UFIActorImage%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20img.tickerStoryImage%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%5Bdata-hovercard*%3D%22user.php%22%5D%20img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%5Bdata-hovercard*%3D%22page.php%22%5D%20img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fbNubFlyout%20%5Bdata-hovercard%5D%20img.img%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Bdata-id%5D%20a%5Bhref*%3D'facebook.com%2Fmessages%2F'%5D%20img.img%60%2C%0A%20%20%20%20%20%20%20%20function(i)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(i.parentNode%20%26%26%20i.parentNode.href%20%26%26%20i.parentNode.href.indexOf(%22photo.php%22)%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20photo%2C%20not%20profile%20pic%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(i.src%20%26%26%20i.src.indexOf(%22external.ak.fbcdn%22)%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20External%20img%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(i.parentNode%20%26%26%20X(i.parentNode).hasClass('UIImageBlock_MED_Image'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i.src%20%3D%20%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhMgAyAMQAAPP1%252Bdzh7eXp8tHY58jR4s3V5O7x9vn6%252FOru9NTa6Pz9%252Funs8%252Fb4%252BvX2%252Bv7%252B%252F%252Fb3%252Btrg7MvT5MfQ4vj5%252B9fd6t7k7uPn8MbO4czT5PHz%252BNXc6dbc6dLZ6MbP4f%252F%252F%252F8TN4CH5BAAAAAAALAAAAAAyADIAAAX%252FYCeOZGmeaKqubJt%252BcCzPdG3feK7vfF8PFcMk4ivaCIGMZ%252BkJGJ8xDYBJHUCNmAd164FcexWuGPHVLcToR%252FkmQLvV61nETffGY206unGPKfViDn0wDIBogx8HhmIdg4qLWxeDE5BbjX1alUyIU5pLiH%252BaCohnnhODBY%252BeG32lnh5wcRCvSwt9A7RNfRK5HIO5RH2znraIrwSIH6GLgskBmgbJHxeaCdIfBpCj1x%252BQVtzLdNwwnYDjiYuX15AY3LyLGtcEmvHJGpoC0nmQfMkKnsHidLCQC0FAKBgQ5KKSwZeRDeUWUjngZIcEC%252F8k0lnQzsaAbBoXNaAwgwKlkKIqA3wIAQA7%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i.src%20%3D%20%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlh1ACuAPcAALjB2f%252F%252F%252F%252BPm8Njc6dTY58LJ3sDI3vL09%252B7w9dDW5dDV5cbM38PDw5KSkra%252F2LfA2LfA2bW%252F2LS%252B17W%252B17bA2LfB2f7%252B%252Fvz8%252Ff39%252FrvD2rS917W%252B2LW%252F177G3Ofp8fr6%252FLrC2tba6MTL3%252FLy99HW5sfO4b3F2%252Bbo8fv7%252FbnB2e3t7c3T5MLJ3cXM39PY57bA2b%252FG3LO81urs8%252Bzu9N3g7ODj7sHI3e%252Fw9tnd6szR4ra%252F1%252FHy9%252BLl78DH3fX2%252Btzf67vE29PX5unr8ufq8rzE28bN4PT1%252BcvR4uTn8Orr88DH3Ojq8vX2%252Bfj4%252Bvn5%252B7jB2N3h7N7h7Nzg7P79%252FtXa6Pf4%252B%252FP0%252BM3S4%252BXo8brC2fv7%252FOzt9NDV5sPK3vLz9%252F%252F%252B%252F8fN4Pb3%252BsXN4LvE2t%252Fi7bnC2ubp8fPz%252BMXL3%252BHl77O91vz7%252FeXo8Onr8%252BPm78DI3bO%252B1%252B3v9bzE2tfb6MnP4s7T5PT1%252BOLk7uHk7tLX57O91%252B7w9uvt88jO4e7v9djc6r3F3LjA2dvb29PY5s3T49%252Fj7tzg68vR48bM4KysrPDy9vPz9%252BDk7sHJ3dLX5vb2%252Btne6vf4%252Bs%252FV5dre6tre67nC2eDj7fHx9ubo8Ovt9Nvf69HX5ujr8vj5%252B%252F38%252Ff3%252B%252FszR47K81snO4fP1%252BdXa58jO4Ojq8fDx97rD2rvC2v7%252B%252F77F3M7T47zD2vr6%252B7vD2drd6rS%252B1r7G27K81bvD28nQ4b%252FH3PLy9tfc6ejq8%252F%252F%252F%252Fr%252FH3fj4%252B%252Fb2%252Bb3E29ba6dbb6Nbb6dTZ6NHV5uzt9eTm7%252F39%252Fff3%252Bu3u9O3u9b7F28bN4cfN4be%252F2PT0%252BPT0%252BfLx9%252FDy98vS4%252Fn6%252FOLk7%252Fn6%252B%252BHk7%252Fz8%252FsDI3PHz99LW5uHk7ff3%252B%252Bfq8fn4%252B8rQ4srQ4%252BPl77S%252B2MHH3u%252Fx9%252Bvs8%252BTm8OXn8PX1%252BOXn8f7%252F%252F8jP4MjP4fb4%252Bu7v9vL0%252BPv8%252FbS%252F2MzS4%252Bjp8fX3%252Bt7i7d%252Fj7fDx9s%252FU5M%252FU5cfO4Ors9PLz%252BLa%252B18LK3ubo8iH5BAAAAAAALAAAAADUAK4AAAj%252FABkEGEiwoMGDCBMqXMiwocOHECNKnEixIgOBFTNq3Mixo8ePGS%252BCHEmypMmTH0WiXMmypcuRKl%252FKnEmzJsGYNnPq3NkR50AAQIMKHUq0qNGjSJMqXcq0qdOnUKMaPegzgNSrWLNq3cq1K1KqGAt6HUu2rNmzTcEeRMu2rdu3UNUahEu3rt22csXe3cu3b9S8BP0KHkxYKOCfhRMrrnvY6uLHkM02jky5stbJljNrZop5s%252BfPhg1WBX0XAgUHDh6Qftp5NVoKESRISGFCSQ9ArtOKDhs491gHEyKoRqNA05AZO%252Bw8IqPad9LWzq9S0OMARh8qZrhd%252BGJwR4Hm0afu%252F14bHirsDRW6UMFyZqGXDhzKH4Uu%252FygECRxMlKCh6EPDNSVIUJ94BY02oFEVOCBBFnWksUhEbkxwYFH0TSgBBY388I4FE2ExAQQTDlVhfaiVIMAFGX0gjwYhhlYgb4hN6IAOIpiDAkfVHKEBiC2OGJ0Eq9iDwUcXCKMDeAf6mFsEDkhiBUkWuOGLgBMquVoEJiCB0ilFSJjkeHOVB8EEzIzAUickOEDBgFZ6BoEDBKDYkgVQALCmfG1q9oIDUnAo0wljRIAnmHr55gAIWtbkBwyChpdnZRRkMY9OlyjRqHOPRgbBA%252BnwdAMRL0SXKWQR4MDTQOcAwGNuoy7mwAJy8v9kgSMbYEpob6tRwMmpBFkBRAW%252BtZoYB4jAwytBJHjpmrCFaUDJsQRl4kCwt8b42QMgzADtQI%252FYMO2y1ToGmgM2uLJtAFNIQ%252BVqzA4WQS3nDvTHuqS1K1gE2sQbQA3fshvuag78oK8HqoL7InnjWqJvHCCsCpq9fjnggb4jZIDkZxD3JbG%252B0Fhs8E0wivvZxvE6Q8vFnmXMlwMy6GtBByhvpvJeFNCjbwAwfzyQgaBRUMXNOft7cJjjJuFy0PX%252BS5oDJ%252BiLDhAxazbzXSSfW3HUmU1tV9XbXq1zADyPPHG8XgsNMsIjY6LvIh6bvXPIAEOhbzmVOIyx0uMKHO8JBbv%252FDTbcS%252Bt9LsF2p4z3yCHoWwwAwPodtmcRcKEvDf0mPXShn0UwzOSVP3w45CvoG0Xnd1%252BOa%252BZi6BsCvZ6bbi3kqcebhxqsfq4ZBXDEfq4Ls5Aus%252B2WQfAGGZfoa0QNLYRq%252BdlEbwYBGzcT1EbfpTOPuWYQtBx9AFukUnjWwFfmgMLb8%252B044J45YOr2hdS6%252FNtoaxaP5NsHE8P58Wc2QQnbT1EH679zncg0E4ECNCF6HwCD%252B1pnvdPdThm3iJ4PeoC1ymgNLg%252BoxD6ix48yVJAyF4TLBBKlr0zo4WuP04wannUzMiiLgfBr3mYmEITozeFSMPxb%252FjLjAFAY42YEwGH1%252F2J4PT2x4Ebx%252BgIimoFC9I1MCPryQxm%252BJ7XwWcYBLWDCucLQhwW%252BT4cydFMHfAAtDIjAd4YTYG5iwANo3QACVAxgA183sjxAixEfBJ8aXeOALnziWMmy1R5X8wAgKIJXH0CDF%252FEXRs8kqI2n2kPbajfI1WjAEao4FSPgICorasYBLPjZTnRxBSEysoigeYC2dhKJDDjKk5oRxx94ggRTntKBS2PBkHRyhRdSco4DJE0FIADFnBihA3cSJDCjowEu%252BKkmUfDlL4mIS9K8AAQ7sMkaWIDGL6ZwNRJIgE1osEhqVdI3FPgHTXYAhGR28py5ccAbeiGTC9ABgOZcZnliUf8ImSCjH40rTwj9EoF8PJMlk7BlPqlJxyXlYJctoYJCpwlGVLomAg99SQgm2sQdXjSjLtkom2CZOZC2RKT1GWhfJuACmWxDmspkaDBzIwFcyIQNMF1oRavpmhikQSbkwKdOv%252BmaCYzNJaPIwhNSSlLnlYEYMjmGEtz5Tn1GpzpekEkCOepNJ%252FqmgAd8CQauINSONhKcRYiVS1wQCqbCczWByAAkaGIGE7jVqq6BAAiS8IGDvuQaN%252FBHN4e404aOTAQ8IUE5b2nY9LGCJ4YYbBrxupoJrE8nHqCqWS3qGQnkgie8SMEr3%252BrIDByAJxfoQhwnK9OvFsE%252FO1HHMMrK2sL%252FztQzGiAFr7AQn5jaNjeq0R5PmNADyeqRsp%252FRgAggypMgxCCgjL0tpAQkijhAKxKSyMAEjBsZlaLlPmNYwRaYeywvuKADF%252BqqRxeToAkQwQV72F4A7ACJcXAgAqtdjHfHsl0bwIKM8iWIN%252B7QggrQVjH73coDNuCAUuDBCQFGyBS6QYgnpNeCTaWaBDKwgjZoIcILsUA0BgGICfQWMgmOyps0YIM5mAnEDwmDIdBw3%252FzuJcVOocAEnqCPGoQBxhNxwhKOAILtIjjDbHmABORAgmICOSM3AAY2JqBZvuAYKQ%252BgMgugkI0ne4QJ1ABDlrnLlisX5QEaeMUhMKFWL3cE%252FwNb2IQsNFBluJg5KA%252BIgA5ggAMEuBklVqjHGal8lzvfJwUl4AGE%252F8wSFJhiBa24sJ2RfJUESYAIQeCDXxnNkhsMwBYScICNuZJiDjjAAJN4Eqdt0o4aiOA%252B0JUMpZ0CgSO14A7TWDVPPHGCbwDgQ2hR6QQeUIIhwFbXp7rADFbw61H%252FZdZK0TE7TrBpZJ%252BKD%252FgIBJlZA%252B2jZHkX1viwtV2WhBYQ2itTc0AKhCHKcUfvAlGQw2KvMjMJ9GAJ7gbxPdYB7K2obAKHAHC%252BI3yBEIja390WigRI0OaBB1gKEYj1s0nLlIWT1%252BERlgIF8vichP%252BaDkjE%252BJNXl5V2UaADz%252FsQuZtRsIwTTxy5THEAJFXuZXc0jN7djkARLk7zCH9hEAf%252BSs6H0PM%252Fn2EMziaKsB7QCHEX3cuE2LaIoK2Byz79yWYIOoFgjuUUCPfqQDaCCerccYobxQGNCCvYYayCAFzgCFqfutmLMgFwrP3JbQ8ADljE7bkTxQG%252FuDuQ8x6OB0i87Fw%252FigPwIHi2DyQZqEg6UFr1AHw3PsJ5P4MJOO4iYF7%252B8xCpCuhHzxDRk%252F70jUG96j2%252FetWbvvWnZ0AiGkD72tv%252B9rjPve53z%252Fve%252B%252F73wA%252B%252B8IdP%252FOIbPxGCuIjyl8%252F85jv%252F%252BdCPvvSnT%252F3qW%252F%252F62M%252B%252B9rfPAEEEBAA7%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20X.QSA(document%2C%20'%23navAccountName%2C%23navTimeline%20a'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20if%20(X(o%2C%20'img'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20o.innerHTML%3B%0A%20%20%20%20%20%20%20%20if%20(o.href)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(o.href.indexOf(%22%3F%22)%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2Fprofile.php%2F.test(o.href))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href.replace(%2F(profile.php%5B%5E%5C%26%5D%2B).*%2F%2C%20%22%241%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href.substring(0%2C%20o.href.indexOf(%22%3F%22))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!namehash%5Bc%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20colorhash%5Bc%5D%20%3D%20colorcount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(colorcount%20%3E%2024)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20colorcount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20namehash%5Bc%5D%20%3D%20%22Me%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20X(o).text(namehash%5Bc%5D).addClass('sfx_anonymous%20sfx_anonymous_'%20%2B%20colorhash%5Bc%5D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20X.QSA(document%2C%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.UFIReplySocialSentenceLinkText%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.actorName%20a%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.actorName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.ego_title%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20span.blueName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.passiveName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fbxWelcomeBoxName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*%5Bdata-hovercard*%3D%22user%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*%5Bdata-hovercard*%3D%22page%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*%5Bdata-hovercard*%3D%22group%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%5Bhref*%3D%22%2Fprofile.php%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.headerTinymanName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.UFICommentActorName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.UFILikeSentence%20a%5Bhref%5E%3D%22http%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23navTimeline%20a%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.tickerFeedMessage%20.passiveName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a.profileLink%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23friends_reminders_link%20.fbRemindersTitle%20strong%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fbNubFlyout%20.titlebarText%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Bdata-id%5D%20a%5Bhref*%3D'facebook.com%2Fmessages%2F'%5D%20._55lr%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Bdata-id%5D%20a%5Bhref*%3D'facebook.com%2Fmessages%2F'%5D%20._55ls%60%2C%0A%20%20%20%20%20%20%20%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(X(o).find('img').length%20%3E%200%20%7C%7C%20X(o).hasClass('sfx_anonymous'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20o.innerHTML%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(o.href)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(o.href.indexOf(%22%3F%22)%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2Fprofile.php%2F.test(o.href))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href.replace(%2F(profile.php%5B%5E%5C%26%5D%2B).*%2F%2C%20%22%241%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href.substring(0%2C%20o.href.indexOf(%22%3F%22))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20o.href%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!namehash%5Bc%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20colorhash%5Bc%5D%20%3D%20colorcount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(colorcount%20%3E%2024)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20colorcount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20namehash%5Bc%5D%20%3D%20anon_names%5Bnamecount%2B%2B%20%25%20anon_names.length%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20X(o).text(namehash%5Bc%5D).addClass('sfx_anonymous%20sfx_anonymous_'%20%2B%20colorhash%5Bc%5D)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Friend%20names%20in%20Like%20sentence%0A%20%20%20%20X.QSA(document%2C%20'a%5Bhref%5E%3D%22%2Fufi%2Freaction%22%5D%20span%5Bdata-hover%5D'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20X(o).safe_html(o.innerHTML.replace(%2F.*%3F%20and%20(%5Cd%2B.*)%24%2F%2C%20%22%241%22))%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20X.QSA(document%2C%20'%23groupSideNav%20.linkWrap'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20o.innerHTML%3B%0A%20%20%20%20%20%20%20%20if%20(!grouphash%5Bc%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20grouphash%5Bc%5D%20%3D%20%22Group%20%23%22%20%2B%20(groupcount%2B%2B)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20X(o).text(grouphash%5Bc%5D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Try%20to%20anonymize%20names%20in%20the%20ticker%20that%20are%20not%20friends%0A%20%20%20%20X.QSA(document%2C%20'.tickerFeedMessage%20.fwb'%2C%20function(token)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(token.nextSibling.nodeType%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20token.textContent%20%3D%20%22another%20user%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ignore%20failures%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20X.QSA(document%2C%20'.tickerFeedMessage'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2F%20(on%7Clikes)%20%5B%5E'%5D%2B's%20%2F.test(msg.innerHTML))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg.innerHTML%20%3D%20msg.innerHTML.replace(%2F%20(on%7Clikes)%20%5B%5E'%5D%2B's%20%2F%2C%20'%20%241%20someone%5C's%20')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ignore%20failures%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20X.QSA(document%2C%20'.tickerFeedMessage'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2Fposted%20in%2F.test(msg.innerHTML))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msg.innerHTML%20%3D%20msg.innerHTML.replace(%2Fposted%20in%20%5B%5E%5C.%5D%2B%2F%2C%20'posted')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ignore%20failures%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Anonymize%20Friend%20lists%0A%20%20%20%20X.QSA(document%2C%20'%23listsNav%20.linkWrap%2C%20%23pinnedNav%20li%5Bdata-type%3D%22type_friend_list%22%5D%20.linkWrap'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20X(o).text('Friend%20List')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Anonymize%20Pages%0A%20%20%20%20X.QSA(document%2C%20'%23pagesNav%20.linkWrap%2C%20%23pinnedNav%20li%5Bdata-type%3D%22type_page%22%5D%20.linkWrap'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20X(o).text('Page')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Anonymize%20Groups%0A%20%20%20%20X.QSA(document%2C%20'%23groupsNav%20.linkWrap%2C%20%23pinnedNav%20li%5Bdata-type%3D%22type_group%22%5D%20.linkWrap'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20X(o).text('Group')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2F%20Events%0A%20%20%20%20X.QSA(document%2C%20'%23pagelet_reminders%20%23event_reminders_link%20.fbRemindersTitle%2C%20%23eventsNav%20.linkWrap'%2C%20function(o)%20%7B%0A%20%20%20%20%20%20%20%20X(o).text('Event')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2FRemove%20internals%20links%0A%20%20%20%20X.QSA(document%2C%20%60a%5Bhref*%3D'www.facebook.com'%5D%2C%20a%5Bhref%5E%3D'%2F'%5D%60%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20msg.setAttribute(%22href%22%2C%20%22%23%22)%3B%0A%20%20%20%20%7D)%3B%0A%7D%0A%0Afunction%20save()%20%7B%0A%20%20%20%20anno()%0A%20%20%20%20%2F%2FRemove%20relative%20time%0A%20%20%20%20X.QSA(document%2C%20'abbr%5Bdata-utime%5D'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20msg.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%2F%2FExpand%20group%20desc%0A%20%20%20%20X.QSA(document%2C%20'span.see_more_link_inner'%2C%20function(msg)%20%7B%0A%20%20%20%20%20%20%20%20msg.click()%3B%0A%20%20%20%20%7D)%3B%0A%0A%09const%20styles%20%3D%20%60%0A%09div%23pagelet_sidebar%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_bluebar%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._2fvv%7B%20display%3Anone%20!important%3B%20%7D%0A%09form._3_gi%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._3miz%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._4adj%7B%20opacity%3A%200.0%3B%20!important%3B%20%7D%0A%09div%23pagelet_group_composer%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23groupsNewMembersLink%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._i7m%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._5dwa%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._2pio%7B%20display%3Anone%20!important%3B%20%7D%0A%09div.qjfq86k5%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_ego_contextual_group%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div%23pagelet_ego_pane%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_dock%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23pagelet_rhc_footer%7B%20display%3Anone%20!important%3B%20%7D%0A%09div%23group_rhc_post_tags_list%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div._18dz%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20div.groupsInviteJoinCard%7B%20display%3Anone%20!important%3B%20%7D%0A%0A%09div._43u6%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._6cuq%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._78bu%7B%20display%3Anone%20!important%3B%20%7D%0A%09div._4efl%7B%20display%3Anone%20!important%3B%20%7D%0A%09a._3_qk%7B%20display%3Anone%20!important%3B%20%7D%0A%09span._6cok%7B%20display%3Anone%20!important%3B%20%7D%0A%09a._6qw5%7B%20display%3Anone%20!important%3B%20%7D%0A%09span.timestampContent%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20html%20body._5vb_%20%23globalContainer%20%7B%0A%20%20%20%20%20%20%20%20padding-right%3A%200px%20!important%3B%0A%20%20%20%20%7D%0A%09abbr%5Bdata-utime%5D%3Abefore%20%7B%0A%09%20%20content%3A%20attr(title)%20attr(data-tooltip-content)%3B%0A%09%7D%0A%09a._6qw8%3Abefore%20%7B%0A%09%20%20content%3A%20%22%20%C2%B7%20%22%3B%0A%09%7D%0A%20%20%20%20div._8m-h%3A%3Abefore%7B%20display%3Anone%20!important%3B%20%7D%0A%20%20%20%20span.uiLikePageButton%7B%20display%3Anone%20!important%3B%20%7D%0A%0A%20%20%20%20div%5Brole%3D%22banner%22%5D%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.be9z9djy%20%7B%0A%20%20%20%20%20%20%20%20top%3A%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20div.qsy8amke.ue3kfks5.pw54ja7n.uo3d90p7.l82x9zwi.rq0escxv.ni8dbmo4.stjgntxs.l9j0dhe7.k4urcfbm%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.rq0escxv.l9j0dhe7.du4w35lb.j83agx80.taijpn5t.gs1a9yip.owycx6da.btwxx1t3.cddn0xzi.dsne8k7f%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.bp9cbjyn.m9osqain.j83agx80.jq4qci2q.bkfpd7mw.a3bd9o3v.kvgmc6g5.wkznzc2l.oygrvhab.dhix69tm.jktsbyx5.rz4wbd8a.osnr6wyh.a8nywdso.s1tcr66n%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.scb9dxdr.sj5x9vvc.hv4rvrfc.ecm0bbzt.lzcic4wl.btwxx1t3.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.rq0escxv.l9j0dhe7.du4w35lb.j83agx80.bkfpd7mw.bp9cbjyn.owycx6da.btwxx1t3%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.j34wkznp.qp9yad78.pmk7jnqg.kr520xx4%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.oajrlxb2.g5ia77u1.qu0x051f.esr5mh6w.e9989ue4.r7d6kgcz.rq0escxv.nhd2j8a9.q9uorilb.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.i1ao9s8h.esuyzwwr.f1sip0of.lzcic4wl.m9osqain.gpro0wi8.n3ffmt46.l9j0dhe7%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.oajrlxb2.bp9cbjyn.g5ia77u1.mtkw9kbi.tlpljxtp.qensuy8j.ppp5ayq2.goun2846.ccm00jje.s44p3ltw.mk2mc5f4.rt8b4zig.n8ej3o3l.agehan2d.sk4xxmp2.rq0escxv.nhd2j8a9.j83agx80.mg4g778l.btwxx1t3.pfnyh3mw.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.tgvbjcpo.hpfvmrgz.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.l9j0dhe7.i1ao9s8h.esuyzwwr.f1sip0of.du4w35lb.lzcic4wl.abiwlrkh.p8dawk7l.buofh1pr.taijpn5t%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20div.ecm0bbzt.hv4rvrfc.e5nlhep0.dati1w0a.lzcic4wl.btwxx1t3.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.poy2od1o.i09qtzwb.n7fi1qx3%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.a8nywdso.e5nlhep0.rz4wbd8a.ecm0bbzt.jklb3kyz.dhix69tm.oygrvhab.wkznzc2l.kvgmc6g5.j83agx80%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div.oajrlxb2.g5ia77u1.qu0x051f.esr5mh6w.e9989ue4.r7d6kgcz.rq0escxv.n05y2jgg.hbms080z.p7hjln8o.kvgmc6g5.cxmmr5t8.oygrvhab.hcukyx3x.jb3vyjys.rz4wbd8a.qt6c0cv9.a8nywdso.i1ao9s8h.vul9dhcy.f1sip0of.lzcic4wl.l9j0dhe7.abiwlrkh.p8dawk7l.f49446kz._3_qk.a8nywdso.qt6c0cv9.rz4wbd8a.jb3vyjys.jklb3kyz.owomucta.n3ffmt46.e9vueds3.bp9cbjyn%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%0A%20%20%20%20.sfx_anonymous%20%7B%0A%20%20%20%20%20%20border-radius%3A%203px%3B%0A%20%20%20%20%20%20padding-left%3A%202px%3B%0A%20%20%20%20%20%20padding-right%3A%202px%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_1%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23E6A4B5%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_2%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23EDC99A%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_3%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23F3F190%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_4%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23BBDB98%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_5%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23EBCD3E%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_6%20%7B%0A%20%20%20%20%20%20background-color%3A%20%236F308B%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_7%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23DB6A29%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_8%20%7B%0A%20%20%20%20%20%20background-color%3A%20%2397CEE6%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_9%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23B92036%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_10%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23C2BC82%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_11%20%7B%0A%20%20%20%20%20%20background-color%3A%20%237F8081%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_12%20%7B%0A%20%20%20%20%20%20background-color%3A%20%2362A647%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_13%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23D386B2%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_14%20%7B%0A%20%20%20%20%20%20background-color%3A%20%234578B3%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_15%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23DC8465%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_16%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23483896%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_17%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23E1A131%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_18%20%7B%0A%20%20%20%20%20%20background-color%3A%20%2391288D%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_19%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23E9E857%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_20%20%7B%0A%20%20%20%20%20%20background-color%3A%20%237D1716%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_21%20%7B%0A%20%20%20%20%20%20background-color%3A%20%2393AD3C%3B%0A%20%20%20%20%20%20color%3A%20black%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_22%20%7B%0A%20%20%20%20%20%20background-color%3A%20%236E3515%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_23%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23D12D27%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_24%20%7B%0A%20%20%20%20%20%20background-color%3A%20%232C3617%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20.sfx_anonymous_25%20%7B%0A%20%20%20%20%20%20background-color%3A%20%23000000%3B%0A%20%20%20%20%20%20color%3A%20white%20!important%3B%0A%20%20%20%20%7D%0A%20%20%20%20h1%23seo_h1_tag%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div%5Bdata-testid%3D%22group_header%22%5D%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div._19sz%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20div%23pagelet_group_rhc%20%7B%20display%3A%20none%20!important%3B%20%7D%0A%20%20%20%20%60%0A%0A%09const%20styleSheet%20%3D%20document.createElement(%22style%22)%0A%09styleSheet.type%20%3D%20%22text%2Fcss%22%0A%09styleSheet.innerText%20%3D%20styles%0A%09document.head.appendChild(styleSheet)%0A%0A%20%20%20%20if(document.querySelector('div%23contentArea'))%20%7B%0A%20%20%20%20%20%20%20%20let%20box%20%3D%20document.querySelector('div')%3B%0A%20%20%20%20%20%20%20%20let%20width%20%3D%20box.offsetWidth%3B%0A%20%20%20%20%20%20%20%20let%20height%20%3D%20box.offsetHeight%3B%0A%20%20%20%20%20%20%20%20page_l%20%3D%20Math.round(height*0.2015944286630624)%0A%20%20%20%20%7Delse%20%7B%0A%20%20%20%20%20%20%20%20let%20box%20%3D%20%20document.querySelector(%22.hybvsw6c.ue3kfks5.pw54ja7n.uo3d90p7.l82x9zwi.rq0escxv.ni8dbmo4.stjgntxs.l9j0dhe7.k4urcfbm.sbcfpzgs%22)%0A%20%20%20%20%20%20%20%20let%20width%20%3D%20box.offsetWidth%3B%0A%20%20%20%20%20%20%20%20let%20height%20%3D%20box.offsetHeight%2B500%3B%0A%20%20%20%20%20%20%20%20page_l%20%3D%20Math.round(height*0.2645833333333%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20styles_page%20%3D%20%60%0A%20%20%20%20%40page%20%7B%0A%20%20%20%20%20%20margin%3A%200%3B%0A%20%20%20%20%20%20padding%3A%200%3B%0A%20%20%20%20%20%20size%3A%20200mm%20%60%2Bpage_l%2B%60mm%3B%0A%20%20%20%20%60%0A%20%20%20%20const%20styleSheet_page%20%3D%20document.createElement(%22style%22)%0A%20%20%20%20styleSheet_page.type%20%3D%20%22text%2Fcss%22%0A%20%20%20%20styleSheet_page.innerText%20%3D%20styles_page%0A%20%20%20%20document.head.appendChild(styleSheet_page)%0A%0A%20%20%20%20window.scrollTo(0%2C%200)%0A%20%20%20%20setTimeout(window.print%2C%203000)%0A%7D%7D)()">
<span>Post Anonymiser to PDF</span>
</a></span>

<p>To install, drag-and-drop the above item(s) of your choosing to your <strong>bookmarks bar</strong>.
To toggle the presence of the bookmarks bar:</p>
<ul>
<li>Google Chrome and Chromium-based Microsoft Edge: Ctrl+Shift+B</li>
<li>Mozilla Firefox: From the menu: [Alt] | View | Toolbars | Bookmarks Toolbar</li>
<li>Apple Safari (on Mac): Bookmarks might be called favorites, and the toggle combination might be &#8679;&#8984;B</li>
<li>Microsoft Edge, not Chromium-based: Doesn't support bookmarklets.</li>
</ul>
<p>To update a bookmark, create a new one and then delete the old one by right-clicking it and selecting <strong>Delete</strong>.</p>
<p>NB: <strong>Anonymiser</strong> isn't compatible with the new Facebook UI.</p>
</body>
</html>